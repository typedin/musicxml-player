var DA=(A=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(A,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):A)(function(A){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+A+'" is not supported')});var Ja=(A=>typeof DA<"u"?DA:typeof Proxy<"u"?new Proxy(A,{get:(e,t)=>(typeof DA<"u"?DA:e)[t]}):A)(function(A){if(typeof DA<"u")return DA.apply(this,arguments);throw Error('Dynamic require of "'+A+'" is not supported')}),Y=class extends Uint8Array{currentIndex=0;slice(A,e){let t=super.slice(A,e);return t.currentIndex=0,t}};function nA(A,e=A.length,t=0){let n="";for(let s=0;s<e;s++){let a=A[t+s];if(a===0)return n;n+=String.fromCharCode(a)}return n}function Ce(A,e){let t=A.currentIndex;return A.currentIndex+=e,nA(A,e,t)}function aA(A,e=!1,t=!1){let n=A.length;e&&n++,t&&n%2!==0&&n++;let s=new Y(n);return ke(s,A),s}function ke(A,e,t=0){t>0&&e.length>t&&(e=e.slice(0,t));for(let n=0;n<e.length;n++)A[A.currentIndex++]=e.charCodeAt(n);if(t>e.length)for(let n=0;n<t-e.length;n++)A[A.currentIndex++]=0;return A}function L(A,e){let t=Ks(A,e,A.currentIndex);return A.currentIndex+=e,t}function Ks(A,e,t=0){let n=0;for(let s=0;s<e;s++)n|=A[t+s]<<s*8;return n>>>0}function Bt(A,e,t){for(let n=0;n<t;n++)A[A.currentIndex++]=e>>n*8&255}function q(A,e){A[A.currentIndex++]=e&255,A[A.currentIndex++]=e>>8}function re(A,e){Bt(A,e,4)}function Xn(A,e){let t=e<<8|A;return t>32767?t-65536:t}function Ka(A){return A>127?A-256:A}var xs=class{header;size;data;constructor(A,e,t){this.header=A,this.size=e,this.data=t}};function ae(A,e=!0,t=!1){let n=Ce(A,4),s=L(A,4);n===""&&(s=0);let a;return e?a=A.slice(A.currentIndex,A.currentIndex+s):a=new Y(0),(e||t)&&(A.currentIndex+=s,s%2!==0&&A.currentIndex++),new xs(n,s,a)}function Ie(A,e,t=!1,n=!1){if(A.length!==4)throw new Error(`Invalid header length: ${A}`);let s=8,a=A,o=e.length;t&&o++;let r=o;n&&(s+=4,r+=4,a="LIST");let i=s+o;i%2!==0&&i++;let g=new Y(i);return ke(g,a),re(g,r),n&&ke(g,A),g.set(e,s),g}function be(A,e,t=!1){let n=8,s=A,a=e.reduce((g,c)=>c.length+g,0),o=a;t&&(n+=4,o+=4,s="LIST");let r=n+a;r%2!==0&&r++;let i=new Y(r);return ke(i,s),re(i,o),t&&ke(i,A),e.forEach(g=>{i.set(g,n),n+=g.length}),i}function pA(A,e){return A.find(t=>t.header!=="LIST"?!1:(t.data.currentIndex=4,nA(t.data,4)===e))}function jn(A,e){return{...e,...A??{}}}function ut(A,e,t=0){let n=0;for(let s=0;s<e;s++)n=n<<8|A[t+s];return n>>>0}function WA(A,e){let t=ut(A,e,A.currentIndex);return A.currentIndex+=e,t}function Dt(A,e){let t=new Array(e).fill(0);for(let n=e-1;n>=0;n--)t[n]=A&255,A>>=8;return t}function ue(A){let e=0;for(;A;){let t=A[A.currentIndex++];if(e=e<<7|t&127,t>>7!==1)break}return e}function gn(A){let e=[A&127];for(A>>=7;A>0;)e.unshift(A&127|128),A>>=7;return e}function ps(A){A=Math.floor(A);let e=Math.floor(A/60),t=Math.round(A-e*60);return{minutes:e,seconds:t,time:`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}}function Me(A){let e="";for(let t of A){let n=t.toString(16).padStart(2,"0").toUpperCase();e+=n,e+=" "}return e}var h={warn:"color: orange;",unrecognized:"color: red;",info:"color: aqua;",recognized:"color: lime",value:"color: yellow; background-color: black;"},Vs;(()=>{var A=Uint8Array,e=Uint16Array,t=Int32Array,n=new A([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new A([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new A([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=function(D,b){for(var P=new e(31),te=0;te<31;++te)P[te]=b+=1<<D[te-1];for(var ie=new t(P[30]),te=1;te<30;++te)for(var Te=P[te];Te<P[te+1];++Te)ie[Te]=Te-P[te]<<5|te;return{b:P,r:ie}},r=o(n,2),i=r.b,g=r.r;i[28]=258,g[258]=28;var c=o(s,0),Q=c.b,B=c.r,l=new e(32768);for(k=0;k<32768;++k)d=(k&43690)>>1|(k&21845)<<1,d=(d&52428)>>2|(d&13107)<<2,d=(d&61680)>>4|(d&3855)<<4,l[k]=((d&65280)>>8|(d&255)<<8)>>1;var d,k,p=function(D,b,P){for(var te=D.length,ie=0,Te=new e(b);ie<te;++ie)D[ie]&&++Te[D[ie]-1];var iA=new e(b);for(ie=1;ie<b;++ie)iA[ie]=iA[ie-1]+Te[ie-1]<<1;var ze;if(P){ze=new e(1<<b);var _e=15-b;for(ie=0;ie<te;++ie)if(D[ie])for(var UA=ie<<4|D[ie],oA=b-D[ie],$=iA[D[ie]-1]++<<oA,ce=$|(1<<oA)-1;$<=ce;++$)ze[l[$]>>_e]=UA}else for(ze=new e(te),ie=0;ie<te;++ie)D[ie]&&(ze[ie]=l[iA[D[ie]-1]++]>>15-D[ie]);return ze},m=new A(288);for(k=0;k<144;++k)m[k]=8;var k;for(k=144;k<256;++k)m[k]=9;var k;for(k=256;k<280;++k)m[k]=7;var k;for(k=280;k<288;++k)m[k]=8;var k,F=new A(32);for(k=0;k<32;++k)F[k]=5;var k,G=p(m,9,1),x=p(F,5,1),J=function(D){for(var b=D[0],P=1;P<D.length;++P)D[P]>b&&(b=D[P]);return b},E=function(D,b,P){var te=b/8|0;return(D[te]|D[te+1]<<8)>>(b&7)&P},ee=function(D,b){var P=b/8|0;return(D[P]|D[P+1]<<8|D[P+2]<<16)>>(b&7)},Ae=function(D){return(D+7)/8|0},_=function(D,b,P){return(b==null||b<0)&&(b=0),(P==null||P>D.length)&&(P=D.length),new A(D.subarray(b,P))},V=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],H=function(D,b,P){var te=new Error(b||V[D]);if(te.code=D,Error.captureStackTrace&&Error.captureStackTrace(te,H),!P)throw te;return te},K=function(D,b,P,te){var ie=D.length,Te=te?te.length:0;if(!ie||b.f&&!b.l)return P||new A(0);var iA=!P,ze=iA||b.i!=2,_e=b.i;iA&&(P=new A(ie*3));var UA=function(yt){var uA=P.length;if(yt>uA){var at=new A(Math.max(uA*2,yt));at.set(P),P=at}},oA=b.f||0,$=b.p||0,ce=b.b||0,$e=b.l,Ne=b.d,BA=b.m,dA=b.n,et=ie*8;do{if(!$e){oA=E(D,$,1);var TA=E(D,$+1,3);if($+=3,TA)if(TA==1)$e=G,Ne=x,BA=9,dA=5;else if(TA==2){var At=E(D,$,31)+257,jt=E(D,$+10,15)+4,zt=At+E(D,$+5,31)+1;$+=14;for(var NA=new A(zt),QA=new A(19),Je=0;Je<jt;++Je)QA[a[Je]]=E(D,$+Je*3,7);$+=jt*3;for(var _t=J(QA),ft=(1<<_t)-1,JA=p(QA,_t,1),Je=0;Je<zt;){var tt=JA[E(D,$,ft)];$+=tt&15;var De=tt>>4;if(De<16)NA[Je++]=De;else{var rA=0,nt=0;for(De==16?(nt=3+E(D,$,3),$+=2,rA=NA[Je-1]):De==17?(nt=3+E(D,$,7),$+=3):De==18&&(nt=11+E(D,$,127),$+=7);nt--;)NA[Je++]=rA}}var $t=NA.subarray(0,At),IA=NA.subarray(At);BA=J($t),dA=J(IA),$e=p($t,BA,1),Ne=p(IA,dA,1)}else H(1);else{var De=Ae($)+4,mt=D[De-4]|D[De-3]<<8,pt=De+mt;if(pt>ie){_e&&H(0);break}ze&&UA(ce+mt),P.set(D.subarray(De,pt),ce),b.b=ce+=mt,b.p=$=pt*8,b.f=oA;continue}if($>et){_e&&H(0);break}}ze&&UA(ce+131072);for(var cs=(1<<BA)-1,Es=(1<<dA)-1,St=$;;St=$){var rA=$e[ee(D,$)&cs],kA=rA>>4;if($+=rA&15,$>et){_e&&H(0);break}if(rA||H(2),kA<256)P[ce++]=kA;else if(kA==256){St=$,$e=null;break}else{var en=kA-254;if(kA>264){var Je=kA-257,gA=n[Je];en=E(D,$,(1<<gA)-1)+i[Je],$+=gA}var KA=Ne[ee(D,$)&Es],FA=KA>>4;KA||H(3),$+=KA&15;var IA=Q[FA];if(FA>3){var gA=s[FA];IA+=ee(D,$)&(1<<gA)-1,$+=gA}if($>et){_e&&H(0);break}ze&&UA(ce+131072);var st=ce+en;if(ce<IA){var xA=Te-IA,Se=Math.min(IA,st);for(xA+ce<0&&H(3);ce<Se;++ce)P[ce]=te[xA+ce]}for(;ce<st;++ce)P[ce]=P[ce-IA]}}b.l=$e,b.p=St,b.b=ce,b.f=oA,$e&&(oA=1,b.m=BA,b.d=Ne,b.n=dA)}while(!oA);return ce!=P.length&&iA?_(P,0,ce):P.subarray(0,ce)},W=new A(0);function le(D,b){return K(D,{i:2},b&&b.out,b&&b.dictionary)}var ge=typeof TextDecoder<"u"&&new TextDecoder,O=0;try{ge.decode(W,{stream:!0}),O=1}catch{}Vs=le})();var Ys=Vs,qs=!1,Os=!0,qt=!1;function Ps(A,e,t){qs=A,Os=e,qt=t}function y(...A){qs&&console.info(...A)}function ne(...A){Os&&console.warn(...A)}function He(...A){qt&&console.group(...A)}function Ge(...A){qt&&console.groupCollapsed(...A)}function Z(){qt&&console.groupEnd()}var Ue={consoleColors:h,SpessaSynthInfo:y,SpessaSynthWarn:ne,SpessaSynthGroupCollapsed:Ge,SpessaSynthGroup:He,SpessaSynthGroupEnd:Z,readBytesAsUintBigEndian:ut,readLittleEndian:L,readBytesAsString:Ce,readVariableLengthQuantity:ue,inflateSync:Ys};var Xe=class{ticks;statusByte;data;constructor(A,e,t){this.ticks=A,this.statusByte=e,this.data=t}};function xa(A){let e=A&240,t=A&15,n=t;switch(e){case 128:case 144:case 160:case 176:case 192:case 208:case 224:break;case 240:switch(t){case 0:n=-3;break;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:n=-1;break;case 15:n=-2;break}break;default:n=-1}return n}function zn(A){let e=A&240,t=A&15,n=-1,s=A;return e>=128&&e<=224&&(n=t,s=e),{status:s,channel:n}}var Va={8:2,9:2,10:2,11:2,12:1,13:1,14:2},R={noteOff:128,noteOn:144,polyPressure:160,controllerChange:176,programChange:192,channelPressure:208,pitchWheel:224,systemExclusive:240,timecode:241,songPosition:242,songSelect:243,tuneRequest:246,clock:248,start:250,continue:251,stop:252,activeSensing:254,reset:255,sequenceNumber:0,text:1,copyright:2,trackName:3,instrumentName:4,lyric:5,marker:6,cuePoint:7,programName:8,midiChannelPrefix:32,midiPort:33,endOfTrack:47,setTempo:81,smpteOffset:84,timeSignature:88,keySignature:89,sequenceSpecific:127},S={bankSelect:0,modulationWheel:1,breathController:2,undefinedCC3:3,footController:4,portamentoTime:5,dataEntryMSB:6,mainVolume:7,balance:8,undefinedCC9:9,pan:10,expressionController:11,effectControl1:12,effectControl2:13,undefinedCC14:14,undefinedCC15:15,generalPurposeController1:16,generalPurposeController2:17,generalPurposeController3:18,generalPurposeController4:19,undefinedCC20:20,undefinedCC21:21,undefinedCC22:22,undefinedCC23:23,undefinedCC24:24,undefinedCC25:25,undefinedCC26:26,undefinedCC27:27,undefinedCC28:28,undefinedCC29:29,undefinedCC30:30,undefinedCC31:31,bankSelectLSB:32,modulationWheelLSB:33,breathControllerLSB:34,undefinedCC3LSB:35,footControllerLSB:36,portamentoTimeLSB:37,dataEntryLSB:38,mainVolumeLSB:39,balanceLSB:40,undefinedCC9LSB:41,panLSB:42,expressionControllerLSB:43,effectControl1LSB:44,effectControl2LSB:45,undefinedCC14LSB:46,undefinedCC15LSB:47,undefinedCC16LSB:48,undefinedCC17LSB:49,undefinedCC18LSB:50,undefinedCC19LSB:51,undefinedCC20LSB:52,undefinedCC21LSB:53,undefinedCC22LSB:54,undefinedCC23LSB:55,undefinedCC24LSB:56,undefinedCC25LSB:57,undefinedCC26LSB:58,undefinedCC27LSB:59,undefinedCC28LSB:60,undefinedCC29LSB:61,undefinedCC30LSB:62,undefinedCC31LSB:63,sustainPedal:64,portamentoOnOff:65,sostenutoPedal:66,softPedal:67,legatoFootswitch:68,hold2Pedal:69,soundVariation:70,filterResonance:71,releaseTime:72,attackTime:73,brightness:74,decayTime:75,vibratoRate:76,vibratoDepth:77,vibratoDelay:78,soundController10:79,generalPurposeController5:80,generalPurposeController6:81,generalPurposeController7:82,generalPurposeController8:83,portamentoControl:84,undefinedCC85:85,undefinedCC86:86,undefinedCC87:87,undefinedCC88:88,undefinedCC89:89,undefinedCC90:90,reverbDepth:91,tremoloDepth:92,chorusDepth:93,detuneDepth:94,phaserDepth:95,dataIncrement:96,dataDecrement:97,nonRegisteredParameterLSB:98,nonRegisteredParameterMSB:99,registeredParameterLSB:100,registeredParameterMSB:101,undefinedCC102LSB:102,undefinedCC103LSB:103,undefinedCC104LSB:104,undefinedCC105LSB:105,undefinedCC106LSB:106,undefinedCC107LSB:107,undefinedCC108LSB:108,undefinedCC109LSB:109,undefinedCC110LSB:110,undefinedCC111LSB:111,undefinedCC112LSB:112,undefinedCC113LSB:113,undefinedCC114LSB:114,undefinedCC115LSB:115,undefinedCC116LSB:116,undefinedCC117LSB:117,undefinedCC118LSB:118,undefinedCC119LSB:119,allSoundOff:120,resetAllControllers:121,localControlOnOff:122,allNotesOff:123,omniModeOff:124,omniModeOn:125,monoModeOn:126,polyModeOn:127};function Ya(A){if(!A.tracks)throw new Error("MIDI has no tracks!");let e=[];for(let s of A.tracks){let a=[],o=0,r;for(let i of s.events){let g=Math.max(0,i.ticks-o);if(i.statusByte===R.endOfTrack){o+=g;continue}let c;i.statusByte<=R.sequenceSpecific?(c=[255,i.statusByte,...gn(i.data.length),...i.data],r=void 0):i.statusByte===R.systemExclusive?(c=[240,...gn(i.data.length),...i.data],r=void 0):(c=[],r!==i.statusByte&&(r=i.statusByte,c.push(i.statusByte)),c.push(...i.data)),a.push(...gn(g)),a.push(...c),o+=g}a.push(0),a.push(255),a.push(R.endOfTrack),a.push(0),e.push(new Uint8Array(a))}let t=(s,a)=>{for(let o=0;o<s.length;o++)a.push(s.charCodeAt(o))},n=[];t("MThd",n),n.push(...Dt(6,4)),n.push(0,A.format),n.push(...Dt(A.tracks.length,2)),n.push(...Dt(A.timeDivision,2));for(let s of e)t("MTrk",n),n.push(...Dt(s.length,4)),n.push(...s);return new Uint8Array(n).buffer}var qa=350,lA=9,Fn=16,Hs="gs",je=-1,Mt=`SPESSASYNTH_EMBEDDED_BANK_${Math.random()}_DO_NOT_DELETE`,Ws=32767,Oa={time:0},Pa=.03,Ha=.07,Wa=1,Za=64,Ss=121,fe=class{static getDefaultBank(A){return A==="gm2"?Ss:0}static getDrumBank(A){switch(A){default:throw new Error(`${A} doesn't have a bank MSB for drums.`);case"gm2":return 120;case"xg":return 127}}static isXGDrums(A){return A===120||A===126||A===127}static isValidXGMSB(A){return this.isXGDrums(A)||A===Za||A===Ss}static isSystemXG(A){return A==="gm2"||A==="xg"}static addBankOffset(A,e,t=!0){return this.isXGDrums(A)&&t?A:Math.min(A+e,127)}static subtrackBankOffset(A,e,t=!0){return this.isXGDrums(A)&&t?A:Math.max(0,A-e)}};function _n(A){return A.data[0]===67&&A.data[2]===76&&A.data[5]===126&&A.data[6]===0}function Zs(A){return A.data[0]===65&&A.data[2]===66&&A.data[3]===18&&A.data[4]===64&&(A.data[5]&16)!==0&&A.data[6]===21}function $n(A){return A.data[0]===65&&A.data[2]===66&&A.data[6]===127}function es(A){return A.data[0]===126&&A.data[2]===9&&A.data[3]===1}function As(A){return A.data[0]===126&&A.data[2]===9&&A.data[3]===3}function Xs(A){return new Xe(A,R.systemExclusive,new Y([65,16,66,18,64,0,127,0,65,247]))}var sA=class js{static toMIDIString(e){return e.isGMGSDrum?`DRUM:${e.program}`:`${e.bankLSB}:${e.bankMSB}:${e.program}`}static fromMIDIString(e){let t=e.split(":");if(t.length>3||t.length<2)throw new Error("Invalid MIDI string:");return e.startsWith("DRUM")?{bankMSB:0,bankLSB:0,program:parseInt(t[1]),isGMGSDrum:!0}:{bankLSB:parseInt(t[0]),bankMSB:parseInt(t[1]),program:parseInt(t[2]),isGMGSDrum:!1}}static toNamedMIDIString(e){return`${js.toMIDIString(e)} ${e.name}`}static matches(e,t){return e.isGMGSDrum||t.isGMGSDrum?e.isGMGSDrum===t.isGMGSDrum&&e.program===t.program:e.program===t.program&&e.bankLSB===t.bankLSB&&e.bankMSB===t.bankMSB}static fromNamedMIDIString(e){let t=e.indexOf(" ");if(t<0)throw new Error(`Invalid named MIDI string: ${e}`);let n=this.fromMIDIString(e.substring(0,t)),s=e.substring(t+1);return{...n,name:s}}static sorter(e,t){return e.program!==t.program?e.program-t.program:e.isGMGSDrum&&!t.isGMGSDrum?1:!e.isGMGSDrum&&t.isGMGSDrum?-1:e.bankMSB!==t.bankMSB?e.bankMSB-t.bankMSB:e.bankLSB-t.bankLSB}},Xa="Created using SpessaSynth";function ja(A,e,t){let n="gm",s=[],a=Array(A.tracks.length).fill(0),o=16+Math.max(...A.portChannelOffsetMap),r=[];for(let i=0;i<o;i++)r.push({program:0,drums:i%16===lA,lastBank:void 0,lastBankLSB:void 0,hasBankSelect:!1});if(A.iterate((i,g)=>{let c=A.portChannelOffsetMap[a[g]];if(i.statusByte===R.midiPort){a[g]=i.data[0];return}let Q=i.statusByte&240;if(Q!==R.controllerChange&&Q!==R.programChange&&Q!==R.systemExclusive)return;if(Q===R.systemExclusive){if(!Zs(i)){_n(i)?n="xg":$n(i)?n="gs":es(i)?(n="gm",s.push({tNum:g,e:i})):As(i)&&(n="gm2");return}let p=[9,0,1,2,3,4,5,6,7,8,10,11,12,13,14,15][i.data[5]&15]+c;r[p].drums=!!(i.data[7]>0&&i.data[5]>>4);return}let B=(i.statusByte&15)+c,l=r[B];if(Q===R.programChange){let m={program:i.data[0],bankLSB:l.lastBankLSB?.data?.[1]??0,bankMSB:fe.subtrackBankOffset(l.lastBank?.data?.[1]??0,A.bankOffset),isGMGSDrum:l.drums},F=t.getPreset(m,n);if(y(`%cInput patch: %c${sA.toMIDIString(m)}%c. Channel %c${B}%c. Changing patch to ${F.toString()}.`,h.info,h.unrecognized,h.info,h.recognized,h.info),i.data[0]=F.program,F.isGMGSDrum&&fe.isSystemXG(n)||l.lastBank===void 0||(l.lastBank.data[1]=fe.addBankOffset(F.bankMSB,e,F.isXGDrums),l.lastBankLSB===void 0))return;l.lastBankLSB.data[1]=F.bankLSB;return}let d=i.data[0]===S.bankSelectLSB;i.data[0]!==S.bankSelect&&!d||(l.hasBankSelect=!0,d?l.lastBankLSB=i:l.lastBank=i)}),r.forEach((i,g)=>{if(i.hasBankSelect)return;let c=g%16,Q=R.programChange|c,B=Math.floor(g/16)*16,l=A.portChannelOffsetMap.indexOf(B),d=A.tracks.find(G=>G.port===l&&G.channels.has(c));if(d===void 0)return;let p=d.events.findIndex(G=>G.statusByte===Q);if(p===-1){let G=d.events.findIndex(E=>E.statusByte>128&&E.statusByte<240&&(E.statusByte&15)===c);if(G===-1)return;let x=d.events[G].ticks,J=t.getPreset({bankMSB:0,bankLSB:0,program:0,isGMGSDrum:!1},n).program;d.addEvent(new Xe(x,R.programChange|c,new Y([J])),G),p=G}y(`%cAdding bank select for %c${g}`,h.info,h.recognized);let m=d.events[p].ticks,F=t.getPreset({bankLSB:0,bankMSB:0,program:i.program,isGMGSDrum:i.drums},n),k=fe.addBankOffset(F.bankMSB,e,F.isXGDrums);d.addEvent(new Xe(m,R.controllerChange|c,new Y([S.bankSelect,k])),p)}),n==="gm"&&!fe.isSystemXG(n)){for(let g of s){let c=A.tracks[g.tNum];c.deleteEvent(c.events.indexOf(g.e))}let i=0;A.tracks[0].events[0].statusByte===R.trackName&&i++,A.tracks[0].addEvent(Xs(0),i)}}var ys={bankOffset:0,metadata:{},correctBankOffset:!0,soundBank:void 0};function za(A,e,t){let n=t.metadata;if(He("%cWriting the RMIDI File...",h.info),y("metadata",n),y("Initial bank offset",A.bankOffset),t.correctBankOffset){if(!t.soundBank)throw new Error("Sound bank must be provided if correcting bank offset.");ja(A,t.bankOffset,t.soundBank)}let s=new Y(A.writeMIDI());n.name??=A.getName(),n.creationDate??=new Date,n.copyright??=Xa,n.software??="SpessaSynth",Object.entries(n).forEach(r=>{let i=r;i[1]&&A.setRMIDInfo(i[0],i[1])});let a=[];Object.entries(A.rmidiInfo).forEach(r=>{let i=r[0],g=r[1],c=Q=>{a.push(Ie(Q,g))};switch(i){case"album":c("IALB"),c("IPRD");break;case"software":c("ISFT");break;case"infoEncoding":c("IENC");break;case"creationDate":c("ICRD");break;case"picture":c("IPIC");break;case"name":c("INAM");break;case"artist":c("IART");break;case"genre":c("IGNR");break;case"copyright":c("ICOP");break;case"comment":c("ICMT");break;case"engineer":c("IENG");break;case"subject":c("ISBJ");break;case"midiEncoding":c("MENC");break}});let o=new Y(2);return Bt(o,t.bankOffset,2),a.push(Ie("DBNK",o)),y("%cFinished!",h.info),Z(),be("RIFF",[aA("RMID"),Ie("data",s),be("INFO",a,!0),new Y(e)]).buffer}function _a(A,e){Ge("%cSearching for all used programs and keys...",h.info);let t=16+Math.max(...A.portChannelOffsetMap),n=[],s="gs";for(let r=0;r<t;r++){let i=r%16===lA;n.push({preset:e.getPreset({bankLSB:0,bankMSB:0,isGMGSDrum:i,program:0},s),bankMSB:0,bankLSB:0,isDrum:i})}let a=new Map,o=A.tracks.map(r=>r.port);return A.iterate((r,i)=>{if(r.statusByte===R.midiPort){o[i]=r.data[0];return}let g=r.statusByte&240;if(g!==R.noteOn&&g!==R.controllerChange&&g!==R.programChange&&g!==R.systemExclusive)return;let c=(r.statusByte&15)+A.portChannelOffsetMap[o[i]]||0,Q=n[c];switch(g){case R.programChange:Q.preset=e.getPreset({bankMSB:Q.bankMSB,bankLSB:Q.bankLSB,program:r.data[0],isGMGSDrum:Q.isDrum},s);break;case R.controllerChange:switch(r.data[0]){default:return;case S.bankSelectLSB:Q.bankLSB=r.data[1];break;case S.bankSelect:Q.bankMSB=r.data[1]}break;case R.noteOn:if(r.data[1]===0)return;let B=a.get(Q.preset);B||(B=new Set,a.set(Q.preset,B)),B.add(`${r.data[0]}-${r.data[1]}`);break;case R.systemExclusive:{if(!Zs(r)){_n(r)?(s="xg",y("%cXG on detected!",h.recognized)):As(r)?(s="gm2",y("%cGM2 on detected!",h.recognized)):es(r)?(s="gm",y("%cGM on detected!",h.recognized)):$n(r)&&(s="gs",y("%cGS on detected!",h.recognized));return}let l=[9,0,1,2,3,4,5,6,7,8,10,11,12,13,14,15][r.data[5]&15]+A.portChannelOffsetMap[o[i]],d=!!(r.data[7]>0&&r.data[5]>>4);Q=n[l],Q.isDrum=d}break}}),a.forEach((r,i)=>{r.size===0&&(y(`%cDetected change but no keys for %c${i.name}`,h.info,h.value),a.delete(i))}),Z(),a}function $a(A,e=0){let t=B=>(B.data=new Y(B.data.buffer),6e7/ut(B.data,3)),n=[],a=A.tracks.map(B=>B.events).flat();a.sort((B,l)=>B.ticks-l.ticks);for(let B=0;B<16;B++)n.push([]);let o=0,r=60/(120*A.timeDivision),i=0,g=0,c=[];for(let B=0;B<16;B++)c.push([]);let Q=(B,l)=>{let d=c[l].findIndex(m=>m.midiNote===B),p=c[l][d];if(p){let m=o-p.start;p.length=m,l===lA&&(p.length=m<e?e:m),c[l].splice(d,1)}g--};for(;i<a.length;){let B=a[i],l=B.statusByte>>4,d=B.statusByte&15;if(l===8)Q(B.data[0],d);else if(l===9)if(B.data[1]===0)Q(B.data[0],d);else{Q(B.data[0],d);let p={midiNote:B.data[0],start:o,length:-1,velocity:B.data[1]/127};n[d].push(p),c[d].push(p),g++}else B.statusByte===81&&(r=60/(t(B)*A.timeDivision));if(++i>=a.length)break;o+=r*(a[i].ticks-B.ticks)}return g>0&&c.forEach((B,l)=>{B.forEach(d=>{let p=o-d.start;d.length=p,l===lA&&(d.length=p<e?e:p)})}),n}var Lt={linear:0,nearestNeighbor:1,hermite:2},hn={soundCanvasText:0,yamahaXGText:1,soundCanvasDotMatrix:2},Ve={Idle:0,RPCoarse:1,RPFine:2,NRPCoarse:3,NRPFine:4,DataCoarse:5,DataFine:6},oe={channelTuning:0,channelTransposeFine:1,modulationMultiplier:2,masterTuning:3,channelTuningSemitones:4,channelKeyShift:5,sf2NPRNGeneratorLSB:6};function qA(A,e,t,n){return new Xe(n,R.controllerChange|A%16,new Y([e,t]))}function ei(A,e){let t=16|[1,2,3,4,5,6,7,8,0,9,10,11,12,13,14,15][A%16],n=[65,16,66,18,64,t,21,1],a=128-(64+t+21+1)%128;return new Xe(e,R.systemExclusive,new Y([...n,a,247]))}function Ai(A,e=[],t=[],n=[],s=[]){Ge("%cApplying changes to the MIDI file...",h.info),y("Desired program changes:",e),y("Desired CC changes:",t),y("Desired channels to clear:",n),y("Desired channels to transpose:",s);let a=new Set;e.forEach(m=>{a.add(m.channel)});let o="gs",r=!1,i=A.tracks.map(m=>m.port),g={},c=0,Q=(m,F)=>{A.tracks[m].channels.size!==0&&(c===0&&(c+=16,g[F]=0),g[F]===void 0&&(g[F]=c,c+=16),i[m]=F)};A.tracks.forEach((m,F)=>{Q(F,m.port)});let B=c,l=Array(B).fill(!0),d=Array(B).fill(0),p=Array(B).fill(0);if(s.forEach(m=>{let F=Math.trunc(m.keyShift),k=m.keyShift-F;d[m.channel]=F,p[m.channel]=k}),A.iterate((m,F,k)=>{let G=A.tracks[F],x=k[F],J=()=>{G.deleteEvent(x),k[F]--},E=(H,K=0)=>{G.addEvent(H,x+K),k[F]++},ee=g[i[F]]||0;if(m.statusByte===R.midiPort){Q(F,m.data[0]);return}if(m.statusByte<=R.sequenceSpecific&&m.statusByte>=R.sequenceNumber)return;let Ae=m.statusByte&240,_=m.statusByte&15,V=_+ee;if(n.includes(V)){J();return}switch(Ae){case R.noteOn:if(l[V]){l[V]=!1,t.filter(K=>K.channel===V).forEach(K=>{let W=qA(_,K.controllerNumber,K.controllerValue,m.ticks);E(W)});let H=p[V];if(H!==0){let K=H*64+64,W=qA(_,S.registeredParameterMSB,0,m.ticks),le=qA(_,S.registeredParameterLSB,1,m.ticks),ge=qA(V,S.dataEntryMSB,K,m.ticks),O=qA(_,S.dataEntryLSB,0,m.ticks);E(O),E(ge),E(le),E(W)}if(a.has(V)){let K=e.find(b=>b.channel===V);if(!K)return;y(`%cSetting %c${K.channel}%c to %c${sA.toMIDIString(K)}%c. Track num: %c${F}`,h.info,h.recognized,h.info,h.recognized,h.info,h.recognized);let W=K.bankMSB,le=K.bankLSB,ge=K.program,O=new Xe(m.ticks,R.programChange|_,new Y([ge]));E(O);let D=(b,P)=>{let te=qA(_,b?S.bankSelectLSB:S.bankSelect,P,m.ticks);E(te)};fe.isSystemXG(o)&&K.isGMGSDrum&&(y(`%cAdding XG Drum change on track %c${F}`,h.recognized,h.value),W=fe.getDrumBank(o),le=0),D(!1,W),D(!0,le),K.isGMGSDrum&&!fe.isSystemXG(o)&&_!==lA&&(y(`%cAdding GS Drum change on track %c${F}`,h.recognized,h.value),E(ei(_,m.ticks)))}}m.data[0]+=d[V];break;case R.noteOff:m.data[0]+=d[V];break;case R.programChange:if(a.has(V)){J();return}break;case R.controllerChange:{let H=m.data[0];if(t.find(W=>W.channel===V&&H===W.controllerNumber)!==void 0){J();return}(H===S.bankSelect||H===S.bankSelectLSB)&&a.has(V)&&J()}break;case R.systemExclusive:if(_n(m))y("%cXG system on detected",h.info),o="xg",r=!0;else if(m.data[0]===67&&m.data[2]===76&&m.data[3]===8&&m.data[5]===3)a.has(m.data[4]+ee)&&J();else if(As(m))y("%cGM2 system on detected",h.info),o="gm2",r=!0;else if($n(m)){r=!0,y("%cGS on detected!",h.recognized);break}else es(m)&&(y("%cGM on detected, removing!",h.info),J(),r=!1)}}),!r&&e.length>0){let m=0;A.tracks[0].events[0].statusByte===R.trackName&&m++,A.tracks[0].addEvent(Xs(0),m),y("%cGS on not detected. Adding it.",h.info)}A.flush(),Z()}function ti(A,e){let t=[],n=[],s=[],a=[];e.channelSnapshots.forEach((o,r)=>{if(o.isMuted){n.push(r);return}let i=o.channelTransposeKeyShift+o.customControllers[oe.channelTransposeFine]/100;i!==0&&t.push({channel:r,keyShift:i}),o.lockPreset&&s.push({channel:r,...o.patch}),o.lockedControllers.forEach((g,c)=>{if(!g||c>127||c===S.bankSelect)return;let Q=o.midiControllers[c]>>7;a.push({channel:r,controllerNumber:c,controllerValue:Q})})}),A.modify(s,a,n,t)}var cn={XMFFileType:0,nodeName:1,nodeIDNumber:2,resourceFormat:3,filenameOnDisk:4,filenameExtensionOnDisk:5,macOSFileTypeAndCreator:6,mimeType:7,title:8,copyrightNotice:9,comment:10,autoStart:11,preload:12,contentDescription:13,ID3Metadata:14},OA={inLineResource:1,inFileResource:2,inFileNode:3,externalFile:4,externalXMF:5,XMFFileURIandNodeID:6},En={StandardMIDIFile:0,StandardMIDIFileType1:1,DLS1:2,DLS2:3,DLS22:4,mobileDLS:5,unknown:-1,folder:-2},ni={standard:0,MMA:1,registered:2,nonRegistered:3},Gt={none:0,MMAUnpacker:1,registered:2,nonRegistered:3},si=class zs{length;itemCount;metadataLength;metadata={};nodeData;innerNodes=[];packedContent=!1;nodeUnpackers=[];resourceFormat="unknown";referenceTypeID;constructor(e){let t=e.currentIndex;this.length=ue(e),this.itemCount=ue(e);let n=ue(e),s=e.currentIndex-t,a=n-s,o=e.slice(e.currentIndex,e.currentIndex+a);e.currentIndex+=a,this.metadataLength=ue(o);let r=o.slice(o.currentIndex,o.currentIndex+this.metadataLength);o.currentIndex+=this.metadataLength;let i,g;for(;r.currentIndex<r.length;){if(r[r.currentIndex]===0)r.currentIndex++,i=ue(r),Object.values(cn).includes(i)?g=Object.keys(cn).find(p=>cn[p]===i)??"":(y(`Unknown field specifier: ${i}`),g=`unknown_${i}`);else{let p=ue(r);i=Ce(r,p),g=i}let d=ue(r);if(d===0){let p=ue(r),m=r.slice(r.currentIndex,r.currentIndex+p);r.currentIndex+=p,ue(m)<4?this.metadata[g]=Ce(m,p-1):this.metadata[g]=m.slice(m.currentIndex)}else y(`International content: ${d}`),r.currentIndex+=ue(r)}let c=o.currentIndex,Q=ue(o),B=o.slice(o.currentIndex,c+Q);if(o.currentIndex=c+Q,Q>0)for(this.packedContent=!0;B.currentIndex<Q;){let l={};switch(l.id=ue(B),l.id){case Gt.nonRegistered:case Gt.registered:throw Z(),new Error(`Unsupported unpacker ID: ${l.id}`);default:throw Z(),new Error(`Unknown unpacker ID: ${l.id}`);case Gt.none:l.standardID=ue(B);break;case Gt.MMAUnpacker:{let d=B[B.currentIndex++];d===0&&(d<<=8,d|=B[B.currentIndex++],d<<=8,d|=B[B.currentIndex++]);let p=ue(B);l.manufacturerID=d,l.manufacturerInternalID=p}break}l.decodedSize=ue(B),this.nodeUnpackers.push(l)}switch(e.currentIndex=t+n,this.referenceTypeID=ue(e),this.nodeData=e.slice(e.currentIndex,t+this.length),e.currentIndex=t+this.length,this.referenceTypeID){case OA.inLineResource:break;case OA.externalXMF:case OA.inFileNode:case OA.XMFFileURIandNodeID:case OA.externalFile:case OA.inFileResource:throw Z(),new Error(`Unsupported reference type: ${this.referenceTypeID}`);default:throw Z(),new Error(`Unknown reference type: ${this.referenceTypeID}`)}if(this.isFile){if(this.packedContent){let d=this.nodeData.slice(2,this.nodeData.length);y(`%cPacked content. Attempting to deflate. Target size: %c${this.nodeUnpackers[0].decodedSize}`,h.warn,h.value);try{this.nodeData=new Y(Ys(d).buffer)}catch(p){if(Z(),p instanceof Error)throw new Error(`Error unpacking XMF file contents: ${p.message}.`)}}let l=this.metadata.resourceFormat;if(l===void 0)ne("No resource format for this file node!");else{l[0]!==ni.standard&&(y(`Non-standard formatTypeID: ${l.toString()}`),this.resourceFormat=l.toString());let p=l[1];Object.values(En).includes(p)?this.resourceFormat=Object.keys(En).find(m=>En[m]===p):y(`Unrecognized resource format: ${p}`)}}else for(this.resourceFormat="folder";this.nodeData.currentIndex<this.nodeData.length;){let l=this.nodeData.currentIndex,d=ue(this.nodeData),p=this.nodeData.slice(l,l+d);this.nodeData.currentIndex=l+d,this.innerNodes.push(new zs(p))}}get isFile(){return this.itemCount===0}};function ai(A,e){A.bankOffset=0;let t=Ce(e,4);if(t!=="XMF_")throw Z(),new SyntaxError(`Invalid XMF Header! Expected "_XMF", got "${t}"`);He("%cParsing XMF file...",h.info);let n=Ce(e,4);if(y(`%cXMF version: %c${n}`,h.info,h.recognized),n==="2.00"){let i=WA(e,4),g=WA(e,4);y(`%cFile Type ID: %c${i}%c, File Type Revision ID: %c${g}`,h.info,h.recognized,h.info,h.recognized)}ue(e);let s=ue(e);e.currentIndex+=s,e.currentIndex=ue(e);let a=new si(e),o,r=i=>{let g=(c,Q)=>{i.metadata[c]!==void 0&&typeof i.metadata[c]=="string"&&(A.rmidiInfo[Q]=aA(i.metadata[c]))};if(g("nodeName","name"),g("title","name"),g("copyrightNotice","copyright"),g("comment","comment"),i.isFile)switch(i.resourceFormat){default:return;case"DLS1":case"DLS2":case"DLS22":case"mobileDLS":y("%cFound embedded DLS!",h.recognized),A.embeddedSoundBank=i.nodeData.buffer;break;case"StandardMIDIFile":case"StandardMIDIFileType1":y("%cFound embedded MIDI!",h.recognized),o=i.nodeData;break}else for(let c of i.innerNodes)r(c)};if(r(a),Z(),!o)throw new Error("No MIDI data in the XMF file!");return o}var Ot=class _s{name="";port=0;channels=new Set;events=[];static copyFrom(e){let t=new _s;return t.copyFrom(e),t}copyFrom(e){this.name=e.name,this.port=e.port,this.channels=new Set(e.channels),this.events=e.events.map(t=>new Xe(t.ticks,t.statusByte,new Y(t.data)))}addEvent(e,t){this.events.splice(t,0,e)}deleteEvent(e){this.events.splice(e,1)}pushEvent(e){this.events.push(e)}};function ks(A,e,t){Ge("%cParsing MIDI File...",h.info),A.fileName=t;let n=new Y(e),s=n,a=g=>{let c=Ce(g,4),Q=WA(g,4),B=new Y(Q),l={type:c,size:Q,data:B},d=g.slice(g.currentIndex,g.currentIndex+l.size);return l.data.set(d,0),g.currentIndex+=l.size,l},o=nA(n,4);if(o==="RIFF"){n.currentIndex+=8;let g=Ce(n,4);if(g!=="RMID")throw Z(),new SyntaxError(`Invalid RMIDI Header! Expected "RMID", got "${g}"`);let c=ae(n);if(c.header!=="data")throw Z(),new SyntaxError(`Invalid RMIDI Chunk header! Expected "data", got "${g}"`);s=c.data;let Q=!1,B=!1;for(;n.currentIndex<=n.length;){let l=n.currentIndex,d=ae(n,!0);if(d.header==="RIFF"){let p=Ce(d.data,4).toLowerCase();p==="sfbk"||p==="sfpk"||p==="dls "?(y("%cFound embedded soundbank!",h.recognized),A.embeddedSoundBank=n.slice(l,l+d.size).buffer):ne(`Unknown RIFF chunk: "${p}"`),p==="dls "?A.isDLSRMIDI=!0:Q=!0}else if(d.header==="LIST"&&Ce(d.data,4)==="INFO")for(y("%cFound RMIDI INFO chunk!",h.recognized);d.data.currentIndex<=d.size;){let m=ae(d.data,!0),F=m.header,k=m.data;switch(F){default:ne(`Unknown RMIDI Info: ${F}`);break;case"INAM":A.rmidiInfo.name=k;break;case"IALB":case"IPRD":A.rmidiInfo.album=k;break;case"ICRT":case"ICRD":A.rmidiInfo.creationDate=k;break;case"IART":A.rmidiInfo.artist=k;break;case"IGNR":A.rmidiInfo.genre=k;break;case"IPIC":A.rmidiInfo.picture=k;break;case"ICOP":A.rmidiInfo.copyright=k;break;case"ICMT":A.rmidiInfo.comment=k;break;case"IENG":A.rmidiInfo.engineer=k;break;case"ISFT":A.rmidiInfo.software=k;break;case"ISBJ":A.rmidiInfo.subject=k;break;case"IENC":A.rmidiInfo.infoEncoding=k;break;case"MENC":A.rmidiInfo.midiEncoding=k;break;case"DBNK":A.bankOffset=Ks(k,2),B=!0;break}}}Q&&!B&&(A.bankOffset=1),A.isDLSRMIDI&&(A.bankOffset=0),A.embeddedSoundBank===void 0&&(A.bankOffset=0)}else o==="XMF_"?s=ai(A,n):s=n;let r=a(s);if(r.type!=="MThd")throw Z(),new SyntaxError(`Invalid MIDI Header! Expected "MThd", got "${r.type}"`);if(r.size!==6)throw Z(),new RangeError(`Invalid MIDI header chunk size! Expected 6, got ${r.size}`);A.format=WA(r.data,2);let i=WA(r.data,2);A.timeDivision=WA(r.data,2);for(let g=0;g<i;g++){let c=new Ot,Q=a(s);if(Q.type!=="MTrk")throw Z(),new SyntaxError(`Invalid track header! Expected "MTrk" got "${Q.type}"`);let B,l=0;for(A.format===2&&g>0&&(l+=A.tracks[g-1].events[A.tracks[g-1].events.length-1].ticks);Q.data.currentIndex<Q.size;){l+=ue(Q.data);let d=Q.data[Q.data.currentIndex],p;if(B!==void 0&&d<128)p=B;else{if(d<128)throw Z(),new SyntaxError(`Unexpected byte with no running byte. (${d})`);p=Q.data[Q.data.currentIndex++]}let m=xa(p),F;switch(m){case-1:F=0;break;case-2:p=Q.data[Q.data.currentIndex++],F=ue(Q.data);break;case-3:F=ue(Q.data);break;default:F=Va[p>>4],B=p;break}let k=new Y(F);k.set(Q.data.slice(Q.data.currentIndex,Q.data.currentIndex+F),0);let G=new Xe(l,p,k);c.pushEvent(G),Q.data.currentIndex+=F}A.tracks.push(c),y(`%cParsed %c${A.tracks.length}%c / %c${A.tracks.length}`,h.info,h.value,h.info,h.value)}y("%cAll tracks parsed correctly!",h.recognized),A.flush(!1),Z(),y(`%cMIDI file parsed. Total tick time: %c${A.lastVoiceEventTick}%c, total seconds time: %c${A.duration}`,h.info,h.recognized,h.info,h.recognized)}var ii=new Map([["domingo","Sunday"],["segunda-feira","Monday"],["ter\xE7a-feira","Tuesday"],["quarta-feira","Wednesday"],["quinta-feira","Thursday"],["sexta-feira","Friday"],["s\xE1bado","Saturday"],["janeiro","January"],["fevereiro","February"],["mar\xE7o","March"],["abril","April"],["maio","May"],["junho","June"],["julho","July"],["agosto","August"],["setembro","September"],["outubro","October"],["novembro","November"],["dezembro","December"]]),oi=[ii];function ri(A){for(let e of oi){let t=A;e.forEach((s,a)=>{let o=new RegExp(a,"gi");t=t.replace(o,s)});let n=new Date(t);if(!isNaN(n.getTime()))return n}}function Ii(A){let e=/^(\d{2})\.(\d{2})\.(\d{4})$/.exec(A);if(e){let t=parseInt(e[1]),n=parseInt(e[2])-1,s=parseInt(e[3]),a=new Date(s,n,t);if(!isNaN(a.getTime()))return a}}function gi(A){let e=/^(\d{1,2})\s{1,2}(\d{1,2})\s{1,2}(\d{2})$/.exec(A);if(e){let t=e[1],n=(parseInt(e[2])+1).toString(),s=e[3],a=new Date(`${n}/${t}/${s}`);if(!isNaN(a.getTime()))return a}}function hi(A){let t=/\b\d{4}\b/.exec(A);return t?new Date(t[0]):void 0}function ts(A){if(A=A.trim(),A.length<1)return new Date;let e=A.replace(/\b(\d+)(st|nd|rd|th)\b/g,"$1"),t=new Date(e);if(isNaN(t.getTime())){let n=ri(A);if(n)return n;let s=Ii(A);if(s)return s;let a=gi(A);if(a)return a;let o=hi(A);return o||(ne(`Invalid date: "${A}". Replacing with the current date!`),new Date)}return t}var CA=class vt{tracks=[];timeDivision=0;duration=0;tempoChanges=[{ticks:0,tempo:120}];extraMetadata=[];lyrics=[];firstNoteOn=0;keyRange={min:0,max:127};lastVoiceEventTick=0;portChannelOffsetMap=[0];loop={start:0,end:0};fileName;format=0;rmidiInfo={};bankOffset=0;isKaraokeFile=!1;isMultiPort=!1;isDLSRMIDI=!1;embeddedSoundBank;binaryName;get infoEncoding(){let e=this.rmidiInfo.infoEncoding;if(!e)return;let t=e.byteLength;return e[e.byteLength-1]===0&&t--,nA(e,t)}static fromArrayBuffer(e,t=""){let n=new vt;return ks(n,e,t),n}static async fromFile(e){let t=new vt;return ks(t,await e.arrayBuffer(),e.name),t}static copyFrom(e){let t=new vt;return t.copyFrom(e),t}copyFrom(e){this.copyMetadataFrom(e),this.embeddedSoundBank=e?.embeddedSoundBank?.slice(0)??void 0,this.tracks=e.tracks.map(t=>Ot.copyFrom(t))}midiTicksToSeconds(e){let t=0;for(;e>0;){let n=this.tempoChanges.find(a=>a.ticks<e);if(!n)return t;let s=e-n.ticks;t+=s*60/(n.tempo*this.timeDivision),e-=s}return t}getUsedProgramsAndKeys(e){return _a(this,e)}flush(e=!0){if(e)for(let t of this.tracks)t.events.sort((n,s)=>n.ticks-s.ticks);this.parseInternal()}getNoteTimes(e=0){return $a(this,e)}writeMIDI(){return Ya(this)}writeRMIDI(e,t=ys){return za(this,e,jn(t,ys))}modify(e=[],t=[],n=[],s=[]){Ai(this,e,t,n,s)}applySnapshot(e){ti(this,e)}getName(e="Shift_JIS"){let t="",n=this.getRMIDInfo("name");if(n)return n.trim();if(this.binaryName){e=this.getRMIDInfo("midiEncoding")??e;try{t=new TextDecoder(e).decode(this.binaryName).trim()}catch(s){ne(`Failed to decode MIDI name: ${s}`)}}return t||this.fileName}getExtraMetadata(e="Shift_JIS"){e=this.infoEncoding??e;let t=new TextDecoder(e);return this.extraMetadata.map(n=>t.decode(n.data).replace(/@T|@A/g,"").trim())}setRMIDInfo(e,t){if(this.rmidiInfo.infoEncoding=aA("utf-8",!0),e==="picture")this.rmidiInfo.picture=new Uint8Array(t);else if(e==="creationDate")this.rmidiInfo.creationDate=aA(t.toISOString(),!0);else{let n=new TextEncoder().encode(t);this.rmidiInfo[e]=new Uint8Array([...n,0])}}getRMIDInfo(e){if(!this.rmidiInfo[e])return;let t=this.infoEncoding??"UTF-8";if(e==="picture")return this.rmidiInfo[e].buffer;if(e==="creationDate")return ts(nA(this.rmidiInfo[e]));try{let n=new TextDecoder(t),s=this.rmidiInfo[e];return s[s.length-1]===0&&(s=s?.slice(0,s.length-1)),n.decode(s.buffer).trim()}catch(n){ne(`Failed to decode ${e} name: ${n}`);return}}iterate(e){let t=Array(this.tracks.length).fill(0),n=this.tracks.length,s=()=>{let a=0,o=1/0;return this.tracks.forEach(({events:r},i)=>{t[i]>=r.length||r[t[i]].ticks<o&&(a=i,o=r[t[i]].ticks)}),a};for(;n>0;){let a=s(),o=this.tracks[a].events;if(t[a]>=o.length){n--;continue}let r=o[t[a]];e(r,a,t),t[a]++}}copyMetadataFrom(e){this.fileName=e.fileName,this.timeDivision=e.timeDivision,this.duration=e.duration,this.firstNoteOn=e.firstNoteOn,this.lastVoiceEventTick=e.lastVoiceEventTick,this.format=e.format,this.bankOffset=e.bankOffset,this.isKaraokeFile=e.isKaraokeFile,this.isMultiPort=e.isMultiPort,this.isDLSRMIDI=e.isDLSRMIDI,this.isDLSRMIDI=e.isDLSRMIDI,this.tempoChanges=[...e.tempoChanges],this.extraMetadata=e.extraMetadata.map(t=>new Xe(t.ticks,t.statusByte,new Y(t.data))),this.lyrics=e.lyrics.map(t=>new Xe(t.ticks,t.statusByte,new Y(t.data))),this.portChannelOffsetMap=[...e.portChannelOffsetMap],this.binaryName=e?.binaryName?.slice(),this.loop={...e.loop},this.keyRange={...e.keyRange},this.rmidiInfo={},Object.entries(e.rmidiInfo).forEach(t=>{let n=t[0],s=t[1];this.rmidiInfo[n]=s.slice()})}parseInternal(){He("%cInterpreting MIDI events...",h.info);let e=!1;this.keyRange={max:0,min:127},this.extraMetadata=[];let t=!1;typeof this.rmidiInfo.name<"u"&&(t=!0);let n=null,s=null;for(let i of this.tracks){let g=new Set,c=!1;for(let B=0;B<i.events.length;B++){let l=i.events[B];if(l.statusByte>=128&&l.statusByte<240){c=!0;for(let p=0;p<l.data.length;p++)l.data[p]=Math.min(127,l.data[p]);switch(l.ticks>this.lastVoiceEventTick&&(this.lastVoiceEventTick=l.ticks),l.statusByte&240){case R.controllerChange:switch(l.data[0]){case 2:case 116:n=l.ticks;break;case 4:case 117:s===null?s=l.ticks:s=0;break;case 0:this.isDLSRMIDI&&l.data[1]!==0&&l.data[1]!==127&&(y("%cDLS RMIDI with offset 1 detected!",h.recognized),this.bankOffset=1)}break;case R.noteOn:{g.add(l.statusByte&15);let p=l.data[0];this.keyRange.min=Math.min(this.keyRange.min,p),this.keyRange.max=Math.max(this.keyRange.max,p);break}}}let d=nA(l.data);switch(l.statusByte){case R.endOfTrack:B!==i.events.length-1&&(i.deleteEvent(B),B--,ne("Unexpected EndOfTrack. Removing!"));break;case R.setTempo:this.tempoChanges.push({ticks:l.ticks,tempo:6e7/ut(l.data,3)});break;case R.marker:switch(d.trim().toLowerCase()){default:break;case"start":case"loopstart":n=l.ticks;break;case"loopend":s=l.ticks}break;case R.copyright:this.extraMetadata.push(l);break;case R.lyric:d.trim().startsWith("@KMIDI KARAOKE FILE")&&(this.isKaraokeFile=!0,y("%cKaraoke MIDI detected!",h.recognized)),this.isKaraokeFile?l.statusByte=R.text:this.lyrics.push(l);case R.text:{let p=d.trim();p.startsWith("@KMIDI KARAOKE FILE")?(this.isKaraokeFile=!0,y("%cKaraoke MIDI detected!",h.recognized)):this.isKaraokeFile&&(p.startsWith("@T")||p.startsWith("@A")?e?this.extraMetadata.push(l):(this.binaryName=l.data.slice(2),e=!0,t=!0):p.startsWith("@")||this.lyrics.push(l));break}}}i.channels=g,i.name="";let Q=i.events.find(B=>B.statusByte===R.trackName);Q&&this.tracks.indexOf(i)>0&&(i.name=nA(Q.data),!c&&!i.name.toLowerCase().includes("setup")&&this.extraMetadata.push(Q))}this.tempoChanges.reverse(),y("%cCorrecting loops, ports and detecting notes...",h.info);let a=[];for(let i of this.tracks){let g=i.events.find(c=>(c.statusByte&240)===R.noteOn);g&&a.push(g.ticks)}this.firstNoteOn=Math.min(...a),y(`%cFirst note-on detected at: %c${this.firstNoteOn}%c ticks!`,h.info,h.recognized,h.info),n!==null&&s===null?(n=this.firstNoteOn,s=this.lastVoiceEventTick):(n??=this.firstNoteOn,(s===null||s===0)&&(s=this.lastVoiceEventTick)),this.loop={start:n,end:s},y(`%cLoop points: start: %c${this.loop.start}%c end: %c${this.loop.end}`,h.info,h.recognized,h.info,h.recognized);let o=0;this.portChannelOffsetMap=[];for(let i of this.tracks)if(i.port=-1,i.channels.size!==0)for(let g of i.events){if(g.statusByte!==R.midiPort)continue;let c=g.data[0];i.port=c,this.portChannelOffsetMap[c]===void 0&&(this.portChannelOffsetMap[c]=o,o+=16)}this.portChannelOffsetMap=[...this.portChannelOffsetMap].map(i=>i??0);let r=1/0;for(let i of this.tracks)i.port!==-1&&r>i.port&&(r=i.port);r===1/0&&(r=0);for(let i of this.tracks)(i.port===-1||i.port===void 0)&&(i.port=r);if(this.portChannelOffsetMap.length===0&&(this.portChannelOffsetMap=[0]),this.portChannelOffsetMap.length<2?y("%cNo additional MIDI Ports detected.",h.info):(this.isMultiPort=!0,y("%cMIDI Ports detected!",h.recognized)),!t)if(this.tracks.length>1){if(this.tracks[0].events.find(i=>i.statusByte>=R.noteOn&&i.statusByte<R.polyPressure)===void 0){let i=this.tracks[0].events.find(g=>g.statusByte===R.trackName);i&&(this.binaryName=i.data)}}else{let i=this.tracks[0].events.find(g=>g.statusByte===R.trackName);i&&(this.binaryName=i.data)}if(this.extraMetadata=this.extraMetadata.filter(i=>i.data.length>0),this.lyrics.sort((i,g)=>i.ticks-g.ticks),!this.tracks.some(i=>i.events[0].ticks===0)){let i=this.tracks[0],g=this?.binaryName?.buffer;g||(g=new Uint8Array(0).buffer),i.events.unshift(new Xe(0,R.trackName,new Y(g)))}this.duration=this.midiTicksToSeconds(this.lastVoiceEventTick),this.binaryName&&this.binaryName.length<1&&(this.binaryName=void 0),y("%cSuccess!",h.recognized),Z()}};function ci(A,e){if(this.externalMIDIPlayback&&A.statusByte>=128){this.sendMIDIMessage([A.statusByte,...A.data]);return}let t=this._midiData.tracks[e],n=zn(A.statusByte),s=this.midiPortChannelOffsets[this.currentMIDIPorts[e]]||0;switch(n.channel+=s,n.status){case R.noteOn:{let a=A.data[1];if(a>0)this.synth.noteOn(n.channel,A.data[0],a),this.playingNotes.push({midiNote:A.data[0],channel:n.channel,velocity:a});else{this.synth.noteOff(n.channel,A.data[0]);let o=this.playingNotes.findIndex(r=>r.midiNote===A.data[0]&&r.channel===n.channel);o!==-1&&this.playingNotes.splice(o,1)}break}case R.noteOff:{this.synth.noteOff(n.channel,A.data[0]);let a=this.playingNotes.findIndex(o=>o.midiNote===A.data[0]&&o.channel===n.channel);a!==-1&&this.playingNotes.splice(a,1);break}case R.pitchWheel:this.synth.pitchWheel(n.channel,A.data[1]<<7|A.data[0]);break;case R.controllerChange:if(this._midiData.isMultiPort&&t.channels.size===0)return;this.synth.controllerChange(n.channel,A.data[0],A.data[1]);break;case R.programChange:if(this._midiData.isMultiPort&&t.channels.size===0)return;this.synth.programChange(n.channel,A.data[0]);break;case R.polyPressure:this.synth.polyPressure(n.channel,A.data[0],A.data[1]);break;case R.channelPressure:this.synth.channelPressure(n.channel,A.data[0]);break;case R.systemExclusive:this.synth.systemExclusive(A.data,s);break;case R.setTempo:{let a=6e7/ut(A.data,3);this.oneTickToSeconds=60/(a*this._midiData.timeDivision),this.oneTickToSeconds===0&&(this.oneTickToSeconds=60/(120*this._midiData.timeDivision),y("invalid tempo! falling back to 120 BPM"),a=120);break}case R.timeSignature:case R.endOfTrack:case R.midiChannelPrefix:case R.songPosition:case R.activeSensing:case R.keySignature:case R.sequenceNumber:case R.sequenceSpecific:case R.text:case R.lyric:case R.copyright:case R.trackName:case R.marker:case R.cuePoint:case R.instrumentName:case R.programName:break;case R.midiPort:this.assignMIDIPort(e,A.data[0]);break;case R.reset:this.synth.stopAllChannels(),this.synth.resetAllControllers();break;default:y(`%cUnrecognized Event: %c${A.statusByte}%c status byte: %c${Object.keys(R).find(a=>R[a]===n.status)}`,h.warn,h.unrecognized,h.warn,h.value);break}n.status>=0&&n.status<128&&this.callEvent("metaEvent",{event:A,trackIndex:e})}function Ei(){if(this.paused||!this._midiData)return;let A=this.currentTime;for(;this.playedTime<A;){let e=this.findFirstEventIndex(),n=this._midiData.tracks[e].events[this.eventIndexes[e]++];this.processEvent(n,e);let s=this.findFirstEventIndex(),a=this._midiData.tracks[s];if(this.loopCount>0&&this._midiData.loop.end<=n.ticks){this.loopCount!==1/0&&(this.loopCount--,this.callEvent("loopCountChange",{newCount:this.loopCount})),this.setTimeTicks(this._midiData.loop.start);return}if(a.events.length<=this.eventIndexes[s]){this.songIsFinished();return}let o=a.events[this.eventIndexes[s]];this.playedTime+=this.oneTickToSeconds*(o.ticks-n.ticks)}}function li(A,e){this._midiData.tracks[A].channels.size!==0&&(this.midiPortChannelOffset===0&&(this.midiPortChannelOffset+=16,this.midiPortChannelOffsets[e]=0),this.midiPortChannelOffsets[e]===void 0&&(this.synth.midiChannels.length<this.midiPortChannelOffset+15&&this.addNewMIDIPort(),this.midiPortChannelOffsets[e]=this.midiPortChannelOffset,this.midiPortChannelOffset+=16),this.currentMIDIPorts[A]=e)}function Ci(A){if(!A.tracks)throw new Error("This MIDI has no tracks!");this.oneTickToSeconds=60/(120*A.timeDivision),this._midiData=A,this.synth.clearEmbeddedBank(),this._midiData.embeddedSoundBank!==void 0&&(y("%cEmbedded soundbank detected! Using it.",h.recognized),this.synth.setEmbeddedSoundBank(this._midiData.embeddedSoundBank,this._midiData.bankOffset)),Ge("%cPreloading samples...",h.info),this._midiData.getUsedProgramsAndKeys(this.synth.soundBankManager).forEach((t,n)=>{y(`%cPreloading used samples on %c${n.name}%c...`,h.info,h.recognized,h.info);for(let s of t){let[a,o]=s.split("-").map(Number);this.synth.getVoicesForPreset(n,a,o,a)}}),Z(),this.currentMIDIPorts=this._midiData.tracks.map(t=>t.port),this.midiPortChannelOffset=0,this.midiPortChannelOffsets={},this._midiData.tracks.forEach((t,n)=>{this.assignMIDIPort(n,t.port)}),this.firstNoteTime=this._midiData.midiTicksToSeconds(this._midiData.firstNoteOn),y(`%cTotal song time: ${ps(Math.ceil(this._midiData.duration)).time}`,h.recognized),this.callEvent("songChange",{songIndex:this._songIndex}),this._midiData.duration<=.2&&(ne(`%cVery short song: (${ps(Math.round(this._midiData.duration)).time}). Disabling loop!`,h.warn),this.loopCount=0),this.currentTime=0}var I={INVALID:-1,startAddrsOffset:0,endAddrOffset:1,startloopAddrsOffset:2,endloopAddrsOffset:3,startAddrsCoarseOffset:4,modLfoToPitch:5,vibLfoToPitch:6,modEnvToPitch:7,initialFilterFc:8,initialFilterQ:9,modLfoToFilterFc:10,modEnvToFilterFc:11,endAddrsCoarseOffset:12,modLfoToVolume:13,unused1:14,chorusEffectsSend:15,reverbEffectsSend:16,pan:17,unused2:18,unused3:19,unused4:20,delayModLFO:21,freqModLFO:22,delayVibLFO:23,freqVibLFO:24,delayModEnv:25,attackModEnv:26,holdModEnv:27,decayModEnv:28,sustainModEnv:29,releaseModEnv:30,keyNumToModEnvHold:31,keyNumToModEnvDecay:32,delayVolEnv:33,attackVolEnv:34,holdVolEnv:35,decayVolEnv:36,sustainVolEnv:37,releaseVolEnv:38,keyNumToVolEnvHold:39,keyNumToVolEnvDecay:40,instrument:41,reserved1:42,keyRange:43,velRange:44,startloopAddrsCoarseOffset:45,keyNum:46,velocity:47,initialAttenuation:48,reserved2:49,endloopAddrsCoarseOffset:50,coarseTune:51,fineTune:52,sampleID:53,sampleModes:54,reserved3:55,scaleTuning:56,exclusiveClass:57,overridingRootKey:58,unused5:59,endOper:60,vibLfoToVolume:61,vibLfoToFilterFc:62},wn=Object.keys(I).length,Bi=Math.max(...Object.values(I)),T=[];T[I.startAddrsOffset]={min:0,max:32768,def:0,nrpn:1};T[I.endAddrOffset]={min:-32768,max:32768,def:0,nrpn:1};T[I.startloopAddrsOffset]={min:-32768,max:32768,def:0,nrpn:1};T[I.endloopAddrsOffset]={min:-32768,max:32768,def:0,nrpn:1};T[I.startAddrsCoarseOffset]={min:0,max:32768,def:0,nrpn:1};T[I.modLfoToPitch]={min:-12e3,max:12e3,def:0,nrpn:2};T[I.vibLfoToPitch]={min:-12e3,max:12e3,def:0,nrpn:2};T[I.modEnvToPitch]={min:-12e3,max:12e3,def:0,nrpn:2};T[I.initialFilterFc]={min:1500,max:13500,def:13500,nrpn:2};T[I.initialFilterQ]={min:0,max:960,def:0,nrpn:1};T[I.modLfoToFilterFc]={min:-12e3,max:12e3,def:0,nrpn:2};T[I.vibLfoToFilterFc]={min:-12e3,max:12e3,def:0,nrpn:2};T[I.modEnvToFilterFc]={min:-12e3,max:12e3,def:0,nrpn:2};T[I.endAddrsCoarseOffset]={min:-32768,max:32768,def:0,nrpn:1};T[I.modLfoToVolume]={min:-960,max:960,def:0,nrpn:1};T[I.vibLfoToVolume]={min:-960,max:960,def:0,nrpn:1};T[I.chorusEffectsSend]={min:0,max:1e3,def:0,nrpn:1};T[I.reverbEffectsSend]={min:0,max:1e3,def:0,nrpn:1};T[I.pan]={min:-500,max:500,def:0,nrpn:1};T[I.delayModLFO]={min:-12e3,max:5e3,def:-12e3,nrpn:2};T[I.freqModLFO]={min:-16e3,max:4500,def:0,nrpn:4};T[I.delayVibLFO]={min:-12e3,max:5e3,def:-12e3,nrpn:2};T[I.freqVibLFO]={min:-16e3,max:4500,def:0,nrpn:4};T[I.delayModEnv]={min:-32768,max:5e3,def:-32768,nrpn:2};T[I.attackModEnv]={min:-32768,max:8e3,def:-32768,nrpn:2};T[I.holdModEnv]={min:-12e3,max:5e3,def:-12e3,nrpn:2};T[I.decayModEnv]={min:-12e3,max:8e3,def:-12e3,nrpn:2};T[I.sustainModEnv]={min:0,max:1e3,def:0,nrpn:1};T[I.releaseModEnv]={min:-12e3,max:8e3,def:-12e3,nrpn:2};T[I.keyNumToModEnvHold]={min:-1200,max:1200,def:0,nrpn:1};T[I.keyNumToModEnvDecay]={min:-1200,max:1200,def:0,nrpn:1};T[I.delayVolEnv]={min:-12e3,max:5e3,def:-12e3,nrpn:2};T[I.attackVolEnv]={min:-12e3,max:8e3,def:-12e3,nrpn:2};T[I.holdVolEnv]={min:-12e3,max:5e3,def:-12e3,nrpn:2};T[I.decayVolEnv]={min:-12e3,max:8e3,def:-12e3,nrpn:2};T[I.sustainVolEnv]={min:0,max:1440,def:0,nrpn:1};T[I.releaseVolEnv]={min:-12e3,max:8e3,def:-12e3,nrpn:2};T[I.keyNumToVolEnvHold]={min:-1200,max:1200,def:0,nrpn:1};T[I.keyNumToVolEnvDecay]={min:-1200,max:1200,def:0,nrpn:1};T[I.startloopAddrsCoarseOffset]={min:-32768,max:32768,def:0,nrpn:1};T[I.keyNum]={min:-1,max:127,def:-1,nrpn:1};T[I.velocity]={min:-1,max:127,def:-1,nrpn:1};T[I.initialAttenuation]={min:0,max:1440,def:0,nrpn:1};T[I.endloopAddrsCoarseOffset]={min:-32768,max:32768,def:0,nrpn:1};T[I.coarseTune]={min:-120,max:120,def:0,nrpn:1};T[I.fineTune]={min:-12700,max:12700,def:0,nrpn:1};T[I.scaleTuning]={min:0,max:1200,def:100,nrpn:1};T[I.exclusiveClass]={min:0,max:99999,def:0,nrpn:0};T[I.overridingRootKey]={min:-1,max:127,def:-1,nrpn:0};T[I.sampleModes]={min:0,max:3,def:0,nrpn:0};var we={monoSample:1,rightSample:2,leftSample:4,linkedSample:8,romMonoSample:32769,romRightSample:32770,romLeftSample:32772,romLinkedSample:32776},z={noController:0,noteOnVelocity:2,noteOnKeyNum:3,polyPressure:10,channelPressure:13,pitchWheel:14,pitchWheelRange:16,link:127},Qe={linear:0,concave:1,convex:2,switch:3};var U={none:0,modLfo:1,velocity:2,keyNum:3,volEnv:4,modEnv:5,pitchWheel:6,polyPressure:7,channelPressure:8,vibratoLfo:9,modulationWheel:129,volume:135,pan:138,expression:139,chorus:221,reverb:219,pitchWheelRange:256,fineTune:257,coarseTune:258},M={none:0,gain:1,reserved:2,pitch:3,pan:4,keyNum:5,chorusSend:128,reverbSend:129,modLfoFreq:260,modLfoDelay:261,vibLfoFreq:276,vibLfoDelay:277,volEnvAttack:518,volEnvDecay:519,reservedEG1:520,volEnvRelease:521,volEnvSustain:522,volEnvDelay:523,volEnvHold:524,modEnvAttack:778,modEnvDecay:779,reservedEG2:780,modEnvRelease:781,modEnvSustain:782,modEnvDelay:783,modEnvHold:784,filterCutoff:1280,filterQ:1281},Fs={forward:0,loopAndRelease:1},me=128,Rn=147,jA=new Int16Array(Rn).fill(0),pe=(A,e)=>jA[A]=e<<7;pe(S.mainVolume,100);pe(S.balance,64);pe(S.expressionController,127);pe(S.pan,64);pe(S.portamentoOnOff,127);pe(S.filterResonance,64);pe(S.releaseTime,64);pe(S.attackTime,64);pe(S.brightness,64);pe(S.decayTime,64);pe(S.vibratoRate,64);pe(S.vibratoDepth,64);pe(S.vibratoDelay,64);pe(S.generalPurposeController6,64);pe(S.generalPurposeController8,64);pe(S.registeredParameterLSB,127);pe(S.registeredParameterMSB,127);pe(S.nonRegisteredParameterLSB,127);pe(S.nonRegisteredParameterMSB,127);var ns=1;jA[S.portamentoControl]=ns;pe(me+z.pitchWheel,64);pe(me+z.pitchWheelRange,2);var $s=Object.keys(oe).length,ea=new Float32Array($s);ea[oe.modulationMultiplier]=1;function di(A=!0){if(A&&y("%cResetting all controllers!",h.info),this.privateProps.callEvent("allControllerReset",void 0),this.setMasterParameter("midiSystem",Hs),!(!this.privateProps.drumPreset||!this.privateProps.defaultPreset)){for(let e=0;e<this.midiChannels.length;e++){let t=this.midiChannels[e];t.resetControllers(!1),t.resetPreset();for(let n=0;n<128;n++)this.midiChannels[e].lockedControllers[n]&&this.privateProps.callEvent("controllerChange",{channel:e,controllerNumber:n,controllerValue:this.midiChannels[e].midiControllers[n]>>7});if(!this.midiChannels[e].lockedControllers[me+z.pitchWheel]){let n=this.midiChannels[e].midiControllers[me+z.pitchWheel];this.privateProps.callEvent("pitchWheel",{channel:e,pitch:n})}if(!this.midiChannels[e].lockedControllers[me+z.channelPressure]){let n=this.midiChannels[e].midiControllers[me+z.channelPressure]>>7;this.privateProps.callEvent("channelPressure",{channel:e,pressure:n})}}this.privateProps.tunings.length=0,this.privateProps.tunings.length=0;for(let e=0;e<128;e++)this.privateProps.tunings.push([]);this.setMIDIVolume(1)}}function Qi(A=!0){this.channelOctaveTuning.fill(0);for(let t=0;t<jA.length;t++){if(this.lockedControllers[t])continue;let n=jA[t];this.midiControllers[t]!==n&&t<127?t===S.portamentoControl?this.midiControllers[t]=ns:t!==S.portamentoControl&&t!==S.dataEntryMSB&&t!==S.registeredParameterMSB&&t!==S.registeredParameterLSB&&t!==S.nonRegisteredParameterMSB&&t!==S.nonRegisteredParameterLSB&&this.controllerChange(t,n>>7,A):this.midiControllers[t]=n}this.channelVibrato={rate:0,depth:0,delay:0},this.randomPan=!1,this.sysExModulators.resetModulators();let e=this.customControllers[oe.channelTransposeFine];this.customControllers.set(ea),this.setCustomController(oe.channelTransposeFine,e),this.resetParameters()}function ui(){this.setBankMSB(fe.getDefaultBank(this.channelSystem)),this.setBankLSB(0),this.setGSDrums(!1),this.setDrums(this.channelNumber%16===lA),this.programChange(0)}var Aa=new Set([S.bankSelect,S.bankSelectLSB,S.mainVolume,S.mainVolumeLSB,S.pan,S.panLSB,S.reverbDepth,S.tremoloDepth,S.chorusDepth,S.detuneDepth,S.phaserDepth,S.soundVariation,S.filterResonance,S.releaseTime,S.attackTime,S.brightness,S.decayTime,S.vibratoRate,S.vibratoDepth,S.vibratoDelay,S.soundController10]);function fi(){this.channelOctaveTuning.fill(0),this.pitchWheel(8192),this.channelVibrato={rate:0,depth:0,delay:0};for(let A=0;A<128;A++){let e=jA[A];!Aa.has(A)&&e!==this.midiControllers[A]&&(A===S.portamentoControl?this.midiControllers[A]=ns:this.controllerChange(A,e>>7))}this.resetGeneratorOverrides(),this.resetGeneratorOffsets()}function mi(){this.dataEntryState=Ve.Idle,this.midiControllers[S.nonRegisteredParameterLSB]=16256,this.midiControllers[S.nonRegisteredParameterMSB]=16256,this.midiControllers[S.registeredParameterLSB]=16256,this.midiControllers[S.registeredParameterMSB]=16256,this.resetGeneratorOverrides(),this.resetGeneratorOffsets()}var MA=jA.slice(0,128);function pi(A,e=void 0){if(!this._midiData)return!1;this.oneTickToSeconds=60/(120*this._midiData.timeDivision),this.externalMIDIPlayback?this.sendMIDIReset():(this.synth.resetAllControllers(),this.synth.stopAllChannels(!1)),this.playedTime=0,this.eventIndexes=Array(this._midiData.tracks.length).fill(0);let t=this.synth.midiChannels.length,n=Array(t).fill(8192),s=[];for(let i=0;i<t;i++)s.push({program:-1,bank:0,actualBank:0});let a=i=>i===S.dataDecrement||i===S.dataIncrement||i===S.dataEntryMSB||i===S.dataEntryLSB||i===S.registeredParameterLSB||i===S.registeredParameterMSB||i===S.nonRegisteredParameterLSB||i===S.nonRegisteredParameterMSB||i===S.bankSelect||i===S.bankSelectLSB||i===S.resetAllControllers,o=[];for(let i=0;i<t;i++)o.push(Array.from(MA));function r(i){if(n[i]=8192,o?.[i]!==void 0)for(let g=0;g<MA.length;g++)Aa.has(g)||(o[i][g]=MA[g])}for(;;){let i=this.findFirstEventIndex(),g=this._midiData.tracks[i],c=g.events[this.eventIndexes[i]];if(e!==void 0){if(c.ticks>=e)break}else if(this.playedTime>=A)break;let Q=zn(c.statusByte),B=Q.channel+(this.midiPortChannelOffsets[g.port]||0);switch(Q.status){case R.noteOn:o[B]??=Array.from(MA),o[B][S.portamentoControl]=c.data[0];break;case R.noteOff:break;case R.pitchWheel:n[B]=c.data[1]<<7|c.data[0];break;case R.programChange:{if(this._midiData.isMultiPort&&g.channels.size===0)break;let d=s[B];d.program=c.data[0],d.actualBank=d.bank;break}case R.controllerChange:{if(this._midiData.isMultiPort&&g.channels.size===0)break;let d=c.data[0];if(a(d)){let p=c.data[1];if(d===S.bankSelect){s[B].bank=p;break}else d===S.resetAllControllers&&r(B);this.externalMIDIPlayback?this.sendMIDICC(B,d,p):this.synth.controllerChange(B,d,p)}else o[B]??=Array.from(MA),o[B][d]=c.data[1];break}default:this.processEvent(c,i);break}this.eventIndexes[i]++,i=this.findFirstEventIndex();let l=this._midiData.tracks[i].events[this.eventIndexes[i]];if(l===void 0)return this.stop(),!1;this.playedTime+=this.oneTickToSeconds*(l.ticks-c.ticks)}if(this.externalMIDIPlayback){for(let i=0;i<t;i++)if(n[i]!==void 0&&this.sendMIDIPitchWheel(i,n[i]>>7,n[i]&127),o[i]!==void 0&&o[i].forEach((g,c)=>{g!==MA[c]&&!a(c)&&this.sendMIDICC(i,c,g)}),s[i].program>=0&&s[i].actualBank>=0){let g=s[i].actualBank;this.sendMIDICC(i,S.bankSelect,g),this.sendMIDIProgramChange(i,s[i].program)}}else for(let i=0;i<t;i++)if(n[i]!==void 0&&this.synth.pitchWheel(i,n[i]),o[i]!==void 0&&o[i].forEach((g,c)=>{g!==MA[c]&&!a(c)&&this.synth.controllerChange(i,c,g)}),s[i].actualBank>=0){let g=s[i];g.program!==-1?(this.synth.controllerChange(i,S.bankSelect,g.actualBank),this.synth.programChange(i,g.program)):this.synth.controllerChange(i,S.bankSelect,g.bank)}return this.paused&&(this.pausedTime=this.playedTime),!0}var ss=class{songs=[];shuffledSongIndexes=[];synth;externalMIDIPlayback=!1;loopCount=0;skipToFirstNoteOn=!0;onEventCall;processTick=Ei.bind(this);firstNoteTime=0;oneTickToSeconds=0;eventIndexes=[];playedTime=0;pausedTime=-1;absoluteStartTime=0;playingNotes=[];currentMIDIPorts=[];midiPortChannelOffset=0;midiPortChannelOffsets={};assignMIDIPort=li.bind(this);loadNewSequence=Ci.bind(this);processEvent=ci.bind(this);setTimeTo=pi.bind(this);constructor(A){this.synth=A,this.absoluteStartTime=this.synth.currentSynthTime}_midiData;get midiData(){return this._midiData}get duration(){return this._midiData?.duration??0}_songIndex=0;get songIndex(){return this._songIndex}set songIndex(A){this._songIndex=A,this._songIndex=Math.max(0,A%this.songs.length),this.loadCurrentSong()}_shuffleMode=!1;get shuffleMode(){return this._shuffleMode}set shuffleMode(A){this._shuffleMode=A,A?(this.shuffleSongIndexes(),this._songIndex=0,this.loadCurrentSong()):this._songIndex=this.shuffledSongIndexes[this._songIndex]}_playbackRate=1;get playbackRate(){return this._playbackRate}set playbackRate(A){let e=this.currentTime;this._playbackRate=A,this.currentTime=e}get currentTime(){return this.pausedTime!==void 0?this.pausedTime:(this.synth.currentSynthTime-this.absoluteStartTime)*this._playbackRate}set currentTime(A){if(this._midiData)if(this.paused&&(this.pausedTime=A),A>this._midiData.duration||A<0)this.skipToFirstNoteOn?this.setTimeTicks(this._midiData.firstNoteOn-1):this.setTimeTicks(0);else if(this.skipToFirstNoteOn&&A<this.firstNoteTime){this.setTimeTicks(this._midiData.firstNoteOn-1);return}else{if(this.playingNotes=[],this.callEvent("timeChange",{newTime:A}),this._midiData.duration===0){ne("No duration!"),this.callEvent("pause",{isFinished:!0});return}this.setTimeTo(A),this.recalculateStartTime(A)}}get paused(){return this.pausedTime!==void 0}play(){if(!this._midiData)throw new Error("No songs loaded in the sequencer!");this.currentTime>=this._midiData.duration&&(this.currentTime=0),this.paused&&this.recalculateStartTime(this.pausedTime??0),this.externalMIDIPlayback||this.playingNotes.forEach(A=>{this.synth.noteOn(A.channel,A.midiNote,A.velocity)}),this.pausedTime=void 0}pause(){this.pauseInternal(!1)}loadNewSongList(A){this.songs=A,!(this.songs.length<1)&&(this._songIndex=0,this.shuffleSongIndexes(),this.callEvent("songListChange",{newSongList:[...this.songs]}),this.loadCurrentSong())}callEvent(A,e){this?.onEventCall?.({type:A,data:e})}pauseInternal(A){this.paused||(this.stop(),this.callEvent("pause",{isFinished:A}))}songIsFinished(){if(this.songs.length===1){this.pauseInternal(!0);return}this._songIndex++,this._songIndex%=this.songs.length,this.loadCurrentSong()}stop(){this.pausedTime=this.currentTime;for(let A=0;A<16;A++)this.synth.controllerChange(A,S.sustainPedal,0);if(this.synth.stopAllChannels(),this.externalMIDIPlayback){for(let A of this.playingNotes)this.sendMIDIMessage([R.noteOff|A.channel%16,A.midiNote]);for(let A=0;A<Fn;A++)this.sendMIDICC(A,S.allNotesOff,0)}}findFirstEventIndex(){let A=0,e=1/0;return this._midiData.tracks.forEach((t,n)=>{if(this.eventIndexes[n]>=t.events.length)return;let s=t.events[this.eventIndexes[n]];s.ticks<e&&(A=n,e=s.ticks)}),A}addNewMIDIPort(){for(let A=0;A<16;A++)this.synth.createMIDIChannel()}sendMIDIMessage(A){this.externalMIDIPlayback&&this.callEvent("midiMessage",{message:A})}sendMIDIReset(){this.sendMIDIMessage([R.reset]);for(let A=0;A<Fn;A++)this.sendMIDIMessage([R.controllerChange|A,S.allSoundOff,0]),this.sendMIDIMessage([R.controllerChange|A,S.resetAllControllers,0])}loadCurrentSong(){let A=this._songIndex;this._shuffleMode&&(A=this.shuffledSongIndexes[this._songIndex]),this.loadNewSequence(this.songs[A])}shuffleSongIndexes(){let A=this.songs.map((e,t)=>t);for(this.shuffledSongIndexes=[];A.length>0;){let e=A[Math.floor(Math.random()*A.length)];this.shuffledSongIndexes.push(e),A.splice(A.indexOf(e),1)}}sendMIDICC(A,e,t){A%=16,this.externalMIDIPlayback&&this.sendMIDIMessage([R.controllerChange|A,e,t])}sendMIDIProgramChange(A,e){A%=16,this.externalMIDIPlayback&&this.sendMIDIMessage([R.programChange|A,e])}sendMIDIPitchWheel(A,e,t){A%=16,this.externalMIDIPlayback&&this.sendMIDIMessage([R.pitchWheel|A,t,e])}setTimeTicks(A){if(!this._midiData)return;this.playingNotes=[];let e=this._midiData.midiTicksToSeconds(A);this.callEvent("timeChange",{newTime:e});let t=this.setTimeTo(0,A);this.recalculateStartTime(this.playedTime)}recalculateStartTime(A){this.absoluteStartTime=this.synth.currentSynthTime-A/this._playbackRate}},dt=dt!==void 0?dt:{},ws=!1,ta;dt.isInitialized=new Promise(A=>ta=A);var Si=function(A){var e,t,n,s,a,o,r,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g="",c=0;A=A.replace(/[^A-Za-z0-9\+\/\=]/g,"");do s=i.indexOf(A.charAt(c++)),a=i.indexOf(A.charAt(c++)),o=i.indexOf(A.charAt(c++)),r=i.indexOf(A.charAt(c++)),e=s<<2|a>>4,t=(15&a)<<4|o>>2,n=(3&o)<<6|r,g+=String.fromCharCode(e),o!==64&&(g+=String.fromCharCode(t)),r!==64&&(g+=String.fromCharCode(n));while(c<A.length);return g};(function(){var A,e,t,n,s,a,o,r,i,g,c,Q,B,l,d,p,m,F,k,G,x,J,E=E!==void 0?E:{};E.wasmBinary=Uint8Array.from(Si("AGFzbQEAAAABpQEYYAJ/fwF/YAF/AGAAAX9gBH9/f38AYAAAYAN/f38Bf2ABfwF/YAJ/fwBgBn9/f39/fwF/YAR/f39/AX9gBX9/f39/AX9gB39/f39/f38Bf2AGf39/f39/AGAIf39/f39/f38Bf2AFf39/f38AYAd/f39/f39/AGADf39/AGABfwF9YAF9AX1gAnx/AXxgAnx/AX9gA3x8fwF8YAJ8fAF8YAF8AXwCngIPA2VudgZtZW1vcnkCAIACA2VudgV0YWJsZQFwAQQEA2Vudgl0YWJsZUJhc2UDfwADZW52DkRZTkFNSUNUT1BfUFRSA38AA2VudghTVEFDS1RPUAN/AANlbnYJU1RBQ0tfTUFYA38ABmdsb2JhbAhJbmZpbml0eQN8AANlbnYFYWJvcnQAAQNlbnYNZW5sYXJnZU1lbW9yeQACA2Vudg5nZXRUb3RhbE1lbW9yeQACA2VudhdhYm9ydE9uQ2Fubm90R3Jvd01lbW9yeQACA2Vudg5fX19hc3NlcnRfZmFpbAADA2VudgtfX19zZXRFcnJObwABA2VudgZfYWJvcnQABANlbnYWX2Vtc2NyaXB0ZW5fbWVtY3B5X2JpZwAFA3d2BgYCAQcHAQIBAQcBCAcFAAkGCQoHBgYGBgEFBgIBBgYKAAgLAAYGBgYGBgYBAAoMDAMGBQANCAoJAAwODA8OAQAGBgcEABAJEAERAAADBQwAAAMHBxIGAQAABwIFEwMOBw8HBgYQFAoVExYXFxcXFgQFBQYFAAYkB38BIwELfwEjAgt/ASMDC38BQQALfwFBAAt8ASMEC38BQQALB9MCFRBfX2dyb3dXYXNtTWVtb3J5AAgRX19fZXJybm9fbG9jYXRpb24AYwVfZnJlZQBfB19tYWxsb2MAXgdfbWVtY3B5AHkHX21lbXNldAB6BV9zYnJrAHsXX3N0Yl92b3JiaXNfanNfY2hhbm5lbHMAJhRfc3RiX3ZvcmJpc19qc19jbG9zZQAlFV9zdGJfdm9yYmlzX2pzX2RlY29kZQAoE19zdGJfdm9yYmlzX2pzX29wZW4AJBpfc3RiX3ZvcmJpc19qc19zYW1wbGVfcmF0ZQAnC2R5bkNhbGxfaWlpAHwTZXN0YWJsaXNoU3RhY2tTcGFjZQAMC2dldFRlbXBSZXQwAA8LcnVuUG9zdFNldHMAeAtzZXRUZW1wUmV0MAAOCHNldFRocmV3AA0Kc3RhY2tBbGxvYwAJDHN0YWNrUmVzdG9yZQALCXN0YWNrU2F2ZQAKCQoBACMACwR9VFl9Csb2A3YGACAAQAALGwEBfyMGIQEjBiAAaiQGIwZBD2pBcHEkBiABCwQAIwYLBgAgACQGCwoAIAAkBiABJAcLEAAjCEUEQCAAJAggASQJCwsGACAAJAsLBAAjCwsRACAABEAgABARIAAgABASCwvvBwEKfyAAQYADaiEHIAcoAgAhBQJAIAUEQCAAQfwBaiEEIAQoAgAhASABQQBKBEAgAEHwAGohCANAIAUgAkEYbGpBEGohCSAJKAIAIQEgAQRAIAgoAgAhAyAFIAJBGGxqQQ1qIQogCi0AACEGIAZB/wFxIQYgAyAGQbAQbGpBBGohAyADKAIAIQMgA0EASgRAQQAhAwNAIAEgA0ECdGohASABKAIAIQEgACABEBIgA0EBaiEDIAgoAgAhASAKLQAAIQYgBkH/AXEhBiABIAZBsBBsakEEaiEBIAEoAgAhBiAJKAIAIQEgAyAGSA0ACwsgACABEBILIAUgAkEYbGpBFGohASABKAIAIQEgACABEBIgAkEBaiECIAQoAgAhASACIAFODQMgBygCACEFDAAACwALCwsgAEHwAGohAyADKAIAIQEgAQRAIABB7ABqIQUgBSgCACECIAJBAEoEQEEAIQIDQAJAIAEgAkGwEGxqQQhqIQQgBCgCACEEIAAgBBASIAEgAkGwEGxqQRxqIQQgBCgCACEEIAAgBBASIAEgAkGwEGxqQSBqIQQgBCgCACEEIAAgBBASIAEgAkGwEGxqQaQQaiEEIAQoAgAhBCAAIAQQEiABIAJBsBBsakGoEGohASABKAIAIQEgAUUhBCABQXxqIQFBACABIAQbIQEgACABEBIgAkEBaiECIAUoAgAhASACIAFODQAgAygCACEBDAELCyADKAIAIQELIAAgARASCyAAQfgBaiEBIAEoAgAhASAAIAEQEiAHKAIAIQEgACABEBIgAEGIA2ohAyADKAIAIQEgAQRAIABBhANqIQUgBSgCACECIAJBAEoEQEEAIQIDQCABIAJBKGxqQQRqIQEgASgCACEBIAAgARASIAJBAWohAiAFKAIAIQcgAygCACEBIAIgB0gNAAsLIAAgARASCyAAQQRqIQIgAigCACEBIAFBAEoEQEEAIQEDQCAAQZQGaiABQQJ0aiEDIAMoAgAhAyAAIAMQEiAAQZQHaiABQQJ0aiEDIAMoAgAhAyAAIAMQEiAAQdgHaiABQQJ0aiEDIAMoAgAhAyAAIAMQEiABQQFqIQEgAigCACEDIAEgA0ghAyABQRBJIQUgBSADcQ0ACwtBACEBA0AgAEGgCGogAUECdGohAiACKAIAIQIgACACEBIgAEGoCGogAUECdGohAiACKAIAIQIgACACEBIgAEGwCGogAUECdGohAiACKAIAIQIgACACEBIgAEG4CGogAUECdGohAiACKAIAIQIgACACEBIgAEHACGogAUECdGohAiACKAIAIQIgACACEBIgAUEBaiEBIAFBAkcNAAsLGwAgAEHEAGohACAAKAIAIQAgAEUEQCABEF8LC3wBAX8gAEHUB2ohASABQQA2AgAgAEGAC2ohASABQQA2AgAgAEH4CmohASABQQA2AgAgAEGcCGohASABQQA2AgAgAEHVCmohASABQQA6AAAgAEH8CmohASABQQA2AgAgAEHUC2ohASABQQA2AgAgAEHYC2ohACAAQQA2AgAL8AQBB38jBiELIwZBEGokBiALQQhqIQcgC0EEaiEKIAshCCAAQSRqIQYgBiwAACEGAn8gBgR/IABBgAtqIQYgBigCACEGIAZBf0oEQCAFQQA2AgAgACABIAIQFgwCCyAAQRRqIQYgBiABNgIAIAEgAmohAiAAQRxqIQkgCSACNgIAIABB2ABqIQIgAkEANgIAIABBABAXIQkgCUUEQCAFQQA2AgBBAAwCCyAAIAcgCCAKEBghCSAJBEAgBygCACECIAgoAgAhCSAKKAIAIQggACACIAkgCBAaIQogByAKNgIAIABBBGohAiACKAIAIQggCEEASgRAQQAhAgNAIABBlAZqIAJBAnRqIQcgBygCACEHIAcgCUECdGohByAAQdQGaiACQQJ0aiEMIAwgBzYCACACQQFqIQIgAiAISA0ACwsgAwRAIAMgCDYCAAsgBSAKNgIAIABB1AZqIQAgBCAANgIAIAYoAgAhACAAIAFrDAILAkACQAJAAkACQCACKAIAIgNBIGsOBAECAgACCyACQQA2AgAgAEHUAGohAiAAEBkhAwJAIANBf0cEQANAIAIoAgAhAyADDQIgABAZIQMgA0F/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ACECIABBmAhqIQYgBigCACEHIAUgA2shCSAJIAdqIQkgAiAJSSEJIAIgB0khDSACIAdrIQJBACACIA0bIQIgAiADaiECIAIgBUohByAFIAIgBxshAiAJBEAgASACNgIAIAYoAgAhACAAIAJqIQAgBiAANgIAQQEMBgsLCyAAQfQKaiECIAIoAgAhAiADIB9rIQYgBiACaiEGIABBmAhqIQIgAiAGNgIAIAhBATYCAAwBBSAAQZgIaiECIAYNAQsMAQsgBCADayEDIAIoAgAhBCADIARqIQMgAiADNgIACyATKAIAIQIgAgRAIABByABqIQIgAigCACECIABB0ABqIQAgACgCACEAIAIgAEcEQEHTE0HEE0HkGkHnFBAECwsgASAFNgIAQQELIQAgHCQGIAALqAIBBX8gAEHoCmohBSAFKAIAIQICQCACQQBIBEBBACEABSACIAFIBEAgAUEYSgRAIABBGBAsIQIgAUFoaiEBIAAgARAsIQAgAEEYdCEAIAAgAmohACAADwsgAkUEQCAAQeQKaiECIAJBADYCAAsgAEHkCmohAwJAAkACQANAIAAQLiECIAJBf0YNASAFKAIAIQQgAiAEdCECIAMoAgAhBiAGIAJqIQIgAyACNgIAIAUgBEEIaiICNgIAIAIgAUgNAAwCAAsACyAFQX82AgBBACEADAQLIARBeEgEQEEAIQAMBAsLCyAAQeQKaiEEIAQoAgAhA0EBIAF0IQAgAEF/aiEAIAMgAHEhACADIAF2IQMgBCADNgIAIAIgAWshASAFIAE2AgALCyAAC40CAAJAIABBAEgEf0EABSAAQYCAAUgEQCAAQRBIBEAgAEGACGohACAALAAAIQAMAwsgAEGABEgEQCAAQQV2IQAgAEGACGohACAALAAAIQAgAEEFaiEABSAAQQp2IQAgAEGACGohACAALAAAIQAgAEEKaiEACwwCCyAAQYCAgAhIBH8gAEGAgCBIBH8gAEEPdiEAIABBgAhqIQAgACwAACEAIABBD2oFIABBFHYhACAAQYAIaiEAIAAsAAAhACAAQRRqCwUgAEGAgICAAkgEfyAAQRl2IQAgAEGACGohACAALAAAIQAgAEEZagUgAEEediEAIABBgAhqIQAgACwAACEAIABBHmoLCwshAAsgAAuiAQEDfyAAQdQKaiECIAIsAAAhAQJAAkAgAQ0AIABB3ApqIQEgASgCACEBIAEEQEF/IQMFIAAQLyEBIAEEQCACLAAAIQEgAQ0CQaEUQcQTQfYLQbUUEAQFQX8hAwsLDAELIAFBf2pBGHRBGHUhASACIAE6AAAgAEHsCmohASABKAIAIQIgAkEBaiECIAEgAjYCACAAEDAhACAAQf8BcSEDCyADC6wCAQd/IABB3ApqIQIgAigCACEBAkAgAUUEQCAAQdgKaiEEIAQoAgAhASABQX9GBEAgAEHQCGohASABKAIAIQEgAUF/aiEBIABB4ApqIQMgAyABNgIAIAAQMSEBIAFFBEAgAkEBNgIADAMLIABB0wpqIQEgASwAACEBIAFBAXEhASABBH8gBCgCAAUgAEEgEBUMAwshAQsgAUEBaiEHIAQgBzYCACAAQdQIaiABaiEDIAMsAAAhBiAGQf8BcSEDIAZBf0cEQCACQQE2AgAgAEHgCmohAiACIAE2AgALIABB0AhqIQEgASgCACEBIAcgAU4EQCAEQX82AgALIABB1ApqIQAgACwAACEBIAEEQEHFFEHEE0HoC0HaFBAEBSAAIAY6AAAgAyEFCwsLIAULUQEDfyAAQRRqIQMgAygCACEBIABBHGohAiACKAIAIQIgASACSQR/IAFBAWohACADIAA2AgAgASwAAAUgAEHUAGohACAAQQE2AgBBAAshACAACyABAX8gABAyIQEgAQR/IAAQMwUgAEEeEBVBAAshACAAC2ABAX8gABAwIQEgAUH/AXFBzwBGBEAgABAwIQEgAUH/AXFB5wBGBEAgABAwIQEgAUH/AXFB5wBGBEAgABAwIQAgAEH/AXFB0wBGIQAFQQAhAAsFQQAhAAsFQQAhAAsgAAvZAwEGfyAAEDAhAQJ/IAFB/wFxBH8gAEEfEBVBAAUgABAwIQEgAEHTCmohAiACIAE6AAAgABAjIQUgABAjIQIgABAjGiAAECMhASAAQcwIaiEDIAMgATYCACAAECMaIAAQMCEBIAFB/wFxIQEgAEHQCGohAyADIAE2AgAgAEHUCGohBCAAIAQgARAiIQEgAUUEQCAAQQoQFUEADAILIABB8ApqIQQgBEF+NgIAIAIgBXEhAQJAIAFBf0cEQCADKAIAIQEgAUEASgRAA0ACQCABQX9qIQIgAEHUCGogAmohBiAGLAAAIQYgBkF/Rw0AIAFBAUwNBCACIQEMAQsLIAQgAjYCACAAQfQKaiEBIAEgBTYCAAsLCyAAQdUKaiEBIAEsAAAhASABBEAgAygCACEDIANBAEoEf0EAIQJBACEBA0AgAEHUCGogAWohBCAELQAAIQQgBEH/AXEhBCACIARqIQIgAUEBaiEBIAEgA0gNAAsgAkEbagVBGwshASAAQShqIQIgAigCACECIAEgA2ohASABIAJqIQEgAEEsaiEDIAMgAjYCACAAQTBqIQIgAiABNgIAIABBNGohASABIAU2AgALIABB2ApqIQAgAEEANgIAQQELCyEAIAALowEBB38gAEHoCmohAyADKAIAIQECQCABQRlIBEAgAEHkCmohBCABRQRAIARBADYCAAsgAEHUCmohBSAAQdwKaiEGA0AgBigCACEBIAEEQCAFLAAAIQEgAUUNAwsgABAuIQIgAkF/Rg0CIAMoAgAhASACIAF0IQIgBCgCACEHIAcgAmohAiAEIAI2AgAgAUEIaiECIAMgAjYCACABQRFIDQALCwsLrQUBCX8gABA0IAFBIGohAiACKAIAIQUCQAJAIAVFIgNFDQAgAUGkEGohAiACKAIAIQIgAg0AQX8hAQwBCyABQQRqIQIgAigCACECAkACQCACQQhKBEAgAUGkEGohAyADKAIAIQMgAw0BBSADDQELDAELIABB5ApqIQggCCgCACEJIAkQOiEHIAFBrBBqIQIgAigCACECIAJBAUoEQCABQaQQaigCACEKQQAhAwNAIAJBAXYhBSAFIANqIQQgCiAEQQJ0aiEGIAYoAgAhBiAGIAdLIQYgAiAFayECIAMgBCAGGyEDIAUgAiAGGyECIAJBAUoNAAsFQQAhAwsgAUEXaiECIAIsAAAhAiACRQRAIAFBqBBqIQIgAigCACECIAIgA0ECdGohAiACKAIAIQMLIAFBCGohASABKAIAIQEgASADaiEBIAEtAAAhASABQf8BcSEBIABB6ApqIQIgAigCACEAIAAgAUgEf0EAIQBBfwUgACABayEAIAkgAXYhASAIIAE2AgAgAwshASACIAA2AgAMAQsgAUEXaiEDIAMsAAAhAyADBEBBgRVBxBNB6gxBjBUQBAsCQCACQQBKBEAgASgCCCEIIABB5ApqIQlBACEBA0ACQCAIIAFqIQMgAywAACEEIARB/wFxIQMgBEF/RwRAIAUgAUECdGoh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IwZBEGokBiACIQECfCAAvUIgiKdB/////wdxIgNB/MOk/wNJBHwgA0GewZryA0kEfEQAAAAAAADwPwUgAEQAAAAAAAAAABByCwUgACAAoSADQf//v/8HSw0BGgJAAkACQAJAIAAgARBuQQNxDgMAAQIDCyABKwMAIAErAwgQcgwECyABKwMAIAErAwhBARBwmgwDCyABKwMAIAErAwgQcpoMAgsgASsDACABKwMIQQEQcAsLIQAgAiQGIAALywEBA38jBiECIwZBEGokBiACIQECQCAAvUIgiKdB/////wdxIgNB/MOk/wNJBEAgA0GAgMDyA08EQCAARAAAAAAAAAAAQQAQcCEACwUgA0H//7//B0sEQCAAIAChIQAMAgsCQAJAAkACQAJAIAAgARBuQQNxDgMAAQIDCyABKwMAIAErAwhBARBwIQAMBQsgASsDACABKwMIEHIhAAwECyABKwMAIAErAwhBARBwmiEADAMLIAErAwAgASsDCBBymiEACwsLIAIkBiAAC5sDAwJ/AX4CfCAAvSIDQj+IpyEBAnwCfwJAIANCIIinQf////8HcSICQarGmIQESwR8IANC////////////AINCgICAgICAgPj/AFYEQCAADwsgAETvOfr+Qi6GQGQEQCAARAAAAAAAAOB/og8FIABE0rx63SsjhsBjIABEUTAt1RBJh8BjcUUNAkQAAAAAAAAAACIADwsABSACQcLc2P4DSwRAIAJBscXC/wNLDQIgAUEBcyABawwDCyACQYCAwPEDSwR8QQAhASAABSAARAAAAAAAAPA/oA8LCwwCCyAARP6CK2VHFfc/oiABQQN0QYATaisDAKCqCyEBIAAgAbciBEQAAOD+Qi7mP6KhIgAgBER2PHk17znqPaIiBaELIQQgACAEIAQgBCAEoiIAIAAgACAAIABE0KS+cmk3Zj6iRPFr0sVBvbu+oKJELN4lr2pWET+gokSTvb4WbMFmv6CiRD5VVVVVVcU/oKKhIgCiRAAAAAAAAABAIAChoyAFoaBEAAAAAAAA8D+gIQAgAUUEQCAADwsgACABEGULnwMDAn8BfgV8IAC9IgNCIIinIQECfyADQgBTIgIgAUGAgMAASXIEfyADQv///////////wCDQgBRBEBEAAAAAAAA8L8gACAAoqMPCyACRQRAIABEAAAAAAAAUEOivSIDQiCIpyEBIANC/////w+DIQNBy3cMAgsgACAAoUQAAAAAAAAAAKMPBSABQf//v/8HSwRAIAAPCyADQv////8PgyIDQgBRIAFBgIDA/wNGcQR/RAAAAAAAAAAADwVBgXgLCwshAiABQeK+JWoiAUH//z9xQZ7Bmv8Daq1CIIYgA4S/RAAAAAAAAPC/oCIFIAVEAAAAAAAA4D+ioiEGIAUgBUQAAAAAAAAAQKCjIgcgB6IiCCAIoiEEIAIgAUEUdmq3IgBEAADg/kIu5j+iIAUgAER2PHk17znqPaIgByAGIAQgBCAERJ/GeNAJmsM/okSveI4dxXHMP6CiRAT6l5mZmdk/oKIgCCAEIAQgBEREUj7fEvHCP6JE3gPLlmRGxz+gokRZkyKUJEnSP6CiRJNVVVVVVeU/oKKgoKKgIAahoKAL8Q8DC38Cfgh8AkACQAJAIAG9Ig1CIIinIgVB/////wdxIgMgDaciBnJFBEBEAAAAAAAA8D8PCyAAvSIOQiCIpyEHIA6nIghFIgogB0GAgMD/A0ZxBEBEAAAAAAAA8D8PCyAHQf////8HcSIEQYCAwP8HTQRAIAhBAEcgBEGAgMD/B0ZxIANBgIDA/wdLckUEQCAGQQBHIANBgIDA/wdGIgtxRQRAAkACQAJAIAdBAEgiCUUNACADQf///5kESwR/QQIhAgwBBSADQf//v/8DSwR/IANBFHYhAiADQf///4kESwRAQQIgBkGzCCACayICdiIMQQFxa0EAIAwgAnQgBkYbIQIMAwsgBgR/QQAFQQIgA0GTCCACayICdiIGQQFxa0EAIAYgAnQgA0YbIQIMBAsFDAILCyECDAILIAZFDQAMAQsgCwRAIARBgIDAgHxqIAhyRQRARAAAAAAAAPA/DwsgBUF/SiECIARB//+//wNLBEAgAUQAAAAAAAAAACACGw8FRAAAAAAAAAAAIAGaIAIbDwsACyADQYCAwP8DRgRAIABEAAAAAAAA8D8gAKMgBUF/ShsPCyAFQYCAgIAERgRAIAAgAKIPCyAHQX9KIAVBgICA/wNGcQRAIACfDwsLIACZIQ8gCgRAIARFIARBgICAgARyQYCAwP8HRnIEQEQAAAAAAADwPyAPoyAPIAVBAEgbIQAgCUUEQCAADwsgAiAEQYCAwIB8anIEQCAAmiAAIAJBAUYbDwsMBQsLAnwgCQR8AkACQAJAIAIOAgABAgsMBwtEAAAAAAAA8L8MAgtEAAAAAAAA8D8MAQVEAAAAAAAA8D8LCyERAnwgA0GAgICPBEsEfCADQYCAwJ8ESwRAIARBgIDA/wNJBEAjCkQAAAAAAAAAACAFQQBIGw8FIwpEAAAAAAAAAAAgBUEAShsPCwALIARB//+//wNJBEAgEUScdQCIPOQ3fqJEnHUAiDzkN36iIBFEWfP4wh9upQGiRFnz+MIfbqUBoiAFQQBIGw8LIARBgIDA/wNNBEAgD0QAAAAAAADwv6AiAEQAAABgRxX3P6IiECAARETfXfgLrlQ+oiAAIACiRAAAAAAAAOA/IABEVVVVVVVV1T8gAEQAAAAAAADQP6KhoqGiRP6CK2VHFfc/oqEiAKC9QoCAgIBwg78iEiEPIBIgEKEMAgsgEUScdQCIPOQ3fqJEnHUAiDzkN36iIBFEWfP4wh9upQGiRFnz+MIfbqUBoiAFQQBKGw8FIA9EAAAAAAAAQEOiIgC9QiCIpyAEIARBgIDAAEkiBRshAkHMd0GBeCAFGyACQRR1aiEDIAJB//8/cSIEQYCAwP8DciECIARBj7EOSQRAQQAhBAUgBEH67C5JIgYhBCADIAZBAXNBAXFqIQMgAiACQYCAQGogBhshAgsgBEEDdEGwE2orAwAiFCACrUIghiAAIA8gBRu9Qv////8Pg4S/IhAgBEEDdEGQE2orAwAiEqEiE0QAAAAAAADwPyASIBCgoyIVoiIPvUKAgICAcIO/IgAgACAAoiIWRAAAAAAAAAhAoCAPIACgIBUgEyACQQF1QYCAgIACckGAgCBqIARBEnRqrUIghr8iEyAAoqEgECATIBKhoSAAoqGiIhCiIA8gD6IiACAAoiAAIAAgACAAIABE705FSih+yj+iRGXbyZNKhs0/oKJEAUEdqWB00T+gokRNJo9RVVXVP6CiRP+rb9u2bds/oKJEAzMzMzMz4z+goqAiEqC9QoCAgIBwg78iAKIiEyAQIACiIA8gEiAARAAAAAAAAAjAoCAWoaGioCIPoL1CgICAgHCDvyIARAAAAOAJx+4/oiIQIARBA3RBoBNqKwMAIA8gACAToaFE/QM63AnH7j+iIABE9QFbFOAvPj6ioaAiAKCgIAO3IhKgvUKAgICAcIO/IhMhDyATIBKhIBShIBChCwshECAAIBChIAGiIAEgDUKAgICAcIO/IgChIA+ioCEBIA8gAKIiACABoCIPvSINQiCIpyECIA2nIQMgAkH//7+EBEoEQCACQYCAwPt7aiADciABRP6CK2VHFZc8oCAPIAChZHINBgUgAkGA+P//B3FB/5fDhARLBEAgAkGA6Lz7A2ogA3IgASAPIAChZXINBgsLIBEgAkH/////B3EiA0GAgID/A0sEfyAAQYCAQEGAgMAAIANBFHZBgnhqdiACaiIDQRR2Qf8PcSIEQYF4anUgA3GtQiCGv6EiDyEAIAEgD6C9IQ1BACADQf//P3FBgIDAAHJBkwggBGt2IgNrIAMgAkEASBsFQQALIgJBFHREAAAAAAAA8D8gDUKAgICAcIO/Ig9EAAAAAEMu5j+iIhAgASAPIAChoUTvOfr+Qi7mP6IgD0Q5bKgMYVwgPqKhIg+gIgAgACAAIACiIgEgASABIAEgAUTQpL5yaTdmPqJE8WvSxUG9u76gokQs3iWvalYRP6CiRJO9vhZswWa/oKJEPlVVVVVVxT+goqEiAaIgAUQAAAAAAAAAwKCjIA8gACAQoaEiASAAIAGioKEgAKGhIgC9Ig1CIIinaiIDQYCAwABIBHwgACACEGUFIAOtQiCGIA1C/////w+DhL8LIgCiDwsLCyAAIAGgDwsgACAAoSIAIACjDwsgEURZ8/jCH26lAaJEWfP4wh9upQGiDwsgEUScdQCIPOQ3fqJEnHUAiDzkN36iCwMAAQvDAwEDfyACQYDAAE4EQCAAIAEgAhAHDwsgACEEIAAgAmohAyAAQQNxIAFBA3FGBEADQCAAQQNxBEAgAkUEQCAEDwsgACABLAAAOgAAIABBAWohACABQQFqIQEgAkEBayECDAELCyADQXxxIgJBQGohBQNAIAAgBUwEQCAAIAEoAgA2AgAgACABKAIENgIEIAAgASgCCDYCCCAAIAEoAgw2AgwgACABKAIQNgIQIAAgASgCFDYCFCAAIAEoAhg2AhggACABKAIcNgIcIAAgASgCIDYCICAAIAEoAiQ2AiQgACABKAIoNgIoIAAgASgCLDYCLCAAIAEoAjA2AjAgACABKAI0NgI0IAAgASgCODYCOCAAIAEoAjw2AjwgAEFAayEAIAFBQGshAQwBCwsDQCAAIAJIBEAgACABKAIANgIAIABBBGohACABQQRqIQEMAQsLBSADQQRrIQIDQCAAIAJIBEAgACABLAAAOgAAIAAgASwAAToAASAAIAEsAAI6AAIgACABLAADOgADIABBBGohACABQQRqIQEMAQsLCwNAIAAgA0gEQCAAIAEsAAA6AAAgAEEBaiEAIAFBAWohAQwBCwsgBAuYAgEEfyAAIAJqIQQgAUH/AXEhASACQcMATgRAA0AgAEEDcQRAIAAgAToAACAAQQFqIQAMAQsLIARBfHEiBUFAaiEGIAEgAUEIdHIgAUEQdHIgAUEYdHIhAwNAIAAgBkwEQCAAIAM2AgAgACADNgIEIAAgAzYCCCAAIAM2AgwgACADNgIQIAAgAzYCFCAAIAM2AhggACADNgIcIAAgAzYCICAAIAM2AiQgACADNgIoIAAgAzYCLCAAIAM2AjAgACADNgI0IAAgAzYCOCAAIAM2AjwgAEFAayEADAELCwNAIAAgBUgEQCAAIAM2AgAgAEEEaiEADAELCwsDQCAAIARIBEAgACABOgAAIABBAWohAAwBCwsgBCACawtVAQJ/IABBAEojBSgCACIBIABqIgAgAUhxIABBAEhyBEAQAxpBDBAFQX8PCyMFIAA2AgAQAiECIAAgAkoEQBABRQRAIwUgATYCAEEMEAVBfw8LCyABCw4AIAEgAiAAQQNxEQAACwgAQQAQAEEACwvAEQQAQYEIC7YKAQICAwMDAwQEBAQEBAQEAAEAAIAAAABWAAAAQAAAAD605DMJkfMzi7IBNDwgCjQjGhM0YKkcNKfXJjRLrzE0UDs9NHCHSTQjoFY0uJJkNFVtczSIn4E0/AuKNJMEkzRpkpw0Mr+mND+VsTSTH7005GnJNK2A1jQ2ceQ0pknzNIiMATXA9wk1Bu8SNXZ7HDXApiY1N3sxNdoDPTVeTEk1O2FWNblPZDX8JXM1inmBNYbjiTV82ZI1hWScNVKOpjUzYbE1Jei8NdwuyTXOQdY1QS7kNVcC8zWPZgE2T88JNvXDEjaYTRw26HUmNjJHMTZ0zDw2XhFJNmUiVjbODGQ2uN5yNpdTgTYcu4k2cq6SNq82nDaBXaY2NS2xNsewvDbk88g2AQPWNmDr4zYeu/I2okABN+umCTfxmBI3yR8cNx5FJjc9EzE3HpU8N2/WSDei41U398ljN4mXcjevLYE3vpKJN3SDkjfmCJw3viymN0f5sDd5ebw3/rjIN0fE1TeSqOM3+HPyN8AaATiTfgk4+W0SOAbyGzhiFCY4Vt8wONhdPDiSm0g48qRVODOHYzhuUHI40weBOGtqiTiCWJI4KtubOAn8pThoxbA4O0K8OCl+yDighdU42WXjOOgs8jjp9AA5RlYJOQ5DEjlRxBs5teMlOX+rMDmiJjw5xWBIOVNmVTmDRGM5aAlyOQHigDkkQok5nS2SOXutmzljy6U5mZGwOQ0LvDlmQ8g5C0fVOTIj4znt5fE5Hc8AOgUuCTowGBI6qZYbOhWzJTq3dzA6fO87OgomSDrHJ1U65gFjOnjCcTo7vIA66RmJOsYCkjrbf5s6y5qlOthdsDrv07s6swjIOogI1Tqf4OI6B5/xOlypADvQBQk7Xu0ROw9pGzuEgiU7/UMwO2e4Ozth60c7TelUO12/Yjuce3E7f5aAO7rxiDv515E7R1KbO0FqpTsnKrA74py7OxLOxzsXytQ7IJ7iOzVY8TumgwA8p90IPJjCETyCOxs8AVIlPFQQMDxhgTs8yLBHPOWqVDzofGI81DRxPM9wgDyWyYg8Oq2RPMAkmzzFOaU8hfavPOVluzyCk8c8uYvUPLRb4jx5EfE8+10APYm1CD3flxE9Ag4bPY0hJT253C89bUo7PUB2Rz2RbFQ9hTpiPSLucD0qS4A9f6GIPYiCkT1I95o9WAmlPfLCrz34Lrs9A1nHPW1N1D1cGeI90crwPVs4AD53jQg+M20RPpDgGj4n8SQ+LqkvPocTOz7KO0c+TS5UPjf4YT6Ep3A+jyWAPnN5iD7iV5E+3MmaPvnYpD5tj68+G/i6PpUexz4zD9Q+F9fhPj2E8D7GEgA/cmUIP5NCET8rsxo/zsAkP7F1Lz+y3Do/ZQFHPx3wUz/7tWE/+2BwPwAAgD8DAAAABAAAAAQAAAAGAAAAg/miAERObgD8KRUA0VcnAN009QBi28AAPJmVAEGQQwBjUf4Au96rALdhxQA6biQA0k1CAEkG4AAJ6i4AHJLRAOsd/gApsRwA6D6nAPU1ggBEuy4AnOmEALQmcABBfl8A1pE5AFODOQCc9DkAi1+EACj5vQD4HzsA3v+XAA+YBQARL+8AClqLAG0fbQDPfjYACcsnAEZPtwCeZj8ALepfALondQDl68cAPXvxAPc5BwCSUooA+2vqAB+xXwAIXY0AMANWAHv8RgDwq2sAILzPADb0mgDjqR0AXmGRAAgb5gCFmWUAoBRfAI1AaACA2P8AJ3NNAAYGMQDKVhUAyahzAHviYABrjMAAQcMSC11A+yH5PwAAAAAtRHQ+AAAAgJhG+DwAAABgUcx4OwAAAICDG/A5AAAAQCAlejgAAACAIoLjNgAAAAAd82k1AAAAAAAA4D8AAAAAAADgvwAAAAAAAPA/AAAAAAAA+D8AQagTCwgG0M9D6/1MPgBBuxMLigZAA7jiP09nZ1MuL3N0Yl92b3JiaXMuYwBmLT5hbGxvYy5hbGxvY19idWZmZXJfbGVuZ3RoX2luX2J5dGVzID09IGYtPnRlbXBfb2Zmc2V0AHZvcmJpc19kZWNvZGVfaW5pdGlhbABmLT5ieXRlc19pbl9zZWcgPiAwAGdldDhfcGFja2V0X3JhdwBmLT5ieXRlc19pbl9zZWcgPT0gMABuZXh0X3NlZ21lbnQAdm9yYmlzX2RlY29kZV9wYWNrZXRfcmVzdAAhYy0+c3BhcnNlAGNvZGVib29rX2RlY29kZV9zY2FsYXJfcmF3ACFjLT5zcGFyc2UgfHwgeiA8IGMtPnNvcnRlZF9lbnRyaWVzAGNvZGVib29rX2RlY29kZV9kZWludGVybGVhdmVfcmVwZWF0AHogPCBjLT5zb3J0ZWRfZW50cmllcwBjb2RlYm9va19kZWNvZGVfc3RhcnQAKG4gJiAzKSA9PSAwAGltZGN0X3N0ZXAzX2l0ZXIwX2xvb3AAMABnZXRfd2luZG93AGYtPnRlbXBfb2Zmc2V0ID09IGYtPmFsbG9jLmFsbG9jX2J1ZmZlcl9sZW5ndGhfaW5fYnl0ZXMAc3RhcnRfZGVjb2RlcgB2b3JiaXNjLT5zb3J0ZWRfZW50cmllcyA9PSAwAGNvbXB1dGVfY29kZXdvcmRzAHogPj0gMCAmJiB6IDwgMzIAbGVuW2ldID49IDAgJiYgbGVuW2ldIDwgMzIAYXZhaWxhYmxlW3ldID09IDAAayA9PSBjLT5zb3J0ZWRfZW50cmllcwBjb21wdXRlX3NvcnRlZF9odWZmbWFuAGMtPnNvcnRlZF9jb2Rld29yZHNbeF0gPT0gY29kZQBsZW4gIT0gTk9fQ09ERQBpbmNsdWRlX2luX3NvcnQAcG93KChmbG9hdCkgcisxLCBkaW0pID4gZW50cmllcwBsb29rdXAxX3ZhbHVlcwAoaW50KSBmbG9vcihwb3coKGZsb2F0KSByLCBkaW0pKSA8PSBlbnRyaWVzAOoPBG5hbWUB4g9+AAVhYm9ydAENZW5sYXJnZU1lbW9yeQIOZ2V0VG90YWxNZW1vcnkDF2Fib3J0T25DYW5ub3RHcm93TWVtb3J5BA5fX19hc3NlcnRfZmFpbAULX19fc2V0RXJyTm8GBl9hYm9ydAcWX2Vtc2NyaXB0ZW5fbWVtY3B5X2JpZwgQX19ncm93V2FzbU1lbW9yeQkKc3RhY2tBbGxvYwoJc3RhY2tTYXZlCwxzdGFja1Jlc3RvcmUME2VzdGFibGlzaFN0YWNrU3BhY2UNCHNldFRocmV3DgtzZXRUZW1wUmV0MA8LZ2V0VGVtcFJldDAQEV9zdGJfdm9yYmlzX2Nsb3NlEQ5fdm9yYmlzX2RlaW5pdBILX3NldHVwX2ZyZWUTGl9zdGJfdm9yYmlzX2ZsdXNoX3B1c2hkYXRhFCFfc3RiX3ZvcmJpc19kZWNvZGVfZnJhbWVfcHVzaGRhdGEVBl9lcnJvchYgX3ZvcmJpc19zZWFyY2hfZm9yX3BhZ2VfcHVzaGRhdGEXGF9pc193aG9sZV9wYWNrZXRfcHJlc2VudBgVX3ZvcmJpc19kZWNvZGVfcGFja2V0GQxfZ2V0OF9wYWNrZXQaFF92b3JiaXNfZmluaXNoX2ZyYW1lGxlfc3RiX3ZvcmJpc19vcGVuX3B1c2hkYXRhHAxfdm9yYmlzX2luaXQdDl9zdGFydF9kZWNvZGVyHg1fdm9yYmlzX2FsbG9jHxtfc3RiX3ZvcmJpc19nZXRfZmlsZV9vZmZzZXQgE19tYXliZV9zdGFydF9wYWNrZXQhDV9mbHVzaF9wYWNrZXQiBV9nZXRuIwZfZ2V0MzIkE19zdGJfdm9yYmlzX2pzX29wZW4lFF9zdGJfdm9yYmlzX2pzX2Nsb3NlJhdfc3RiX3ZvcmJpc19qc19jaGFubmVscycaX3N0Yl92b3JiaXNfanNfc2FtcGxlX3JhdGUoFV9zdGJfdm9yYmlzX2pzX2RlY29kZSkNX2NyYzMyX3VwZGF0ZSoWX3ZvcmJpc19kZWNvZGVfaW5pdGlhbCsaX3ZvcmJpc19kZWNvZGVfcGFja2V0X3Jlc3QsCV9nZXRfYml0cy0FX2lsb2cuEF9nZXQ4X3BhY2tldF9yYXcvDV9uZXh0X3NlZ21lbnQwBV9nZXQ4MQtfc3RhcnRfcGFnZTIQX2NhcHR1cmVfcGF0dGVybjMdX3N0YXJ0X3BhZ2Vfbm9fY2FwdHVyZXBhdHRlcm40DV9wcmVwX2h1ZmZtYW41G19jb2RlYm9va19kZWNvZGVfc2NhbGFyX3JhdzYOX3ByZWRpY3RfcG9pbnQ3D19kZWNvZGVfcmVzaWR1ZTgJX2RvX2Zsb29yOQ1faW52ZXJzZV9tZGN0OgxfYml0X3JldmVyc2U7EV9tYWtlX2Jsb2NrX2FycmF5PBJfc2V0dXBfdGVtcF9tYWxsb2M9JF9jb2RlYm9va19kZWNvZGVfZGVpbnRlcmxlYXZlX3JlcGVhdD4PX3Jlc2lkdWVfZGVjb2RlPxVfY29kZWJvb2tfZGVjb2RlX3N0ZXBAEF9jb2RlYm9va19kZWNvZGVBFl9jb2RlYm9va19kZWNvZGVfc3RhcnRCCl9kcmF3X2xpbmVDF19pbWRjdF9zdGVwM19pdGVyMF9sb29wRBlfaW1kY3Rfc3RlcDNfaW5uZXJfcl9sb29wRRlfaW1kY3Rfc3RlcDNfaW5uZXJfc19sb29wRh9faW1kY3Rfc3RlcDNfaW5uZXJfc19sb29wX2xkNjU0RwhfaXRlcl81NEgLX2dldF93aW5kb3dJEF92b3JiaXNfdmFsaWRhdGVKDV9zdGFydF9wYWNrZXRLBV9za2lwTAtfY3JjMzJfaW5pdE0NX3NldHVwX21hbGxvY04QX3NldHVwX3RlbXBfZnJlZU8SX2NvbXB1dGVfY29kZXdvcmRzUBdfY29tcHV0ZV9zb3J0ZWRfaHVmZm1hblEcX2NvbXB1dGVfYWNjZWxlcmF0ZWRfaHVmZm1hblIPX2Zsb2F0MzJfdW5wYWNrUw9fbG9va3VwMV92YWx1ZXNUDl9wb2ludF9jb21wYXJlVQpfbmVpZ2hib3JzVg9faW5pdF9ibG9ja3NpemVXCl9hZGRfZW50cnlYEF9pbmNsdWRlX2luX3NvcnRZD191aW50MzJfY29tcGFyZVoYX2NvbXB1dGVfdHdpZGRsZV9mYWN0b3JzWw9fY29tcHV0ZV93aW5kb3dcE19jb21wdXRlX2JpdHJldmVyc2VdB19zcXVhcmVeB19tYWxsb2NfBV9mcmVlYAhfcmVhbGxvY2ESX3RyeV9yZWFsbG9jX2NodW5rYg5fZGlzcG9zZV9jaHVua2MRX19fZXJybm9fbG9jYXRpb25kB19tZW1jbXBlB19zY2FsYm5mBl9xc29ydGcFX3NpZnRoBF9zaHJpCF90cmlua2xlagRfc2hsawVfcG50emwIX2FfY3R6X2xtBl9jeWNsZW4LX19fcmVtX3BpbzJvEV9fX3JlbV9waW8yX2xhcmdlcAZfX19zaW5xBl9sZGV4cHIGX19fY29zcwRfY29zdARfc2ludQRfZXhwdgRfbG9ndwRfcG93eAtydW5Qb3N0U2V0c3kHX21lbWNweXoHX21lbXNldHsFX3Nicmt8C2R5bkNhbGxfaWlpfQJiMA=="),function(C){return C.charCodeAt(0)});var E=E!==void 0?E:{},ee={};for(A in E)E.hasOwnProperty(A)&&(ee[A]=E[A]);E.arguments=[],E.thisProgram="./this.program",E.quit=function(C,u){throw u},E.preRun=[],E.postRun=[];var Ae=!1,_=!1,V=!1,H=!1;Ae=typeof window=="object",_=typeof importScripts=="function",V=typeof process=="object"&&typeof Ja=="function"&&!Ae&&!_,H=!Ae&&!V&&!_;var K="";function W(C){return E.locateFile?E.locateFile(C,K):K+C}V?(K="/",E.read=function(u,f){var w;return e||(e=void 0),t||(t=void 0),u=t.normalize(u),w=e.readFileSync(u),f?w:w.toString()},E.readBinary=function(u){var f=E.read(u,!0);return f.buffer||(f=new Uint8Array(f)),Ne(f.buffer),f},process.argv.length>1&&(E.thisProgram=process.argv[1].replace(/\\/g,"/")),E.arguments=process.argv.slice(2),typeof module<"u",process.on("uncaughtException",function(C){if(!(C instanceof ot))throw C}),process.on("unhandledRejection",function(C,u){process.exit(1)}),E.quit=function(C){process.exit(C)},E.inspect=function(){return"[Emscripten Module object]"}):H?(typeof read<"u"&&(E.read=function(u){return read(u)}),E.readBinary=function(u){var f;return typeof readbuffer=="function"?new Uint8Array(readbuffer(u)):(Ne(typeof(f=read(u,"binary"))=="object"),f)},typeof scriptArgs<"u"?E.arguments=scriptArgs:typeof arguments<"u"&&(E.arguments=arguments),typeof quit=="function"&&(E.quit=function(C){quit(C)})):(Ae||_)&&(Ae?document.currentScript&&(K=document.currentScript.src):K=self.location.href,K=K.indexOf("blob:")!==0?K.split("/").slice(0,-1).join("/")+"/":"",E.read=function(u){var f=new XMLHttpRequest;return f.open("GET",u,!1),f.send(null),f.responseText},_&&(E.readBinary=function(u){var f=new XMLHttpRequest;return f.open("GET",u,!1),f.responseType="arraybuffer",f.send(null),new Uint8Array(f.response)}),E.readAsync=function(u,f,w){var v=new XMLHttpRequest;v.open("GET",u,!0),v.responseType="arraybuffer",v.onload=function(){if(v.status==200||v.status==0&&v.response){f(v.response);return}w()},v.onerror=w,v.send(null)},E.setWindowTitle=function(C){document.title=C});var le=E.print||(typeof console<"u"?console.log.bind(console):typeof print<"u"?print:null),ge=E.printErr||(typeof printErr<"u"?printErr:typeof console<"u"&&console.warn.bind(console)||le);for(A in ee)ee.hasOwnProperty(A)&&(E[A]=ee[A]);function O(C){var u=l;return l=l+C+15&-16,u}function D(C){var u=i[G>>2],f=u+C+15&-16;return i[G>>2]=f,f>=Se&&!st()?(i[G>>2]=u,0):u}function b(C,u){return u||(u=16),C=Math.ceil(C/u)*u}function P(C){switch(C){case"i1":case"i8":return 1;case"i16":return 2;case"i32":case"float":return 4;case"i64":case"double":return 8;default:if(C[C.length-1]==="*")return 4;if(C[0]!=="i")return 0;var u=parseInt(C.substr(1));return Ne(u%8==0),u/8}}function te(C){te.shown||(te.shown={}),te.shown[C]||(te.shown[C]=1,ge(C))}ee=void 0;var ie={"f64-rem":function(C,u){return C%u},debugger:function(){}},Te=[];function iA(C,u){for(var f=0,w=f;w<f+0;w++)if(!Te[w])return Te[w]=C,1+w;throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."}function ze(C){Te[C-1]=null}var _e={};function UA(C,u){if(C){Ne(u),_e[u]||(_e[u]={});var f=_e[u];return f[C]||(u.length===1?f[C]=function(){return $(u,C)}:u.length===2?f[C]=function(v){return $(u,C,[v])}:f[C]=function(){return $(u,C,Array.prototype.slice.call(arguments))}),f[C]}}function oA(C,u,f){return f?+(C>>>0)+4294967296*+(u>>>0):+(C>>>0)+4294967296*+(0|u)}function $(C,u,f){return f&&f.length?E["dynCall_"+C].apply(null,[u].concat(f)):E["dynCall_"+C].call(null,u)}var ce=0,$e=0;function Ne(C,u){C||hA("Assertion failed: "+u)}function BA(C){var u=E["_"+C];return Ne(u,"Cannot call unknown function "+C+", make sure it is exported"),u}var dA={stackSave:function(){an()},stackRestore:function(){sn()},arrayToC:function(C){var u,f,w=wt(C.length);return u=C,f=w,s.set(u,f),w},stringToC:function(C){var u=0;if(C!=null&&C!==0){var f=(C.length<<2)+1;u=wt(f),tt(C,u,f)}return u}},et={string:dA.stringToC,array:dA.arrayToC};function TA(C,u,f,w,v){var j=BA(C),se=[],N=0;if(w)for(var Fe=0;Fe<w.length;Fe++){var Be=et[f[Fe]];Be?(N===0&&(N=an()),se[Fe]=Be(w[Fe])):se[Fe]=w[Fe]}var de,Ee=j.apply(null,se);return Ee=(de=Ee,u==="string"?QA(de):u==="boolean"?!!de:de),N!==0&&sn(N),Ee}function At(C,u,f,w){switch((f=f||"i8").charAt(f.length-1)==="*"&&(f="i32"),f){case"i1":case"i8":s[C>>0]=u;break;case"i16":o[C>>1]=u;break;case"i32":i[C>>2]=u;break;case"i64":tempI64=[u>>>0,+La(tempDouble=u)>=1?tempDouble>0?(0|Ua(+ds(tempDouble/4294967296),4294967295))>>>0:~~+va((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0],i[C>>2]=tempI64[0],i[C+4>>2]=tempI64[1];break;case"float":c[C>>2]=u;break;case"double":Q[C>>3]=u;break;default:hA("invalid type for setValue: "+f)}}function jt(C,u,f){switch((u=u||"i8").charAt(u.length-1)==="*"&&(u="i32"),u){case"i1":case"i8":return s[C>>0];case"i16":return o[C>>1];case"i32":case"i64":return i[C>>2];case"float":return c[C>>2];case"double":return Q[C>>3];default:hA("invalid type for getValue: "+u)}return null}function zt(C,u,f,w){typeof C=="number"?(j=!0,se=C):(j=!1,se=C.length);var v=typeof u=="string"?u:null;if(N=f==4?w:[typeof Ft=="function"?Ft:O,wt,O,D][f===void 0?2:f](Math.max(se,v?1:u.length)),j){for(w=N,Ne((3&N)==0),Fe=N+(-4&se);w<Fe;w+=4)i[w>>2]=0;for(Fe=N+se;w<Fe;)s[w++>>0]=0;return N}if(v==="i8")return C.subarray||C.slice?a.set(C,N):a.set(new Uint8Array(C),N),N;for(var j,se,N,Fe,Be,de,Ee,X=0;X<se;){var Le=C[X];if((Be=v||u[X])===0){X++;continue}Be=="i64"&&(Be="i32"),At(N+X,Le,Be),Ee!==Be&&(de=P(Be),Ee=Be),X+=de}return N}function NA(C){return d?tn?Ft(C):D(C):O(C)}function QA(C,u){if(u===0||!C)return"";for(var f,w,v,j=0,se=0;j|=w=a[C+se>>0],(w!=0||u)&&(se++,!u||se!=u););u||(u=se);var N="";if(j<128){for(;u>0;)v=String.fromCharCode.apply(String,a.subarray(C,C+Math.min(u,1024))),N=N?N+v:v,C+=1024,u-=1024;return N}return f=C,(function(Be,de){for(var Ee=de;Be[Ee];)++Ee;if(Ee-de>16&&Be.subarray&&ft)return ft.decode(Be.subarray(de,Ee));for(var X,Le,Ye,qe,Oe,RA,Pe="";;){if(!(X=Be[de++]))return Pe;if(!(128&X)){Pe+=String.fromCharCode(X);continue}if(Le=63&Be[de++],(224&X)==192){Pe+=String.fromCharCode((31&X)<<6|Le);continue}if(Ye=63&Be[de++],(240&X)==224?X=(15&X)<<12|Le<<6|Ye:(qe=63&Be[de++],(248&X)==240?X=(7&X)<<18|Le<<12|Ye<<6|qe:(Oe=63&Be[de++],X=(252&X)==248?(3&X)<<24|Le<<18|Ye<<12|qe<<6|Oe:(1&X)<<30|Le<<24|Ye<<18|qe<<12|Oe<<6|(RA=63&Be[de++]))),X<65536)Pe+=String.fromCharCode(X);else{var rt=X-65536;Pe+=String.fromCharCode(55296|rt>>10,56320|1023&rt)}}})(a,f)}function Je(C){for(var u="";;){var f=s[C++>>0];if(!f)return u;u+=String.fromCharCode(f)}}function _t(C,u){return(function(w,v,j){for(var se=0;se<w.length;++se)s[v++>>0]=w.charCodeAt(se);j||(s[v>>0]=0)})(C,u,!1)}var ft=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function JA(C,u,f,w){if(!(w>0))return 0;for(var v=f,j=f+w-1,se=0;se<C.length;++se){var N=C.charCodeAt(se);if(N>=55296&&N<=57343&&(N=65536+((1023&N)<<10)|1023&C.charCodeAt(++se)),N<=127){if(f>=j)break;u[f++]=N}else if(N<=2047){if(f+1>=j)break;u[f++]=192|N>>6,u[f++]=128|63&N}else if(N<=65535){if(f+2>=j)break;u[f++]=224|N>>12,u[f++]=128|N>>6&63,u[f++]=128|63&N}else if(N<=2097151){if(f+3>=j)break;u[f++]=240|N>>18,u[f++]=128|N>>12&63,u[f++]=128|N>>6&63,u[f++]=128|63&N}else if(N<=67108863){if(f+4>=j)break;u[f++]=248|N>>24,u[f++]=128|N>>18&63,u[f++]=128|N>>12&63,u[f++]=128|N>>6&63,u[f++]=128|63&N}else{if(f+5>=j)break;u[f++]=252|N>>30,u[f++]=128|N>>24&63,u[f++]=128|N>>18&63,u[f++]=128|N>>12&63,u[f++]=128|N>>6&63,u[f++]=128|63&N}}return u[f]=0,f-v}function tt(C,u,f){return JA(C,a,u,f)}function De(C){for(var u=0,f=0;f<C.length;++f){var w=C.charCodeAt(f);w>=55296&&w<=57343&&(w=65536+((1023&w)<<10)|1023&C.charCodeAt(++f)),w<=127?++u:w<=2047?u+=2:w<=65535?u+=3:w<=2097151?u+=4:w<=67108863?u+=5:u+=6}return u}var rA=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function nt(C){for(var u=C,f=u>>1;o[f];)++f;if((u=f<<1)-C>32&&rA)return rA.decode(a.subarray(C,u));for(var w=0,v="";;){var j=o[C+2*w>>1];if(j==0)return v;++w,v+=String.fromCharCode(j)}}function $t(C,u,f){if(f===void 0&&(f=2147483647),f<2)return 0;for(var w=u,v=(f-=2)<2*C.length?f/2:C.length,j=0;j<v;++j){var se=C.charCodeAt(j);o[u>>1]=se,u+=2}return o[u>>1]=0,u-w}function IA(C){return 2*C.length}function mt(C){for(var u=0,f="";;){var w=i[C+4*u>>2];if(w==0)return f;if(++u,w>=65536){var v=w-65536;f+=String.fromCharCode(55296|v>>10,56320|1023&v)}else f+=String.fromCharCode(w)}}function pt(C,u,f){if(f===void 0&&(f=2147483647),f<4)return 0;for(var w=u,v=w+f-4,j=0;j<C.length;++j){var se=C.charCodeAt(j);if(se>=55296&&se<=57343&&(se=65536+((1023&se)<<10)|1023&C.charCodeAt(++j)),i[u>>2]=se,(u+=4)+4>v)break}return i[u>>2]=0,u-w}function cs(C){for(var u=0,f=0;f<C.length;++f){var w=C.charCodeAt(f);w>=55296&&w<=57343&&++f,u+=4}return u}function Es(C){var u=De(C)+1,f=Ft(u);return f&&JA(C,s,f,u),f}function St(C){var u=De(C)+1,f=wt(u);return JA(C,s,f,u),f}function kA(C){return C}function en(){var C,u=(function(){var w=Error();if(!w.stack){try{throw Error(0)}catch(v){w=v}if(!w.stack)return"(no stack trace available)"}return w.stack.toString()})();return E.extraStackTrace&&(u+=`
`+E.extraStackTrace()),(C=u).replace(/__Z[\w\d_]+/g,function(f){var w,v=w=f;return f===v?f:f+" ["+v+"]"})}function gA(C,u){return C%u>0&&(C+=u-C%u),C}function KA(C){E.buffer=n=C}function FA(){E.HEAP8=s=new Int8Array(n),E.HEAP16=o=new Int16Array(n),E.HEAP32=i=new Int32Array(n),E.HEAPU8=a=new Uint8Array(n),E.HEAPU16=r=new Uint16Array(n),E.HEAPU32=g=new Uint32Array(n),E.HEAPF32=c=new Float32Array(n),E.HEAPF64=Q=new Float64Array(n)}function st(){var C=E.usingWasm?65536:16777216,u=2147483648-C;if(i[G>>2]>u)return!1;var f=Se;for(Se=Math.max(Se,16777216);Se<i[G>>2];)Se=Se<=536870912?gA(2*Se,C):Math.min(gA((3*Se+2147483648)/4,C),u);var w=E.reallocBuffer(Se);return w&&w.byteLength==Se?(KA(w),FA(),!0):(Se=f,!1)}B=l=p=m=F=k=G=0,d=!1,E.reallocBuffer||(E.reallocBuffer=function(C){try{if(ArrayBuffer.transfer)u=ArrayBuffer.transfer(n,C);else{var u,f=s;u=new ArrayBuffer(C),new Int8Array(u).set(f)}}catch{return!1}return!!Ta(u)&&u});try{(x=Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get))(new ArrayBuffer(4))}catch{x=function(u){return u.byteLength}}var xA=E.TOTAL_STACK||5242880,Se=E.TOTAL_MEMORY||16777216;function yt(){return Se}function uA(C){for(;C.length>0;){var u=C.shift();if(typeof u=="function"){u();continue}var f=u.func;typeof f=="number"?u.arg===void 0?E.dynCall_v(f):E.dynCall_vi(f,u.arg):f(u.arg===void 0?null:u.arg)}}Se<xA&&ge("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+Se+"! (TOTAL_STACK="+xA+")"),E.buffer?n=E.buffer:(typeof WebAssembly=="object"&&typeof WebAssembly.Memory=="function"?(E.wasmMemory=new WebAssembly.Memory({initial:Se/65536}),n=E.wasmMemory.buffer):n=new ArrayBuffer(Se),E.buffer=n),FA();var at=[],An=[],ls=[],Cs=[],Bs=[],tn=!1,Ma=!1;function Ga(C){at.unshift(C)}function qo(C){An.unshift(C)}function Oo(C){ls.unshift(C)}function Po(C){Cs.unshift(C)}function ba(C){Bs.unshift(C)}function Ho(C,u,f){var w,v;te("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!"),f&&(w=s[v=u+De(C)]),tt(C,u,1/0),f&&(s[v]=w)}function Wo(C,u,f){return C>=0?C:u<=32?2*Math.abs(1<<u-1)+C:Math.pow(2,u)+C}function Zo(C,u,f){if(C<=0)return C;var w=u<=32?Math.abs(1<<u-1):Math.pow(2,u-1);return C>=w&&(u<=32||C>w)&&(C=-2*w+C),C}var La=Math.abs,va=Math.ceil,ds=Math.floor,Ua=Math.min,wA=0,nn=null,it=null;function Xo(C){return C}E.preloadedImages={},E.preloadedAudios={};var Qs="data:application/octet-stream;base64,";function kt(C){return String.prototype.startsWith?C.startsWith(Qs):C.indexOf(Qs)===0}(function(){var u="main.wast",f="main.wasm",w="main.temp.asm";kt(u)||(u=W(u)),kt(f)||(f=W(f)),kt(w)||(w=W(w));var v={global:null,env:null,asm2wasm:ie,parent:E},j=null;function se(Ee){return Ee}function N(){try{if(E.wasmBinary)return new Uint8Array(E.wasmBinary);if(E.readBinary)return E.readBinary(f);throw"both async and sync fetching of the wasm failed"}catch(Ee){hA(Ee)}}E.asmPreload=E.asm;var Fe=E.reallocBuffer,Be=function(Ee){Ee=gA(Ee,E.usingWasm?65536:16777216);var X=E.buffer.byteLength;if(E.usingWasm)try{var Le=E.wasmMemory.grow((Ee-X)/65536);return Le!==-1?E.buffer=E.wasmMemory.buffer:null}catch{return null}};E.reallocBuffer=function(Ee){return de==="asmjs"?Fe(Ee):Be(Ee)};var de="";E.asm=function(Ee,X,Le){var Ye;if(!(X=Ye=X).table){var qe,Oe=E.wasmTableSize;Oe===void 0&&(Oe=1024);var RA=E.wasmMaxTableSize;typeof WebAssembly=="object"&&typeof WebAssembly.Table=="function"?RA!==void 0?X.table=new WebAssembly.Table({initial:Oe,maximum:RA,element:"anyfunc"}):X.table=new WebAssembly.Table({initial:Oe,element:"anyfunc"}):X.table=Array(Oe),E.wasmTable=X.table}return X.memoryBase||(X.memoryBase=E.STATIC_BASE),X.tableBase||(X.tableBase=0),qe=(function(rt,VA,rn){if(typeof WebAssembly!="object")return ge("no native wasm support detected"),!1;if(!(E.wasmMemory instanceof WebAssembly.Memory))return ge("no native wasm Memory in use"),!1;function Rt(eA,AA){if((j=eA.exports).memory){var It,In,ms;It=j.memory,In=E.buffer,It.byteLength<In.byteLength&&ge("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here"),ms=new Int8Array(In),new Int8Array(It).set(ms),KA(It),FA()}E.asm=j,E.usingWasm=!0,(function(tr){if(wA--,E.monitorRunDependencies&&E.monitorRunDependencies(wA),wA==0&&(nn!==null&&(clearInterval(nn),nn=null),it)){var Na=it;it=null,Na()}})("wasm-instantiate")}if(VA.memory=E.wasmMemory,v.global={NaN:NaN,Infinity:1/0},v["global.Math"]=Math,v.env=VA,wA++,E.monitorRunDependencies&&E.monitorRunDependencies(wA),E.instantiateWasm)try{return E.instantiateWasm(v,Rt)}catch(eA){return ge("Module.instantiateWasm callback failed with error: "+eA),!1}function YA(eA){Rt(eA.instance,eA.module)}function fs(eA){(!E.wasmBinary&&(Ae||_)&&typeof fetch=="function"?fetch(f,{credentials:"same-origin"}).then(function(AA){if(!AA.ok)throw"failed to load wasm binary file at '"+f+"'";return AA.arrayBuffer()}).catch(function(){return N()}):new Promise(function(AA,It){AA(N())})).then(function(AA){return WebAssembly.instantiate(AA,v)}).then(eA).catch(function(AA){ge("failed to asynchronously prepare wasm: "+AA),hA(AA)})}return E.wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||kt(f)||typeof fetch!="function"?fs(YA):WebAssembly.instantiateStreaming(fetch(f,{credentials:"same-origin"}),v).then(YA).catch(function(eA){ge("wasm streaming compile failed: "+eA),ge("falling back to ArrayBuffer instantiation"),fs(YA)}),{}})(Ee,X,Le),Ne(qe,"no binaryen method succeeded."),qe},E.asm})(),l=(B=1024)+4816,An.push(),E.STATIC_BASE=B,E.STATIC_BUMP=4816;var Ke=l;function jo(C){s[Ke]=s[C],s[Ke+1]=s[C+1],s[Ke+2]=s[C+2],s[Ke+3]=s[C+3]}function zo(C){s[Ke]=s[C],s[Ke+1]=s[C+1],s[Ke+2]=s[C+2],s[Ke+3]=s[C+3],s[Ke+4]=s[C+4],s[Ke+5]=s[C+5],s[Ke+6]=s[C+6],s[Ke+7]=s[C+7]}function _o(C,u,f){var w=f>0?f:De(C)+1,v=Array(w),j=JA(C,v,0,v.length);return u&&(v.length=j),v}function $o(C){for(var u=[],f=0;f<C.length;f++){var w=C[f];w>255&&(w&=255),u.push(String.fromCharCode(w))}return u.join("")}l+=16,G=O(4),F=(p=m=b(l))+xA,k=b(F),i[G>>2]=k,d=!0,E.wasmTableSize=4,E.wasmMaxTableSize=4,E.asmGlobalArg={},E.asmLibraryArg={abort:hA,assert:Ne,enlargeMemory:st,getTotalMemory:yt,abortOnCannotGrowMemory:function(){hA("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+Se+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")},invoke_iii:function(u,f,w){var v=an();try{return E.dynCall_iii(u,f,w)}catch(j){if(sn(v),typeof j!="number"&&j!=="longjmp")throw j;E.setThrew(1,0)}},___assert_fail:function(u,f,w,v){hA("Assertion failed: "+QA(u)+", at: "+[f?QA(f):"unknown filename",w,v?QA(v):"unknown function"])},___setErrNo:function(u){return E.___errno_location&&(i[E.___errno_location()>>2]=u),u},_abort:function(){E.abort()},_emscripten_memcpy_big:function(u,f,w){return a.set(a.subarray(f,f+w),u),u},_llvm_floor_f64:ds,DYNAMICTOP_PTR:G,tempDoublePtr:Ke,ABORT:ce,STACKTOP:m,STACK_MAX:F};var us=E.asm(E.asmGlobalArg,E.asmLibraryArg,n);E.asm=us,E.___errno_location=function(){return E.asm.___errno_location.apply(null,arguments)};var Ta=E._emscripten_replace_memory=function(){return E.asm._emscripten_replace_memory.apply(null,arguments)};E._free=function(){return E.asm._free.apply(null,arguments)};var Ft=E._malloc=function(){return E.asm._malloc.apply(null,arguments)};E._memcpy=function(){return E.asm._memcpy.apply(null,arguments)},E._memset=function(){return E.asm._memset.apply(null,arguments)},E._sbrk=function(){return E.asm._sbrk.apply(null,arguments)},E._stb_vorbis_js_channels=function(){return E.asm._stb_vorbis_js_channels.apply(null,arguments)},E._stb_vorbis_js_close=function(){return E.asm._stb_vorbis_js_close.apply(null,arguments)},E._stb_vorbis_js_decode=function(){return E.asm._stb_vorbis_js_decode.apply(null,arguments)},E._stb_vorbis_js_open=function(){return E.asm._stb_vorbis_js_open.apply(null,arguments)},E._stb_vorbis_js_sample_rate=function(){return E.asm._stb_vorbis_js_sample_rate.apply(null,arguments)},E.establishStackSpace=function(){return E.asm.establishStackSpace.apply(null,arguments)},E.getTempRet0=function(){return E.asm.getTempRet0.apply(null,arguments)},E.runPostSets=function(){return E.asm.runPostSets.apply(null,arguments)},E.setTempRet0=function(){return E.asm.setTempRet0.apply(null,arguments)},E.setThrew=function(){return E.asm.setThrew.apply(null,arguments)};var wt=E.stackAlloc=function(){return E.asm.stackAlloc.apply(null,arguments)},sn=E.stackRestore=function(){return E.asm.stackRestore.apply(null,arguments)},an=E.stackSave=function(){return E.asm.stackSave.apply(null,arguments)};function ot(C){this.name="ExitStatus",this.message="Program terminated with exit("+C+")",this.status=C}function on(C){C=C||E.arguments,!(wA>0)&&((function(){if(E.preRun)for(typeof E.preRun=="function"&&(E.preRun=[E.preRun]);E.preRun.length;)Ga(E.preRun.shift());uA(at)})(),!(wA>0)&&(E.calledRun||(E.setStatus?(E.setStatus("Running..."),setTimeout(function(){setTimeout(function(){E.setStatus("")},1),u()},1)):u())));function u(){!E.calledRun&&(E.calledRun=!0,ce||(tn||(tn=!0,uA(An)),uA(ls),E.onRuntimeInitialized&&E.onRuntimeInitialized(),(function(){if(E.postRun)for(typeof E.postRun=="function"&&(E.postRun=[E.postRun]);E.postRun.length;)ba(E.postRun.shift());uA(Bs)})()))}}function er(C,u){(!u||!E.noExitRuntime||C!==0)&&(E.noExitRuntime||(ce=!0,$e=C,m=J,uA(Cs),Ma=!0,E.onExit&&E.onExit(C)),E.quit(C,new ot(C)))}function hA(C){throw E.onAbort&&E.onAbort(C),C!==void 0?(le(C),ge(C),C=JSON.stringify(C)):C="",ce=!0,$e=1,"abort("+C+"). Build with -s ASSERTIONS=1 for more info."}if(E.dynCall_iii=function(){return E.asm.dynCall_iii.apply(null,arguments)},E.asm=us,E.ccall=TA,E.cwrap=function(u,f,w,v){var j=(w=w||[]).every(function(se){return se==="number"});return f!=="string"&&j&&!v?BA(u):function(){return TA(u,f,w,arguments,v)}},ot.prototype=Error(),ot.prototype.constructor=ot,it=function C(){E.calledRun||on(),E.calledRun||(it=C)},E.run=on,E.abort=hA,E.preInit)for(typeof E.preInit=="function"&&(E.preInit=[E.preInit]);E.preInit.length>0;)E.preInit.pop()();E.noExitRuntime=!0,on(),E.onRuntimeInitialized=()=>{ws=!0,ta()},dt.decode=function(C){return(function(f){if(!ws)throw Error("SF3 decoder has not been initialized yet. Did you await synth.isReady?");var w={};function v(VA){return new Int32Array(E.HEAPU8.buffer,VA,1)[0]}function j(VA,rn){var Rt=new ArrayBuffer(rn*Float32Array.BYTES_PER_ELEMENT),YA=new Float32Array(Rt);return YA.set(new Float32Array(E.HEAPU8.buffer,VA,rn)),YA}w.open=E.cwrap("stb_vorbis_js_open","number",[]),w.close=E.cwrap("stb_vorbis_js_close","void",["number"]),w.channels=E.cwrap("stb_vorbis_js_channels","number",["number"]),w.sampleRate=E.cwrap("stb_vorbis_js_sample_rate","number",["number"]),w.decode=E.cwrap("stb_vorbis_js_decode","number",["number","number","number","number","number"]);var se,N,Fe,Be,de=w.open(),Ee=(se=f,N=f.byteLength,Fe=E._malloc(N),(Be=new Uint8Array(E.HEAPU8.buffer,Fe,N)).set(new Uint8Array(se,0,N)),Be),X=E._malloc(4),Le=E._malloc(4),Ye=w.decode(de,Ee.byteOffset,Ee.byteLength,X,Le);if(E._free(Ee.byteOffset),Ye<0)throw w.close(de),E._free(X),Error("stbvorbis decode failed: "+Ye);for(var qe=w.channels(de),Oe=Array(qe),RA=new Int32Array(E.HEAPU32.buffer,v(X),qe),Pe=0;Pe<qe;Pe++)Oe[Pe]=j(RA[Pe],Ye),E._free(RA[Pe]);var rt=w.sampleRate(de);return w.close(de),E._free(v(X)),E._free(X),{data:Oe,sampleRate:rt,eof:!0,error:null}})(C)}})();var Pt=dt,as=-15e3,yi=15e3,Dn=new Float32Array(yi-as+1);for(let A=0;A<Dn.length;A++){let e=as+A;Dn[A]=Math.pow(2,e/1200)}function fA(A){return A<=-32767?0:Dn[A-as]}var xt=-2e4,na=16500,Mn=new Float32Array(na-xt+1);for(let A=0;A<Mn.length;A++){let e=xt+A;Mn[A]=440*Math.pow(2,(e-6900)/1200)}function Gn(A){return A<xt||A>na?440*Math.pow(2,(A-6900)/1200):Mn[~~A-xt]}var is=-1660,ki=1600,bn=new Float32Array((ki-is)*100+1);for(let A=0;A<bn.length;A++){let e=(is*100+A)/100;bn[A]=Math.pow(10,-e/20)}function tA(A){return bn[Math.floor((A-is)*100)]}var Fi=.01,xe=100,ln=90,wi=15e-6,LA=class sa{sampleRate;currentAttenuationDb=xe;state=0;attenuation=0;attenuationTargetGain=0;currentSampleTime=0;releaseStartDb=xe;releaseStartTimeSamples=0;currentReleaseGain=1;attackDuration=0;decayDuration=0;releaseDuration=0;attenuationTarget=0;sustainDbRelative=0;delayEnd=0;attackEnd=0;holdEnd=0;decayEnd=0;canEndOnSilentSustain;constructor(e,t){this.sampleRate=e,this.canEndOnSilentSustain=t/10>=ln}static startRelease(e){e.volumeEnvelope.releaseStartTimeSamples=e.volumeEnvelope.currentSampleTime,e.volumeEnvelope.currentReleaseGain=tA(e.volumeEnvelope.currentAttenuationDb),sa.recalculate(e)}static recalculate(e){let t=e.volumeEnvelope,n=g=>Math.max(0,Math.floor(fA(g)*t.sampleRate));t.attenuationTarget=Math.max(0,Math.min(e.modulatedGenerators[I.initialAttenuation],1440))/10,t.attenuationTargetGain=tA(t.attenuationTarget),t.sustainDbRelative=Math.min(xe,e.modulatedGenerators[I.sustainVolEnv]/10);let s=Math.min(xe,t.sustainDbRelative);t.attackDuration=n(e.modulatedGenerators[I.attackVolEnv]);let a=e.modulatedGenerators[I.decayVolEnv],o=(60-e.targetKey)*e.modulatedGenerators[I.keyNumToVolEnvDecay],r=s/xe;t.decayDuration=n(a+o)*r,t.releaseDuration=n(Math.max(-7200,e.modulatedGenerators[I.releaseVolEnv])),t.delayEnd=n(e.modulatedGenerators[I.delayVolEnv]),t.attackEnd=t.attackDuration+t.delayEnd;let i=(60-e.targetKey)*e.modulatedGenerators[I.keyNumToVolEnvHold];if(t.holdEnd=n(e.modulatedGenerators[I.holdVolEnv]+i)+t.attackEnd,t.decayEnd=t.decayDuration+t.holdEnd,t.state===0&&t.attackEnd===0&&(t.state=2),e.isInRelease){let g=Math.max(0,Math.min(xe,t.sustainDbRelative)),c=g/xe;switch(t.decayDuration=n(a+o)*c,t.state){case 0:t.releaseStartDb=xe;break;case 1:{let B=1-(t.attackEnd-t.releaseStartTimeSamples)/t.attackDuration;t.releaseStartDb=20*Math.log10(B)*-1;break}case 2:t.releaseStartDb=0;break;case 3:t.releaseStartDb=(1-(t.decayEnd-t.releaseStartTimeSamples)/t.decayDuration)*g;break;case 4:t.releaseStartDb=g;break}t.releaseStartDb=Math.max(0,Math.min(t.releaseStartDb,xe)),t.releaseStartDb>=ln&&(e.finished=!0),t.currentReleaseGain=tA(t.releaseStartDb);let Q=(xe-t.releaseStartDb)/xe;t.releaseDuration*=Q}}static apply(e,t,n,s){let a=e.volumeEnvelope,o=n/10,r=s;if(e.isInRelease){let g=a.currentSampleTime-a.releaseStartTimeSamples;if(g>=a.releaseDuration){for(let Q=0;Q<t.length;Q++)t[Q]=0;e.finished=!0;return}let c=xe-a.releaseStartDb;for(let Q=0;Q<t.length;Q++){a.attenuation+=(a.attenuationTargetGain-a.attenuation)*r;let B=g/a.releaseDuration*c+a.releaseStartDb;a.currentReleaseGain=a.attenuation*tA(B+o),t[Q]*=a.currentReleaseGain,a.currentSampleTime++,g++}a.currentReleaseGain<=wi&&(e.finished=!0);return}let i=0;switch(a.state){case 0:for(;a.currentSampleTime<a.delayEnd;)if(a.currentAttenuationDb=xe,t[i]=0,a.currentSampleTime++,++i>=t.length)return;a.state++;case 1:for(;a.currentSampleTime<a.attackEnd;){a.attenuation+=(a.attenuationTargetGain-a.attenuation)*r;let g=1-(a.attackEnd-a.currentSampleTime)/a.attackDuration;if(t[i]*=g*a.attenuation*tA(o),a.currentAttenuationDb=0,a.currentSampleTime++,++i>=t.length)return}a.state++;case 2:for(;a.currentSampleTime<a.holdEnd;)if(a.attenuation+=(a.attenuationTargetGain-a.attenuation)*r,t[i]*=a.attenuation*tA(o),a.currentAttenuationDb=0,a.currentSampleTime++,++i>=t.length)return;a.state++;case 3:for(;a.currentSampleTime<a.decayEnd;)if(a.attenuation+=(a.attenuationTargetGain-a.attenuation)*r,a.currentAttenuationDb=(1-(a.decayEnd-a.currentSampleTime)/a.decayDuration)*a.sustainDbRelative,t[i]*=a.attenuation*tA(a.currentAttenuationDb+o),a.currentSampleTime++,++i>=t.length)return;a.state++;case 4:for(a.canEndOnSilentSustain&&a.sustainDbRelative>=ln&&(e.finished=!0);;)if(a.attenuation+=(a.attenuationTargetGain-a.attenuation)*r,t[i]*=a.attenuation*tA(a.sustainDbRelative+o),a.currentAttenuationDb=a.sustainDbRelative,a.currentSampleTime++,++i>=t.length)return}}};function Ri(A,e){switch(this.privateProps.masterParameters[A]=e,A){case"masterPan":{let t=e;t=t/2+.5,this.privateProps.panLeft=1-t,this.privateProps.panRight=t;break}case"masterGain":break;case"voiceCap":break;case"interpolationType":break;case"midiSystem":break;case"monophonicRetriggerMode":break;case"transposition":{let t=e;this.privateProps.masterParameters.transposition=0;for(let n of this.midiChannels)n.transposeChannel(t);this.privateProps.masterParameters.transposition=t}}this.callEvent("masterParameterChange",{parameter:A,value:e})}function Di(A){return this.privateProps.masterParameters[A]}function Mi(){return{...this.privateProps.masterParameters}}function bA(A,e){return(A>>e&1)>0}function Cn(A){return A?1:0}var ve=16384,Vt=Object.keys(Qe).length,aa=4,EA=new Float32Array(ve+1),vA=new Float32Array(ve+1);EA[0]=0;EA[EA.length-1]=1;vA[0]=0;vA[vA.length-1]=1;for(let A=1;A<ve-1;A++){let e=-.4166666666666667*Math.log(A/(EA.length-1))/Math.LN10;vA[A]=1-e,EA[EA.length-1-A]=e}function ia(A,e,t){let n=!!(A&2);switch(!!(A&1)&&(t=1-t),e){case Qe.linear:return n?t*2-1:t;case Qe.switch:return t=t>.5?1:0,n?t*2-1:t;case Qe.concave:return n?(t=t*2-1,t<0?-EA[~~(t*-ve)]:EA[~~(t*ve)]):EA[~~(t*ve)];case Qe.convex:return n?(t=t*2-1,t<0?-vA[~~(t*-ve)]:vA[~~(t*ve)]):vA[~~(t*ve)]}}var Ze=class Ln{isBipolar;isNegative;index;isCC;curveType;constructor(e=z.noController,t=Qe.linear,n=!1,s=!1,a=!1){this.isBipolar=s,this.isNegative=a,this.index=e,this.isCC=n,this.curveType=t}get sourceName(){return this.isCC?Object.keys(S).find(e=>S[e]===this.index)??this.index.toString():Object.keys(z).find(e=>z[e]===this.index)??this.index.toString()}get curveTypeName(){return Object.keys(Qe).find(e=>Qe[e]===this.curveType)??this.curveType.toString()}static fromSourceEnum(e){let t=bA(e,9),n=bA(e,8),s=bA(e,7),a=e&127,o=e>>10&3;return new Ln(a,o,s,t,n)}static copyFrom(e){return new Ln(e.index,e.curveType,e.isCC,e.isBipolar,e.isNegative)}toString(){return`${this.sourceName} ${this.curveTypeName} ${this.isBipolar?"bipolar":"unipolar"} ${this.isNegative?"negative":"positive"}`}toSourceEnum(){return this.curveType<<10|Cn(this.isBipolar)<<9|Cn(this.isNegative)<<8|Cn(this.isCC)<<7|this.index}isIdentical(e){return this.index===e.index&&this.isNegative===e.isNegative&&this.isCC===e.isCC&&this.isBipolar===e.isBipolar&&this.curveType===e.curveType}getValue(e,t){let n;if(this.isCC)n=e[this.index];else switch(this.index){case z.noController:n=16383;break;case z.noteOnKeyNum:n=t.midiNote<<7;break;case z.noteOnVelocity:n=t.velocity<<7;break;case z.polyPressure:n=t.pressure<<7;break;default:n=e[this.index+me];break}let s=(this.isBipolar?2:0)|(this.isNegative?1:0);return oa[ve*(this.curveType*Vt+s)+n]}},oa=new Float32Array(ve*aa*Vt);for(let A=0;A<Vt;A++)for(let e=0;e<aa;e++){let t=ve*(A*Vt+e);for(let n=0;n<ve;n++)oa[t+n]=ia(e,A,n/ve)}var SA=10;function cA(A,e,t,n,s){return new Ze(s,A,n,e,t).toSourceEnum()}var ra=cA(Qe.linear,!0,!1,!0,S.filterResonance),he=class vn{currentValue=0;destination=I.initialAttenuation;transformAmount=0;transformType=0;isEffectModulator=!1;isDefaultResonantModulator=!1;primarySource;secondarySource;constructor(e=new Ze,t=new Ze,n=I.INVALID,s=0,a=0,o=!1,r=!1){this.primarySource=e,this.secondarySource=t,this.destination=n,this.transformAmount=s,this.transformType=a,this.isEffectModulator=o,this.isDefaultResonantModulator=r}get destinationName(){return Object.keys(I).find(e=>I[e]===this.destination)}static isIdentical(e,t,n=!1){return e.primarySource.isIdentical(t.primarySource)&&e.secondarySource.isIdentical(t.secondarySource)&&e.destination===t.destination&&e.transformType===t.transformType&&(!n||e.transformAmount===t.transformAmount)}static copyFrom(e){return new vn(Ze.copyFrom(e.primarySource),Ze.copyFrom(e.secondarySource),e.destination,e.transformAmount,e.transformType,e.isEffectModulator,e.isDefaultResonantModulator)}toString(){return`Source: ${this.primarySource.toString()}
Secondary source: ${this.secondarySource.toString()}
to: ${this.destinationName}
amount: ${this.transformAmount}`+(this.transformType===2?"absolute value":"")}write(e,t){q(e,this.primarySource.toSourceEnum()),q(e,this.destination),q(e,this.transformAmount),q(e,this.secondarySource.toSourceEnum()),q(e,this.transformType),t&&t.mod++}sumTransform(e){let t=vn.copyFrom(this);return t.transformAmount+=e.transformAmount,t}},ye=class extends he{constructor(A,e,t,n,s){let a=(A===219||A===221)&&e===0&&(t===I.reverbEffectsSend||t===I.chorusEffectsSend),o=A===ra&&e===0&&t===I.initialFilterQ;super(Ze.fromSourceEnum(A),Ze.fromSourceEnum(e),t,n,s,a,o),this.destination>Bi&&(this.destination=I.INVALID)}},Bn=960,dn=Qe.concave,Gi=[new ye(cA(dn,!1,!0,!1,z.noteOnVelocity),0,I.initialAttenuation,Bn,0),new ye(129,0,I.vibLfoToPitch,50,0),new ye(cA(dn,!1,!0,!0,S.mainVolume),0,I.initialAttenuation,Bn,0),new ye(13,0,I.vibLfoToPitch,50,0),new ye(526,16,I.fineTune,12700,0),new ye(650,0,I.pan,500,0),new ye(cA(dn,!1,!0,!0,S.expressionController),0,I.initialAttenuation,Bn,0),new ye(219,0,I.reverbEffectsSend,200,0),new ye(221,0,I.chorusEffectsSend,200,0)],bi=[new ye(cA(Qe.linear,!1,!1,!1,z.polyPressure),0,I.vibLfoToPitch,50,0),new ye(cA(Qe.linear,!1,!1,!0,S.tremoloDepth),0,I.modLfoToVolume,24,0),new ye(cA(Qe.convex,!0,!1,!0,S.attackTime),0,I.attackVolEnv,6e3,0),new ye(cA(Qe.linear,!0,!1,!0,S.releaseTime),0,I.releaseVolEnv,3600,0),new ye(cA(Qe.linear,!0,!1,!0,S.brightness),0,I.initialFilterFc,6e3,0),new ye(ra,0,I.initialFilterQ,250,0)],Ia=Gi.concat(bi),Ct=4,Re=class{generatorType;generatorValue=0;constructor(A,e,t=!0){if(this.generatorType=A,e===void 0)throw new Error("No value provided.");if(this.generatorValue=Math.round(e),t){let n=T[A];n!==void 0&&(this.generatorValue=Math.max(n.min,Math.min(n.max,this.generatorValue)))}}write(A,e){q(A,this.generatorType),q(A,this.generatorValue),e.gen++}toString(){return`${Object.keys(I).find(A=>I[A]===this.generatorType)}: ${this.generatorValue}`}};function Li(A,e,t){let n=T[A]||{min:0,max:32768,def:0},s=e.find(i=>i.generatorType===A),a=0;s&&(a=s.generatorValue);let o=t.find(i=>i.generatorType===A),r=n.def;return o&&(r=o.generatorValue),Math.max(-32767,Math.min(32767,r+a))}var Yt=4,Ht=class{velRange={min:-1,max:127};keyRange={min:-1,max:127};generators=[];modulators=[];get hasKeyRange(){return this.keyRange.min!==-1}get hasVelRange(){return this.velRange.min!==-1}get fineTuning(){let A=this.getGenerator(I.coarseTune,0),e=this.getGenerator(I.fineTune,0);return A*100+e}set fineTuning(A){let e=Math.trunc(A/100),t=A%100;this.setGenerator(I.coarseTune,e),this.setGenerator(I.fineTune,t)}addToGenerator(A,e,t=!0){let n=this.getGenerator(A,T[A].def);this.setGenerator(A,e+n,t)}setGenerator(A,e,t=!0){switch(A){case I.sampleID:throw new Error("Use setSample()");case I.instrument:throw new Error("Use setInstrument()");case I.velRange:case I.keyRange:throw new Error("Set the range manually")}if(e===null){this.generators=this.generators.filter(s=>s.generatorType!==A);return}let n=this.generators.findIndex(s=>s.generatorType===A);n>=0?this.generators[n]=new Re(A,e,t):this.addGenerators(new Re(A,e,t))}addGenerators(...A){A.forEach(e=>{switch(e.generatorType){default:this.generators.push(e);break;case I.sampleID:case I.instrument:break;case I.velRange:this.velRange.min=e.generatorValue&127,this.velRange.max=e.generatorValue>>8&127;break;case I.keyRange:this.keyRange.min=e.generatorValue&127,this.keyRange.max=e.generatorValue>>8&127}})}addModulators(...A){this.modulators.push(...A)}getGenerator(A,e){return this.generators.find(t=>t.generatorType===A)?.generatorValue??e}copyFrom(A){this.generators=A.generators.map(e=>new Re(e.generatorType,e.generatorValue,!1)),this.modulators=A.modulators.map(he.copyFrom.bind(he)),this.velRange={...A.velRange},this.keyRange={...A.keyRange}}getGenCount(){let A=this.generators.filter(e=>e.generatorType!==I.sampleID&&e.generatorType!==I.instrument&&e.generatorType!==I.keyRange&&e.generatorType!==I.velRange).length;return this.hasVelRange&&A++,this.hasKeyRange&&A++,A}write(A,e,t,n,s){let a=n.gen,o=n.mod;q(t.pdta,a&65535),q(t.pdta,o&65535),q(t.xdta,a>>16),q(t.xdta,o>>16),n.bag++,this.getWriteGenerators(s).forEach(i=>i.write(A,n)),this.modulators.forEach(i=>i.write(e,n))}getWriteGenerators(A){let e=this.generators.filter(t=>t.generatorType!==I.sampleID&&t.generatorType!==I.instrument&&t.generatorType!==I.keyRange&&t.generatorType!==I.velRange);if(!A)throw new Error("No bank provided! ");return this.hasVelRange&&e.unshift(new Re(I.velRange,this.velRange.max<<8|Math.max(this.velRange.min,0),!1)),this.hasKeyRange&&e.unshift(new Re(I.keyRange,this.keyRange.max<<8|Math.max(this.keyRange.min,0),!1)),e}},ga=class extends Ht{},ha=class extends Ht{parentPreset;constructor(A,e){super(),this.parentPreset=A,this._instrument=e,this._instrument.linkTo(this.parentPreset)}_instrument;get instrument(){return this._instrument}set instrument(A){this._instrument&&this._instrument.unlinkFrom(this.parentPreset),this._instrument=A,this._instrument.linkTo(this.parentPreset)}getGenCount(){return super.getGenCount()+1}getWriteGenerators(A){let e=super.getWriteGenerators(A);if(!A)throw new Error("Instrument ID cannot be determined without the sound bank itself.");let t=A.instruments.indexOf(this.instrument);if(t<0)throw new Error(`${this.instrument.name} does not exist in ${A.soundBankInfo.name}! Cannot write instrument generator.`);return e.push(new Re(I.instrument,t,!1)),e}},ca=class extends Ht{parentInstrument;useCount;constructor(A,e){super(),this.parentInstrument=A,this._sample=e,e.linkTo(this.parentInstrument),this.useCount=A.useCount}_sample;get sample(){return this._sample}set sample(A){this._sample&&this._sample.unlinkFrom(this.parentInstrument),this._sample=A,A.linkTo(this.parentInstrument)}getGenCount(){return super.getGenCount()+1}getWriteGenerators(A){let e=super.getWriteGenerators(A),t=A.samples.indexOf(this.sample);if(t<0)throw new Error(`${this.sample.name} does not exist in ${A.soundBankInfo.name}! Cannot write sampleID generator.`);return e.push(new Re(I.sampleID,t,!1)),e}},Ea=22,vi=new Set([I.velRange,I.keyRange,I.instrument,I.sampleID,I.exclusiveClass,I.endOper,I.sampleModes,I.startloopAddrsOffset,I.startloopAddrsCoarseOffset,I.endloopAddrsOffset,I.endloopAddrsCoarseOffset,I.startAddrsOffset,I.startAddrsCoarseOffset,I.endAddrOffset,I.endAddrsCoarseOffset,I.initialAttenuation,I.fineTune,I.coarseTune,I.keyNumToVolEnvHold,I.keyNumToVolEnvDecay,I.keyNumToModEnvHold,I.keyNumToModEnvDecay]),Qt=class{name="";zones=[];globalZone=new ga;linkedTo=[];get useCount(){return this.linkedTo.length}createZone(A){let e=new ca(this,A);return this.zones.push(e),e}linkTo(A){this.linkedTo.push(A),this.zones.forEach(e=>e.useCount++)}unlinkFrom(A){let e=this.linkedTo.indexOf(A);if(e<0){ne(`Cannot unlink ${A.name} from ${this.name}: not linked.`);return}this.linkedTo.splice(e,1),this.zones.forEach(t=>t.useCount--)}deleteUnusedZones(){this.zones=this.zones.filter(A=>{let e=A.useCount>0;return e||A.sample.unlinkFrom(this),e})}delete(){if(this.useCount>0)throw new Error(`Cannot delete an instrument that is used by: ${this.linkedTo.map(A=>A.name).toString()}.`);this.zones.forEach(A=>A.sample.unlinkFrom(this))}deleteZone(A,e=!1){let t=this.zones[A];return t.useCount-=1,t.useCount<1||e?(t.sample.unlinkFrom(this),this.zones.splice(A,1),!0):!1}globalize(){let A=this.globalZone;for(let n=0;n<58;n++){if(vi.has(n))continue;n=n;let s={},a=T[n]?.def||0;s[a]=0;for(let o of this.zones){let r=o.getGenerator(n,void 0);r!==void 0?s[r]===void 0?s[r]=1:s[r]++:s[a]++;let i;switch(n){default:continue;case I.decayVolEnv:i=I.keyNumToVolEnvDecay;break;case I.holdVolEnv:i=I.keyNumToVolEnvHold;break;case I.decayModEnv:i=I.keyNumToModEnvDecay;break;case I.holdModEnv:i=I.keyNumToModEnvHold}if(o.getGenerator(i,void 0)!==void 0){s={};break}}if(Object.keys(s).length>0){let r=Object.entries(s).reduce((g,c)=>g[1]<c[1]?c:g,["0",0]),i=parseInt(r[0]);i!==a&&A.setGenerator(n,i,!1),this.zones.forEach(g=>{let c=g.getGenerator(n,void 0);c!==void 0?c===i&&g.setGenerator(n,null):i!==a&&g.setGenerator(n,a)})}}let t=this.zones[0].modulators.map(n=>he.copyFrom(n));for(let n of t){let s=!0;for(let a of this.zones){if(!s)continue;a.modulators.find(r=>he.isIdentical(r,n))||(s=!1)}if(s){A.addModulators(he.copyFrom(n));for(let a of this.zones){let o=a.modulators.find(r=>he.isIdentical(r,n));o&&o.transformAmount===n.transformAmount&&a.modulators.splice(a.modulators.indexOf(o),1)}}}}getSize(){let A=this.zones.reduce((t,n)=>n.modulators.length+t,0)+this.globalZone.modulators.length,e=this.zones.reduce((t,n)=>n.getGenCount()+t,0)+this.globalZone.getGenCount();return{mod:A*SA,bag:(this.zones.length+1)*Yt,gen:e*Ct,hdr:Ea}}write(A,e,t,n,s,a){y(`%cWriting ${this.name}...`,h.info),ke(n.pdta,this.name.substring(0,20),20),ke(n.xdta,this.name.substring(20),20),q(n.pdta,s.hdr&65535),q(n.xdta,s.hdr>>>16),s.hdr+=this.zones.length+1,this.globalZone.write(A,e,t,s,a),this.zones.forEach(o=>o.write(A,e,t,s,a))}},la=38,yA=class{parentSoundBank;name="";program=0;bankMSB=0;bankLSB=0;isGMGSDrum=!1;zones=[];globalZone;library=0;genre=0;morphology=0;constructor(A,e=new ga){this.parentSoundBank=A,this.globalZone=e}get isXGDrums(){return this.parentSoundBank.isXGBank&&fe.isXGDrums(this.bankMSB)}get isAnyDrums(){let A=this.parentSoundBank.isXGBank;return this.isGMGSDrum||A&&fe.isXGDrums(this.bankMSB)&&this.bankMSB!==126}delete(){this.zones.forEach(A=>A.instrument?.unlinkFrom(this))}deleteZone(A){this.zones[A]?.instrument?.unlinkFrom(this),this.zones.splice(A,1)}createZone(A){let e=new ha(this,A);return this.zones.push(e),e}preload(A,e){for(let t=A;t<e+1;t++)for(let n=0;n<128;n++)this.getSynthesisData(t,n).forEach(s=>{s.sample.getAudioData()})}matches(A){return sA.matches(this,A)}getSize(){let A=this.zones.reduce((t,n)=>n.modulators.length+t,0)+this.globalZone.modulators.length,e=this.zones.reduce((t,n)=>n.getGenCount()+t,0)+this.globalZone.getGenCount();return{mod:A*SA,bag:(this.zones.length+1)*Yt,gen:e*Ct,hdr:la}}getSynthesisData(A,e){if(this.zones.length<1)return[];function t(Q,B){return B>=Q.min&&B<=Q.max}function n(Q,B){Q.push(...B.filter(l=>!Q.find(d=>d.generatorType===l.generatorType)))}function s(Q,B){Q.push(...B.filter(l=>!Q.find(d=>he.isIdentical(l,d))))}let a=[],o=[...this.globalZone.generators],r=[...this.globalZone.modulators],i=this.globalZone.keyRange,g=this.globalZone.velRange;return this.zones.filter(Q=>t(Q.hasKeyRange?Q.keyRange:i,A)&&t(Q.hasVelRange?Q.velRange:g,e)).forEach(Q=>{let B=Q.instrument;if(!B||B.zones.length<1)return;let l=Q.generators,d=Q.modulators,p=[...B.globalZone.generators],m=[...B.globalZone.modulators],F=B.globalZone.keyRange,k=B.globalZone.velRange;B.zones.filter(x=>t(x.hasKeyRange?x.keyRange:F,A)&&t(x.hasVelRange?x.velRange:k,e)).forEach(x=>{let J=[...x.generators],E=[...x.modulators];n(l,o),n(J,p),s(d,r),s(E,m),s(E,this.parentSoundBank.defaultModulators);let ee=[...E];for(let Ae of d){let _=ee.findIndex(V=>he.isIdentical(Ae,V));_!==-1?ee[_]=ee[_].sumTransform(Ae):ee.push(Ae)}x.sample&&a.push({instrumentGenerators:J,presetGenerators:l,modulators:ee,sample:x.sample})})}),a}toMIDIString(){return sA.toMIDIString(this)}toString(){return sA.toNamedMIDIString(this)}toFlattenedInstrument(){let A=(g,c)=>{g.push(...c.filter(Q=>!g.find(B=>B.generatorType===Q.generatorType)))},e=(g,c)=>({min:Math.max(g.min,c.min),max:Math.min(g.max,c.max)}),t=(g,c)=>{g.push(...c.filter(Q=>!g.find(B=>he.isIdentical(Q,B))))},n=new Qt;n.name=this.name;let s=[],a=[],o=this.globalZone;s.push(...o.generators),a.push(...o.modulators);let r=o.keyRange,i=o.velRange;for(let g of this.zones){if(!g.instrument)throw new Error("No instrument in a preset zone.");let c=g.keyRange;g.hasKeyRange||(c=r);let Q=g.velRange;g.hasVelRange||(Q=i);let B=g.generators.map(J=>new Re(J.generatorType,J.generatorValue));A(B,s);let l=[...g.modulators];t(l,a);let d=g.instrument,p=d.zones,m=[],F=[],k=d.globalZone;m.push(...k.generators),F.push(...k.modulators);let G=k.keyRange,x=k.velRange;for(let J of p){if(!J.sample)throw new Error("No sample in an instrument zone.");let E=J.keyRange;J.hasKeyRange||(E=G);let ee=J.velRange;if(J.hasVelRange||(ee=x),E=e(E,c),ee=e(ee,Q),E.max<E.min||ee.max<ee.min)continue;let Ae=J.generators.map(W=>new Re(W.generatorType,W.generatorValue));A(Ae,m);let _=[...J.modulators];t(_,F);let V=[..._];for(let W of l){let le=V.findIndex(ge=>he.isIdentical(W,ge));le!==-1?V[le]=V[le].sumTransform(W):V.push(W)}let H=Ae.map(W=>new Re(W.generatorType,W.generatorValue));for(let W of B){if(W.generatorType===I.velRange||W.generatorType===I.keyRange||W.generatorType===I.instrument||W.generatorType===I.endOper||W.generatorType===I.sampleModes)continue;let le=Ae.findIndex(ge=>ge.generatorType===W.generatorType);if(le!==-1){let ge=H[le].generatorValue+W.generatorValue;H[le]=new Re(W.generatorType,ge)}else{let ge=T[W.generatorType].def+W.generatorValue;H.push(new Re(W.generatorType,ge))}}H=H.filter(W=>W.generatorType!==I.sampleID&&W.generatorType!==I.keyRange&&W.generatorType!==I.velRange&&W.generatorType!==I.endOper&&W.generatorType!==I.instrument&&W.generatorValue!==T[W.generatorType].def);let K=n.createZone(J.sample);K.keyRange=E,K.velRange=ee,K.keyRange.min===0&&K.keyRange.max===127&&(K.keyRange.min=-1),K.velRange.min===0&&K.velRange.max===127&&(K.velRange.min=-1),K.addGenerators(...H),K.addModulators(...V)}}return n}write(A,e,t,n,s,a){y(`%cWriting ${this.name}...`,h.info),ke(n.pdta,this.name.substring(0,20),20),ke(n.xdta,this.name.substring(20),20),q(n.pdta,this.program);let o=this.bankMSB;this.isGMGSDrum?o=128:this.bankMSB===0&&(o=this.bankLSB),q(n.pdta,o),n.xdta.currentIndex+=4,q(n.pdta,s.hdr&65535),q(n.xdta,s.hdr>>16),re(n.pdta,this.library),re(n.pdta,this.genre),re(n.pdta,this.morphology),n.xdta.currentIndex+=12,s.hdr+=this.zones.length+1,this.globalZone.write(A,e,t,s,a),this.zones.forEach(r=>r.write(A,e,t,s,a))}};function Rs(A,e){let t;return e?t=A.find(n=>n.isXGDrums):t=A.find(n=>n.isGMGSDrum),t||(A.find(n=>n.isAnyDrums)??A[0])}function Ca(A,e,t){if(A.length<1)throw new Error("No presets!");e.isGMGSDrum&&fe.isSystemXG(t)&&(e={...e,isGMGSDrum:!1,bankLSB:0,bankMSB:fe.getDrumBank(t)});let{isGMGSDrum:n,bankLSB:s,bankMSB:a,program:o}=e,r=fe.isSystemXG(t),i=fe.isXGDrums(a)&&r,g=A.find(l=>l.matches(e));if(g&&(!i||i&&g.isXGDrums))return g;let c=l=>{y(`%cPreset %c${sA.toMIDIString(e)}%c not found. (${t}) Replaced with %c${l.toString()}`,h.warn,h.unrecognized,h.warn,h.value)};if(n){let l=A.find(d=>d.isGMGSDrum&&d.program===o);return l||(l=A.find(d=>d.isAnyDrums&&d.program===o),l)?(c(l),l):(l=Rs(A,!1),c(l),l)}if(i){let l=A.find(d=>d.program===o&&d.isXGDrums);return l||(l=A.find(d=>d.isAnyDrums&&d.program===o),l)?(c(l),l):(l=Rs(A,!0),c(l),l)}let Q=A.filter(l=>l.program===o&&!l.isAnyDrums);if(Q.length<1)return c(A[0]),A[0];if(r?g=Q.find(l=>l.bankLSB===s):g=Q.find(l=>l.bankMSB===a),g)return c(g),g;let B=Math.max(a,s);return g=Q.find(l=>l.bankLSB===B||l.bankMSB===B),g?(c(g),g):(c(Q[0]),Q[0])}var Ui=class extends yA{constructor(A,e){super(A.parentSoundBank,A.globalZone),this.bankMSB=fe.addBankOffset(A.bankMSB,e,A.isXGDrums),this.name=A.name,this.bankLSB=A.bankLSB,this.isGMGSDrum=A.isGMGSDrum,this.program=A.program,this.genre=A.genre,this.morphology=A.morphology,this.library=A.library,this.zones=A.zones}},Ti=class{soundBankList=[];presetListChangeCallback;selectablePresetList=[];constructor(A){this.presetListChangeCallback=A}_presetList=[];get presetList(){return[...this._presetList]}get priorityOrder(){return this.soundBankList.map(A=>A.id)}set priorityOrder(A){this.soundBankList.sort((e,t)=>A.indexOf(e.id)-A.indexOf(t.id)),this.generatePresetList()}deleteSoundBank(A){if(this.soundBankList.length===0){ne("1 soundbank left. Aborting!");return}let e=this.soundBankList.findIndex(t=>t.id===A);if(e===-1)throw new Error(`No sound bank with id "${A}"`);this.soundBankList.splice(e,1),this.generatePresetList()}addSoundBank(A,e,t=0){let n=this.soundBankList.find(s=>s.id===e);n!==void 0?(n.soundBank=A,n.bankOffset=t):this.soundBankList.push({id:e,soundBank:A,bankOffset:t}),this.generatePresetList()}getPreset(A,e){if(this.soundBankList.length<1)throw new Error("No sound banks! Did you forget to add one?");return Ca(this.selectablePresetList,A,e)}destroy(){this.soundBankList.forEach(A=>{A.soundBank.destroySoundBank()}),this.soundBankList=[]}generatePresetList(){let A=new Array,e=new Set;this.soundBankList.forEach(t=>{let n=t.soundBank,s=t.bankOffset;n.presets.forEach(a=>{let o=new Ui(a,s);e.has(o.toMIDIString())||(e.add(o.toMIDIString()),A.push(o))})}),A.sort(sA.sorter.bind(sA)),this.selectablePresetList=A,this._presetList=A.map(t=>({bankMSB:t.bankMSB,bankLSB:t.bankLSB,program:t.program,isGMGSDrum:t.isGMGSDrum,name:t.name,isAnyDrums:t.isAnyDrums})),this.presetListChangeCallback()}},Ni=.05,Ji=3070,Ki=2e3,Ds=Math.PI/2,Ut=-500,Ba=500,os=Ba-Ut,da=new Float32Array(os+1),Qa=new Float32Array(os+1);for(let A=Ut;A<=Ba;A++){let e=(A-Ut)/os,t=A-Ut;da[t]=Math.cos(Ds*e),Qa[t]=Math.sin(Ds*e)}function xi(A,e,t,n,s,a,o,r,i){if(isNaN(e[0]))return;let g;A.overridePan?g=A.overridePan:(A.currentPan+=(A.modulatedGenerators[I.pan]-A.currentPan)*this.synthProps.panSmoothingFactor,g=A.currentPan);let c=this.synthProps.masterParameters.masterGain*this.synthProps.midiVolume*A.gain,Q=~~(g+500),B=da[Q]*c*this.synthProps.panLeft,l=Qa[Q]*c*this.synthProps.panRight;if(this.synth.enableEffects){let d=A.modulatedGenerators[I.reverbEffectsSend];if(d>0){let m=this.synthProps.masterParameters.reverbGain*this.synthProps.reverbSend*c*(d/Ji);for(let F=0;F<e.length;F++){let k=F+i;s[k]+=m*e[F],a[k]+=m*e[F]}}let p=A.modulatedGenerators[I.chorusEffectsSend];if(p>0){let m=this.synthProps.masterParameters.chorusGain*this.synthProps.chorusSend*(p/Ki),F=B*m,k=l*m;for(let G=0;G<e.length;G++){let x=G+i;o[x]+=F*e[G],r[x]+=k*e[G]}}}if(B>0)for(let d=0;d<e.length;d++)t[d+i]+=B*e[d];if(l>0)for(let d=0;d<e.length;d++)n[d+i]+=l*e[d]}var Vi=.1,Wt=class Et{static cachedCoefficients=[];resonanceCb=0;currentInitialFc=13500;a0=0;a1=0;a2=0;a3=0;a4=0;x1=0;x2=0;y1=0;y2=0;lastTargetCutoff=1/0;initialized=!1;sampleRate;maxCutoff;constructor(e){this.sampleRate=e,this.maxCutoff=e*.45}static apply(e,t,n,s){let a=e.modulatedGenerators[I.initialFilterFc],o=e.filter;o.initialized?o.currentInitialFc+=(a-o.currentInitialFc)*s:(o.initialized=!0,o.currentInitialFc=a);let r=o.currentInitialFc+n,i=e.modulatedGenerators[I.initialFilterQ];if(o.currentInitialFc>13499&&r>13499&&i===0){o.currentInitialFc=13500;return}(Math.abs(o.lastTargetCutoff-r)>1||o.resonanceCb!==i)&&(o.lastTargetCutoff=r,o.resonanceCb=i,Et.calculateCoefficients(o,r));for(let g=0;g<t.length;g++){let c=t[g],Q=o.a0*c+o.a1*o.x1+o.a2*o.x2-o.a3*o.y1-o.a4*o.y2;o.x2=o.x1,o.x1=c,o.y2=o.y1,o.y1=Q,t[g]=Q}}static calculateCoefficients(e,t){t=~~t;let n=e.resonanceCb,s=Et.cachedCoefficients?.[n]?.[t];if(s!==void 0){e.a0=s.a0,e.a1=s.a1,e.a2=s.a2,e.a3=s.a3,e.a4=s.a4;return}let a=Gn(t);a=Math.min(a,e.maxCutoff);let o=n/10,r=tA(-(o-3.01)),i=1/Math.sqrt(tA(-o)),g=2*Math.PI*a/e.sampleRate,c=Math.cos(g),Q=Math.sin(g)/(2*r),B=(1-c)*i,l=B/2,d=l,p=1+Q,m=-2*c,F=1-Q,k={a0:l/p,a1:B/p,a2:d/p,a3:m/p,a4:F/p};e.a0=k.a0,e.a1=k.a1,e.a2=k.a2,e.a3=k.a3,e.a4=k.a4,Et.cachedCoefficients[n]??=[],Et.cachedCoefficients[n][t]=k}},Un=new Wt(44100);Un.resonanceCb=0;for(let A=1500;A<13500;A++)Un.currentInitialFc=A,Wt.calculateCoefficients(Un,A);var Ms={enableEventSystem:!0,initialTime:0,enableEffects:!0};function Yi(A,e){let t=0;return A.drumChannel&&(t+=5),e.isInRelease&&(t-=5),t+=e.velocity/25,t-=e.volumeEnvelope.state,e.isInRelease&&(t-=5),t-=e.volumeEnvelope.currentAttenuationDb/50,t}function qi(A){let e=[];for(let n of this.midiChannels)for(let s of n.voices)if(!s.finished){let a=Yi(n,s);e.push({channel:n,voice:s,priority:a})}e.sort((n,s)=>n.priority-s.priority);let t=e.slice(0,A);for(let{channel:n,voice:s}of t){let a=n.voices.indexOf(s);a>-1&&n.voices.splice(a,1)}}var Qn=1,Tn=new Float32Array(1e3);for(let A=0;A<Tn.length;A++)Tn[A]=ia(0,Qe.convex,A/1e3);var zA=class Nn{attackDuration=0;decayDuration=0;holdDuration=0;releaseDuration=0;sustainLevel=0;delayEnd=0;attackEnd=0;holdEnd=0;decayEnd=0;releaseStartLevel=0;currentValue=0;static startRelease(e){Nn.recalculate(e)}static recalculate(e){let t=e.modulationEnvelope;e.isInRelease&&(t.releaseStartLevel=Nn.getValue(e,e.releaseStartTime,!0)),t.sustainLevel=1-e.modulatedGenerators[I.sustainModEnv]/1e3,t.attackDuration=fA(e.modulatedGenerators[I.attackModEnv]);let n=(60-e.midiNote)*e.modulatedGenerators[I.keyNumToModEnvDecay],s=fA(e.modulatedGenerators[I.decayModEnv]+n);t.decayDuration=s*(1-t.sustainLevel);let a=(60-e.midiNote)*e.modulatedGenerators[I.keyNumToModEnvHold];t.holdDuration=fA(a+e.modulatedGenerators[I.holdModEnv]);let o=fA(Math.max(e.modulatedGenerators[I.releaseModEnv],-7200));t.releaseDuration=o*t.releaseStartLevel,t.delayEnd=e.startTime+fA(e.modulatedGenerators[I.delayModEnv]),t.attackEnd=t.delayEnd+t.attackDuration,t.holdEnd=t.attackEnd+t.holdDuration,t.decayEnd=t.holdEnd+t.decayDuration}static getValue(e,t,n=!1){let s=e.modulationEnvelope;return e.isInRelease&&!n?s.releaseStartLevel===0?0:Math.max(0,(1-(t-e.releaseStartTime)/s.releaseDuration)*s.releaseStartLevel):(t<s.delayEnd?s.currentValue=0:t<s.attackEnd?s.currentValue=Tn[~~((1-(s.attackEnd-t)/s.attackDuration)*1e3)]:t<s.holdEnd?s.currentValue=Qn:t<s.decayEnd?s.currentValue=(1-(s.decayEnd-t)/s.decayDuration)*(s.sustainLevel-Qn)+Qn:s.currentValue=s.sustainLevel,s.currentValue)}},ua=class{sampleData;playbackStep=0;cursor=0;rootKey=0;loopStart=0;loopEnd=0;end=0;loopingMode=0;isLooping=!1;constructor(A,e,t,n,s,a,o,r){this.sampleData=A,this.playbackStep=e,this.cursor=t,this.rootKey=n,this.loopStart=s,this.loopEnd=a,this.end=o,this.loopingMode=r,this.isLooping=this.loopingMode===1||this.loopingMode===3}},Oi=-2320,Pi=-1130,Jn=class fa{sample;filter;gain=1;generators;modulators=[];resonanceOffset=0;modulatedGenerators;finished=!1;isInRelease=!1;velocity=0;midiNote=0;pressure=0;targetKey=0;modulationEnvelope=new zA;volumeEnvelope;startTime=0;releaseStartTime=1/0;currentTuningCents=0;currentTuningCalculated=1;currentPan=0;realKey;portamentoFromKey=-1;portamentoDuration=0;overridePan=0;exclusiveClass=0;constructor(e,t,n,s,a,o,r,i,g){this.sample=t,this.generators=i,this.exclusiveClass=this.generators[I.exclusiveClass],this.modulatedGenerators=new Int16Array(i),this.modulators=g,this.filter=new Wt(e),this.velocity=s,this.midiNote=n,this.startTime=a,this.targetKey=o,this.realKey=r,this.volumeEnvelope=new LA(e,i[I.sustainVolEnv])}static copyFrom(e,t,n){let s=e.sample,a=new ua(s.sampleData,s.playbackStep,s.cursor,s.rootKey,s.loopStart,s.loopEnd,s.end,s.loopingMode);return new fa(e.volumeEnvelope.sampleRate,a,e.midiNote,e.velocity,t,e.targetKey,n,new Int16Array(e.generators),e.modulators.map(he.copyFrom.bind(he)))}exclusiveRelease(e){this.release(e,Ha),this.modulatedGenerators[I.releaseVolEnv]=Oi,this.modulatedGenerators[I.releaseModEnv]=Pi,LA.recalculate(this),zA.recalculate(this)}release(e,t=Pa){this.releaseStartTime=e,this.releaseStartTime-this.startTime<t&&(this.releaseStartTime=this.startTime+t)}};function Hi(A,e,t,n){let s=A.getSynthesisData(e,t).reduce((a,o)=>{if(o.sample.getAudioData()===void 0)return ne(`Discarding invalid sample: ${o.sample.name}`),a;let r=new Int16Array(wn);for(let p=0;p<60;p++)r[p]=Li(p,o.presetGenerators,o.instrumentGenerators);r[I.initialAttenuation]=Math.floor(r[I.initialAttenuation]*.4);let i=o.sample.originalKey;r[I.overridingRootKey]>-1&&(i=r[I.overridingRootKey]);let g=e;r[I.keyNum]>-1&&(g=r[I.keyNum]);let c=o.sample.loopStart,Q=o.sample.loopEnd,B=r[I.sampleModes],l=o.sample.getAudioData(),d=new ua(l,o.sample.sampleRate/this.sampleRate*Math.pow(2,o.sample.pitchCorrection/1200),0,i,c,Q,Math.floor(l.length)-1,B);return r[I.velocity]>-1&&(t=r[I.velocity]),a.push(new Jn(this.sampleRate,d,e,t,this.currentSynthTime,g,n,r,o.modulators.map(he.copyFrom.bind(he)))),a},[]);return this.setCachedVoice(A,e,t,s),s.map(a=>Jn.copyFrom(a,this.currentSynthTime,n))}function Wi(A,e,t,n){let s=this.midiChannels[A],a=this.keyModifierManager.hasOverridePatch(A,e),o=s.preset;if(!o)return ne(`No preset for channel ${A}!`),[];let r={...o};a&&(r=this.keyModifierManager.getPatch(A,e));let i=this.getCachedVoice(r,e,t);return i!==void 0?i.map(g=>Jn.copyFrom(g,this.currentSynthTime,n)):(a&&(o=this.soundBankManager.getPreset(r,this.privateProps.masterParameters.midiSystem)),this.getVoicesForPreset(o,e,t,n))}function Gs(A,e,t){let n=A,s=e<<7|t;return A===127&&e===127&&t===127?{midiNote:-1,centTuning:null}:{midiNote:n,centTuning:s*.0061}}function Zi(A,e=0){let t=A[0];if(this.privateProps.masterParameters.deviceID!==je&&A[1]!==127&&this.privateProps.masterParameters.deviceID!==A[1])return;function n(a,o,r,i){y(`%cChannel %c${a}%c ${r}. %c${o} ${i}%c, with %c${Me(A)}`,h.info,h.recognized,h.info,h.value,h.info,h.value)}function s(){y(`%cUnrecognized Roland %cGS %cSysEx: %c${Me(A)}`,h.warn,h.recognized,h.warn,h.unrecognized)}switch(t){default:y(`%cUnrecognized SysEx: %c${Me(A)}`,h.warn,h.unrecognized);break;case 126:case 127:switch(A[2]){case 4:{let a;switch(A[3]){case 1:{let o=A[5]<<7|A[4];this.setMIDIVolume(o/16384),y(`%cMaster Volume. Volume: %c${o}`,h.info,h.value);break}case 2:{let r=((A[5]<<7|A[4])-8192)/8192;this.setMasterParameter("masterPan",r),y(`%cMaster Pan. Pan: %c${r}`,h.info,h.value);break}case 3:{let o=(A[5]<<7|A[6])-8192;a=Math.floor(o/81.92),this.setMasterTuning(a),y(`%cMaster Fine Tuning. Cents: %c${a}`,h.info,h.value);break}case 4:{a=(A[5]-64)*100,this.setMasterTuning(a),y(`%cMaster Coarse Tuning. Cents: %c${a}`,h.info,h.value);break}default:y(`%cUnrecognized MIDI Device Control Real-time message: %c${Me(A)}`,h.warn,h.unrecognized)}break}case 9:A[3]===1?(y("%cGM1 system on",h.info),this.setMasterParameter("midiSystem","gm")):A[3]===3?(y("%cGM2 system on",h.info),this.setMasterParameter("midiSystem","gm2")):(y("%cGM system off, defaulting to GS",h.info),this.setMasterParameter("midiSystem","gs"));break;case 8:{let a=4;switch(A[3]){case 1:{let o=A[a++],r=nA(A,16,a);if(a+=16,A.length<384){ne(`The Bulk Tuning Dump is too short! (${A.length} bytes, at least 384 are expected)`);return}for(let i=0;i<128;i++)this.privateProps.tunings[o][i]=Gs(A[a++],A[a++],A[a++]);y(`%cBulk Tuning Dump %c${r}%c Program: %c${o}`,h.info,h.value,h.info,h.recognized);break}case 2:case 7:{A[3]===7&&a++;let o=A[a++],r=A[a++];for(let i=0;i<r;i++)this.privateProps.tunings[o][A[a++]]=Gs(A[a++],A[a++],A[a++]);y(`%cSingle Note Tuning. Program: %c${o}%c Keys affected: %c${r}`,h.info,h.recognized,h.info,h.recognized);break}case 9:case 8:{let o=new Int8Array(12);if(A[3]===8)for(let r=0;r<12;r++)o[r]=A[7+r]-64;else for(let r=0;r<24;r+=2){let i=(A[7+r]<<7|A[8+r])-8192;o[r/2]=Math.floor(i/81.92)}(A[4]&1)===1&&this.midiChannels[14+e].setOctaveTuning(o),(A[4]>>1&1)===1&&this.midiChannels[15+e].setOctaveTuning(o);for(let r=0;r<7;r++)(A[5]>>r&1)===1&&this.midiChannels[7+r+e].setOctaveTuning(o);for(let r=0;r<7;r++)(A[6]>>r&1)===1&&this.midiChannels[r+e].setOctaveTuning(o);y(`%cMIDI Octave Scale ${A[3]===8?"(1 byte)":"(2 bytes)"} tuning via Tuning: %c${o.join(" ")}`,h.info,h.value);break}default:y(`%cUnrecognized MIDI Tuning standard message: %c${Me(A)}`,h.warn,h.unrecognized);break}break}default:y(`%cUnrecognized MIDI Realtime/non realtime message: %c${Me(A)}`,h.warn,h.unrecognized)}break;case 65:if(A[2]===66&&A[3]===18){let a=A[7];if(A[4]===64||A[4]===0&&A[6]===127){if((A[5]&16)>0){let o=[9,0,1,2,3,4,5,6,7,8,10,11,12,13,14,15][A[5]&15]+e,r=this.midiChannels[o];switch(A[6]){default:s();break;case 21:{let i=a>0&&A[5]>>4>0;r.setGSDrums(i),y(`%cChannel %c${o}%c ${i?"is now a drum channel":"now isn't a drum channel"}%c via: %c${Me(A)}`,h.info,h.value,h.recognized,h.info,h.value);return}case 22:{let i=a-64;r.setCustomController(oe.channelKeyShift,i),n(o,i,"key shift","keys");return}case 28:{let i=a;i===0?(r.randomPan=!0,y(`%cRandom pan is set to %cON%c for %c${o}`,h.info,h.recognized,h.info,h.value)):(r.randomPan=!1,r.controllerChange(S.pan,i));break}case 33:r.controllerChange(S.chorusDepth,a);break;case 34:r.controllerChange(S.reverbDepth,a);break;case 64:case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:{let i=A.length-9,g=new Int8Array(12);for(let Q=0;Q<i;Q++)g[Q]=A[Q+7]-64;r.setOctaveTuning(g);let c=a-64;n(o,g.join(" "),"octave scale tuning","cents"),r.setTuning(c);break}}return}else if((A[5]&32)>0){let o=[9,0,1,2,3,4,5,6,7,8,10,11,12,13,14,15][A[5]&15]+e,r=this.midiChannels[o],i=a-64,g=i/64,c=a/128,Q=(B,l,d=!1)=>{switch(A[6]&15){case 0:B===me+z.pitchWheel?(r.controllerChange(S.registeredParameterMSB,0),r.controllerChange(S.registeredParameterLSB,0),r.controllerChange(S.dataEntryMSB,Math.floor(i))):(r.sysExModulators.setModulator(B,I.fineTune,i*100,d),n(o,i,`${l} pitch control`,"semitones"));break;case 1:r.sysExModulators.setModulator(B,I.initialFilterFc,g*9600,d),n(o,g*9600,`${l} pitch control`,"cents");break;case 2:r.sysExModulators.setModulator(B,I.initialAttenuation,g*960,d),n(o,g*960,`${l} amplitude`,"cB");break;case 4:r.sysExModulators.setModulator(B,I.vibLfoToPitch,c*600,d),n(o,c*600,`${l} LFO1 pitch depth`,"cents");break;case 5:r.sysExModulators.setModulator(B,I.vibLfoToFilterFc,c*2400,d),n(o,c*2400,`${l} LFO1 filter depth`,"cents");break;case 6:r.sysExModulators.setModulator(B,I.vibLfoToVolume,g*960,d),n(o,g*960,`${l} LFO1 amplitude depth`,"cB");break;case 8:r.sysExModulators.setModulator(B,I.modLfoToPitch,c*600,d),n(o,c*600,`${l} LFO2 pitch depth`,"cents");break;case 9:r.sysExModulators.setModulator(B,I.modLfoToFilterFc,c*2400,d),n(o,c*2400,`${l} LFO2 filter depth`,"cents");break;case 10:r.sysExModulators.setModulator(B,I.modLfoToVolume,g*960,d),n(o,g*960,`${l} LFO2 amplitude depth`,"cB");break}};switch(A[6]&240){default:s();break;case 0:Q(S.modulationWheel,"mod wheel");break;case 16:Q(me+z.pitchWheel,"pitch wheel",!0);break;case 32:Q(me+z.channelPressure,"channel pressure");break;case 48:Q(me+z.polyPressure,"poly pressure");break}return}else if(A[5]===0){switch(A[6]){default:s();break;case 127:a===0?(y("%cGS Reset received!",h.info),this.resetAllControllers(!1),this.setMasterParameter("midiSystem","gs")):a===127&&(y("%cGS system off, switching to GM2",h.info),this.resetAllControllers(!1),this.setMasterParameter("midiSystem","gm2"));break;case 6:y(`%cRoland GS Master Pan set to: %c${a}%c with: %c${Me(A)}`,h.info,h.value,h.info,h.value),this.setMasterParameter("masterPan",(a-64)/64);break;case 4:y(`%cRoland GS Master Volume set to: %c${a}%c with: %c${Me(A)}`,h.info,h.value,h.info,h.value),this.setMIDIVolume(a/127);break;case 5:{let o=a-64;y(`%cRoland GS Master Key-Shift set to: %c${o}%c with: %c${Me(A)}`,h.info,h.value,h.info,h.value),this.setMasterTuning(o*100);break}}return}else if(A[5]===1)switch(A[6]){default:s();break;case 0:{let o=nA(A,16,7);y(`%cGS Patch name: %c${o}`,h.info,h.value);break}case 51:y(`%cGS Reverb level: %c${a}`,h.info,h.value),this.privateProps.reverbSend=a/64;break;case 48:case 49:case 50:case 52:case 53:case 55:y(`%cUnsupported GS Reverb Parameter: %c${A[6].toString(16)}`,h.warn,h.unrecognized);break;case 58:y(`%cGS Chorus level: %c${a}`,h.info,h.value),this.privateProps.chorusSend=a/64;break;case 56:case 57:case 59:case 60:case 61:case 62:case 63:case 64:y(`%cUnsupported GS Chorus Parameter: %c${A[6].toString(16)}`,h.warn,h.unrecognized);break}}else s();return}else if(A[2]===69&&A[3]===18){if(A[4]===16&&A[6]===0)if(A[5]===0){let a=new Uint8Array(A.slice(7,A.length-2));this.privateProps.callEvent("synthDisplay",{displayData:a,displayType:hn.soundCanvasText})}else if(A[5]===1){let a=new Uint8Array(A.slice(7,A.length-3));this.privateProps.callEvent("synthDisplay",{displayData:a,displayType:hn.soundCanvasDotMatrix}),y(`%cRoland SC Display Dot Matrix via: %c${Me(A)}`,h.info,h.value)}else s()}else if(A[2]===22&&A[3]===18&&A[4]===16){this.setMIDIVolume(A[7]/100),y(`%cRoland Master Volume control set to: %c${A[7]}%c via: %c${Me(A)}`,h.info,h.value,h.info,h.value);return}else{y(`%cUnrecognized Roland SysEx: %c${Me(A)}`,h.warn,h.unrecognized);return}break;case 67:if(A[2]===76)if(A[3]===0&&A[4]===0)switch(A[5]){case 4:{let a=A[6];this.setMIDIVolume(a/127),y(`%cXG master volume. Volume: %c${a}`,h.info,h.recognized);break}case 6:{let a=A[6]-64;this.setMasterParameter("transposition",a),y(`%cXG master transpose. Volume: %c${a}`,h.info,h.recognized);break}case 126:y("%cXG system on",h.info),this.resetAllControllers(!1),this.setMasterParameter("midiSystem","xg");break}else if(A[3]===8){if(!fe.isSystemXG(this.privateProps.masterParameters.midiSystem))return;let a=A[4]+e;if(a>=this.midiChannels.length)return;let o=this.midiChannels[a],r=A[6];switch(A[5]){case 1:o.controllerChange(S.bankSelect,r);break;case 2:o.controllerChange(S.bankSelectLSB,r);break;case 3:o.programChange(r);break;case 8:{if(o.drumChannel)return;o.channelTransposeKeyShift=r-64;break}case 11:o.controllerChange(S.mainVolume,r);break;case 14:{let i=r;i===0?(o.randomPan=!0,y(`%cRandom pan is set to %cON%c for %c${a}`,h.info,h.recognized,h.info,h.value)):o.controllerChange(S.pan,i);break}case 19:o.controllerChange(S.reverbDepth,r);break;case 18:o.controllerChange(S.chorusDepth,r);break;default:y(`%cUnrecognized Yamaha XG Part Setup: %c${A[5].toString(16).toUpperCase()}`,h.warn,h.unrecognized)}}else if(A[3]===6&&A[4]===0){let a=new Uint8Array(A.slice(5,A.length-1));this.privateProps.callEvent("synthDisplay",{displayData:a,displayType:hn.yamahaXGText})}else fe.isSystemXG(this.privateProps.masterParameters.midiSystem)&&y(`%cUnrecognized Yamaha XG SysEx: %c${Me(A)}`,h.warn,h.unrecognized);else fe.isSystemXG(this.privateProps.masterParameters.midiSystem)&&y(`%cUnrecognized Yamaha SysEx: %c${Me(A)}`,h.warn,h.unrecognized);break}}var Kn=class xn{patch;lockPreset;lockedSystem;midiControllers;lockedControllers;customControllers;lockVibrato;channelVibrato;channelTransposeKeyShift;channelOctaveTuning;isMuted;drumChannel;channelNumber;constructor(e,t,n,s,a,o,r,i,g,c,Q,B,l){this.patch=e,this.lockPreset=t,this.lockedSystem=n,this.midiControllers=s,this.lockedControllers=a,this.customControllers=o,this.lockVibrato=r,this.channelVibrato=i,this.channelTransposeKeyShift=g,this.channelOctaveTuning=c,this.isMuted=Q,this.drumChannel=B,this.channelNumber=l}static copyFrom(e){return new xn({...e.patch},e.lockPreset,e.lockedSystem,e.midiControllers.slice(),[...e.lockedControllers],e.customControllers.slice(),e.lockVibrato,{...e.channelVibrato},e.channelTransposeKeyShift,e.channelOctaveTuning,e.isMuted,e.drumChannel,e.channelNumber)}static create(e,t){let n=e.midiChannels[t];return new xn({...n.patch,name:n?.preset?.name??"undefined"},n.lockPreset,n.lockedSystem,n.midiControllers.slice(),[...n.lockedControllers],n.customControllers.slice(),n.lockGSNRPNParams,{...n.channelVibrato},n.channelTransposeKeyShift,n.channelOctaveTuning.slice(),n.isMuted,n.drumChannel,t)}apply(e){let t=e.midiChannels[this.channelNumber];t.muteChannel(this.isMuted),t.setDrums(this.drumChannel),t.midiControllers.set(this.midiControllers),t.lockedControllers=this.lockedControllers,t.customControllers.set(this.customControllers),t.updateChannelTuning(),t.channelVibrato=this.channelVibrato,t.lockGSNRPNParams=this.lockVibrato,t.channelTransposeKeyShift=this.channelTransposeKeyShift,t.channelOctaveTuning=this.channelOctaveTuning,t.setPresetLock(!1),t.setPatch(this.patch),t.setPresetLock(this.lockPreset),t.lockedSystem=this.lockedSystem}};var Xi=class{keyMappings=[];addMapping(A,e,t){this.keyMappings[A]??=[],this.keyMappings[A][e]=t}deleteMapping(A,e){this.keyMappings[A]?.[e]!==void 0&&(this.keyMappings[A][e]=void 0)}clearMappings(){this.keyMappings=[]}setMappings(A){this.keyMappings=A}getMappings(){return this.keyMappings}getVelocity(A,e){return this.keyMappings[A]?.[e]?.velocity??-1}getGain(A,e){return this.keyMappings[A]?.[e]?.gain??1}hasOverridePatch(A,e){let t=this.keyMappings[A]?.[e]?.patch?.bankMSB;return t!==void 0&&t>=0}getPatch(A,e){let t=this.keyMappings[A]?.[e];if(t)return t.patch;throw new Error("No modifier.")}},Zt=class Vn{channelSnapshots;keyMappings;masterParameters;constructor(e,t,n){this.channelSnapshots=e,this.masterParameters=t,this.keyMappings=n}static create(e){let t=e.midiChannels.map((n,s)=>Kn.create(e,s));return new Vn(t,e.getAllMasterParameters(),e.keyModifierManager.getMappings())}static copyFrom(e){return new Vn(e.channelSnapshots.map(t=>Kn.copyFrom(t)),{...e.masterParameters},[...e.keyMappings])}apply(e){for(Object.entries(this.masterParameters).forEach(([n,s])=>{e.setMasterParameter(n,s)}),e.keyModifierManager.setMappings(this.keyMappings);e.midiChannels.length<this.channelSnapshots.length;)e.createMIDIChannel();this.channelSnapshots.forEach(n=>{n.apply(e)})}},ma={masterGain:Wa,masterPan:0,voiceCap:qa,interpolationType:Lt.hermite,midiSystem:Hs,monophonicRetriggerMode:!1,reverbGain:1,chorusGain:1,blackMIDIMode:!1,transposition:0,deviceID:je},ji=class{tunings=[];masterParameters=ma;midiVolume=1;reverbSend=1;chorusSend=1;panLeft=.5;panRight=.5;defaultPreset;drumPreset;volumeEnvelopeSmoothingFactor;panSmoothingFactor;filterSmoothingFactor;eventCallbackHandler;getVoices;voiceKilling;cachedVoices=[];constructor(A,e,t,n,s,a){this.eventCallbackHandler=A,this.getVoices=e,this.voiceKilling=t,this.volumeEnvelopeSmoothingFactor=n,this.panSmoothingFactor=s,this.filterSmoothingFactor=a;for(let o=0;o<128;o++)this.tunings.push([])}callEvent(A,e){this.eventCallbackHandler(A,e)}};function un(A,e,t){if(t<A)return 0;let n=(t-A)/(1/e)+.25;return Math.abs(n-~~(n+.5))*4-1}var zi=class Yn{static getSample(e,t,n){let s=e.currentTuningCalculated*e.sample.playbackStep;if(s===1){Yn.getSampleNearest(e,t,s);return}switch(n){case Lt.hermite:this.getSampleHermite(e,t,s);return;case Lt.linear:default:this.getSampleLinear(e,t,s);return;case Lt.nearestNeighbor:Yn.getSampleNearest(e,t,s);return}}static getSampleLinear(e,t,n){let s=e.sample,a=s.cursor,o=s.sampleData;if(s.isLooping){let r=s.loopEnd-s.loopStart;for(let i=0;i<t.length;i++){for(;a>=s.loopEnd;)a-=r;let g=~~a,c=g+1;for(;c>=s.loopEnd;)c-=r;let Q=a-g,B=o[c],l=o[g];t[i]=l+(B-l)*Q,a+=n}}else for(let r=0;r<t.length;r++){let i=~~a,g=i+1;if(g>=s.end){e.finished=!0;return}let c=a-i,Q=o[g],B=o[i];t[r]=B+(Q-B)*c,a+=n}e.sample.cursor=a}static getSampleNearest(e,t,n){let s=e.sample,a=s.cursor,o=s.sampleData;if(s.isLooping){let r=s.loopEnd-s.loopStart;for(let i=0;i<t.length;i++){for(;a>=s.loopEnd;)a-=r;let g=~~a+1;for(;g>=s.loopEnd;)g-=r;t[i]=o[g],a+=n}}else for(let r=0;r<t.length;r++){let i=~~a+1;if(i>=s.end){e.finished=!0;return}t[r]=o[i],a+=n}s.cursor=a}static getSampleHermite(e,t,n){let s=e.sample,a=s.cursor,o=s.sampleData;if(s.isLooping){let r=s.loopEnd-s.loopStart;for(let i=0;i<t.length;i++){for(;a>=s.loopEnd;)a-=r;let g=~~a,c=g+1,Q=g+2,B=g+3,l=a-g;c>=s.loopEnd&&(c-=r),Q>=s.loopEnd&&(Q-=r),B>=s.loopEnd&&(B-=r);let d=o[g],p=o[c],m=o[Q],F=o[B],k=(m-d)*.5,G=p-m,x=k+G,J=x+G+(F-p)*.5,E=x+J;t[i]=((J*l-E)*l+k)*l+p,a+=n}}else for(let r=0;r<t.length;r++){let i=~~a,g=i+1,c=i+2,Q=i+3,B=a-i;if(g>=s.end||c>=s.end||Q>=s.end){e.finished=!0;return}let l=o[i],d=o[g],p=o[c],m=o[Q],F=(p-l)*.5,k=d-p,G=F+k,x=G+k+(m-d)*.5,J=G+x;t[r]=((x*B-J)*B+F)*B+d,a+=n}e.sample.cursor=a}};function _i(A,e,t,n,s,a,o,r,i,g){if(A.isInRelease||e>=A.releaseStartTime&&(A.isInRelease=!0,LA.startRelease(A),zA.startRelease(A),A.sample.loopingMode===3&&(A.sample.isLooping=!1)),A.modulatedGenerators[I.initialAttenuation]>2500)return A.isInRelease&&(A.finished=!0),A.finished;let c=A.targetKey,Q=A.modulatedGenerators[I.fineTune]+this.channelOctaveTuning[A.midiNote]+this.channelTuningCents,B=A.modulatedGenerators[I.coarseTune],l=this.synthProps.tunings[this.preset?.program??0]?.[A.realKey];if(l?.centTuning&&(c=l.midiNote,Q+=l.centTuning),A.portamentoFromKey>-1){let V=Math.min((e-A.startTime)/A.portamentoDuration,1),H=c-A.portamentoFromKey;B-=H*(1-V)}Q+=(c-A.sample.rootKey)*A.modulatedGenerators[I.scaleTuning];let d=0,p=0,m=A.modulatedGenerators[I.vibLfoToPitch],F=A.modulatedGenerators[I.vibLfoToVolume],k=A.modulatedGenerators[I.vibLfoToFilterFc];if(m!==0||F!==0||k!==0){let V=A.startTime+fA(A.modulatedGenerators[I.delayVibLFO]),H=Gn(A.modulatedGenerators[I.freqVibLFO]),K=un(V,H,e);Q+=K*(m*this.customControllers[oe.modulationMultiplier]),p+=-K*F,d+=K*k}let G=A.modulatedGenerators[I.modLfoToPitch],x=A.modulatedGenerators[I.modLfoToVolume],J=A.modulatedGenerators[I.modLfoToFilterFc];if(G!==0||J!==0||x!==0){let V=A.startTime+fA(A.modulatedGenerators[I.delayModLFO]),H=Gn(A.modulatedGenerators[I.freqModLFO]),K=un(V,H,e);Q+=K*(G*this.customControllers[oe.modulationMultiplier]),p+=-K*x,d+=K*J}if(this.channelVibrato.depth>0){let V=un(A.startTime+this.channelVibrato.delay,this.channelVibrato.rate,e);V&&(Q+=V*this.channelVibrato.depth)}let E=A.modulatedGenerators[I.modEnvToPitch],ee=A.modulatedGenerators[I.modEnvToFilterFc];if(ee!==0||E!==0){let V=zA.getValue(A,e);d+=V*ee,Q+=V*E}p-=A.resonanceOffset;let Ae=~~(Q+B*100);Ae!==A.currentTuningCents&&(A.currentTuningCents=Ae,A.currentTuningCalculated=Math.pow(2,Ae/1200));let _=new Float32Array(g);return A.sample.loopingMode===2&&!A.isInRelease?(LA.apply(A,_,p,this.synthProps.volumeEnvelopeSmoothingFactor),A.finished):(zi.getSample(A,_,this.synthProps.masterParameters.interpolationType),Wt.apply(A,_,d,this.synthProps.filterSmoothingFactor),LA.apply(A,_,p,this.synthProps.volumeEnvelopeSmoothingFactor),this.panAndMixVoice(A,_,t,n,s,a,o,r,i),A.finished)}var mA={pitchWheelRange:0,fineTuning:1,coarseTuning:2,modulationDepth:5,resetParameters:16383},ZA={partParameter:1,awe32:127,SF2:120},PA={vibratoRate:8,vibratoDepth:9,vibratoDelay:10,TVFFilterCutoff:32,TVFFilterResonance:33,EGAttackTime:99,EGReleaseTime:102};function $i(A){this.midiControllers[S.dataEntryMSB]=A<<7;let e=()=>{this.channelVibrato.delay===0&&this.channelVibrato.rate===0&&this.channelVibrato.depth===0&&(this.channelVibrato.depth=50,this.channelVibrato.rate=8,this.channelVibrato.delay=.6)},t=(n,s,a)=>{a.length>0&&(a=" "+a),y(`%c${n} for %c${this.channelNumber}%c is now set to %c${s}%c${a}.`,h.info,h.recognized,h.info,h.value,h.info)};switch(this.dataEntryState){default:case Ve.Idle:break;case Ve.NRPFine:{if(this.lockGSNRPNParams)return;let n=this.midiControllers[S.nonRegisteredParameterMSB]>>7,s=this.midiControllers[S.nonRegisteredParameterLSB]>>7,a=this.midiControllers[S.dataEntryLSB]>>7;switch(n){default:if(A===64)return;y(`%cUnrecognized NRPN for %c${this.channelNumber}%c: %c(0x${s.toString(16).toUpperCase()} 0x${s.toString(16).toUpperCase()})%c data value: %c${A}`,h.warn,h.recognized,h.warn,h.unrecognized,h.warn,h.value);break;case ZA.partParameter:switch(s){default:if(A===64)return;y(`%cUnrecognized NRPN for %c${this.channelNumber}%c: %c(0x${n.toString(16)} 0x${s.toString(16)})%c data value: %c${A}`,h.warn,h.recognized,h.warn,h.unrecognized,h.warn,h.value);break;case PA.vibratoRate:if(A===64)return;e(),this.channelVibrato.rate=A/64*8,t("Vibrato rate",`${A} = ${this.channelVibrato.rate}`,"Hz");break;case PA.vibratoDepth:if(A===64)return;e(),this.channelVibrato.depth=A/2,t("Vibrato depth",`${A} = ${this.channelVibrato.depth}`,"cents of detune");break;case PA.vibratoDelay:if(A===64)return;e(),this.channelVibrato.delay=A/64/3,t("Vibrato delay",`${A} = ${this.channelVibrato.delay}`,"seconds");break;case PA.TVFFilterCutoff:this.controllerChange(S.brightness,A),t("Filter cutoff",A.toString(),"");break;case PA.EGAttackTime:this.controllerChange(S.attackTime,A),t("EG attack time",A.toString(),"");break;case PA.EGReleaseTime:this.controllerChange(S.releaseTime,A),t("EG release time",A.toString(),"");break}break;case ZA.awe32:break;case ZA.SF2:{if(s>100)break;let o=this.customControllers[oe.sf2NPRNGeneratorLSB],r=(A<<7|a)-8192;this.setGeneratorOffset(o,r);break}}break}case Ve.RPCoarse:case Ve.RPFine:{let n=this.midiControllers[S.registeredParameterMSB]|this.midiControllers[S.registeredParameterLSB]>>7;switch(n){default:y(`%cUnrecognized RPN for %c${this.channelNumber}%c: %c(0x${n.toString(16)})%c data value: %c${A}`,h.warn,h.recognized,h.warn,h.unrecognized,h.warn,h.value);break;case mA.pitchWheelRange:this.midiControllers[me+z.pitchWheelRange]=A<<7,t("Pitch wheel range",A.toString(),"semitones");break;case mA.coarseTuning:{let s=A-64;this.setCustomController(oe.channelTuningSemitones,s),t("Coarse tuning",s.toString(),"semitones");break}case mA.fineTuning:this.setTuning(A-64,!1);break;case mA.modulationDepth:this.setModulationDepth(A*100);break;case mA.resetParameters:this.resetParameters();break}}}}var eo=[I.delayModLFO,I.freqModLFO,I.delayVibLFO,I.freqVibLFO,I.delayModEnv,I.attackModEnv,I.holdModEnv,I.decayModEnv,I.sustainModEnv,I.releaseModEnv,I.delayVolEnv,I.attackVolEnv,I.holdVolEnv,I.decayVolEnv,I.sustainVolEnv,I.releaseVolEnv,I.fineTune,I.modLfoToPitch,I.vibLfoToPitch,I.modEnvToPitch,I.modLfoToVolume,I.initialFilterFc,I.initialFilterQ,I.modLfoToFilterFc,I.modEnvToFilterFc,I.chorusEffectsSend,I.reverbEffectsSend];function Ao(A,e,t){let n=(B,l,d)=>Math.max(l,Math.min(d,B)),s=B=>Math.max(-32768,1200*Math.log2(B/1e3)),a=B=>6900+1200*Math.log2(B/440),o=t<<7|e;o-=8192;let r=eo[A];r||ne(`Invalid AWE32 LSB: %c${A}`,h.unrecognized);let i,g,c,Q;switch(r){default:break;case I.delayModLFO:case I.delayVibLFO:case I.delayVolEnv:case I.delayModEnv:i=4*n(o,0,5900),this.setGeneratorOverride(r,s(i));break;case I.attackVolEnv:case I.attackModEnv:i=n(o,0,5940),this.setGeneratorOverride(r,s(i));break;case I.holdVolEnv:case I.holdModEnv:i=n(o,0,8191),this.setGeneratorOverride(r,s(i));break;case I.decayModEnv:case I.decayVolEnv:case I.releaseVolEnv:case I.releaseModEnv:i=4*n(o,0,5940),this.setGeneratorOverride(r,s(i));break;case I.freqVibLFO:case I.freqModLFO:g=.084*e,this.setGeneratorOverride(r,a(g),!0);break;case I.sustainVolEnv:case I.sustainModEnv:c=e*7.5,this.setGeneratorOverride(r,c);break;case I.fineTune:this.setGeneratorOverride(r,o,!0);break;case I.modLfoToPitch:case I.vibLfoToPitch:Q=n(o,-127,127)*9.375,this.setGeneratorOverride(r,Q,!0);break;case I.modEnvToPitch:Q=n(o,-127,127)*9.375,this.setGeneratorOverride(r,Q);break;case I.modLfoToVolume:c=1.875*e,this.setGeneratorOverride(r,c,!0);break;case I.initialFilterFc:{let B=4335+59*e;this.setGeneratorOverride(r,B,!0);break}case I.initialFilterQ:c=215*(e/127),this.setGeneratorOverride(r,c,!0);break;case I.modLfoToFilterFc:Q=n(o,-64,63)*56.25,this.setGeneratorOverride(r,Q,!0);break;case I.modEnvToFilterFc:Q=n(o,-64,63)*56.25,this.setGeneratorOverride(r,Q);break;case I.chorusEffectsSend:case I.reverbEffectsSend:this.setGeneratorOverride(r,n(o,0,255)*(1e3/255));break}}function to(A){switch(this.midiControllers[S.dataEntryLSB]=A<<7,this.dataEntryState){default:break;case Ve.RPCoarse:case Ve.RPFine:{switch(this.midiControllers[S.registeredParameterMSB]|this.midiControllers[S.registeredParameterLSB]>>7){default:break;case mA.pitchWheelRange:{if(A===0)break;this.midiControllers[me+z.pitchWheelRange]|=A;let t=(this.midiControllers[me+z.pitchWheelRange]>>7)+A/128;y(`%cChannel ${this.channelNumber} pitch wheel range. Semitones: %c${t}`,h.info,h.value);break}case mA.fineTuning:{let n=this.customControllers[oe.channelTuning]<<7|A;this.setTuning(n*.01220703125);break}case mA.modulationDepth:{let n=this.customControllers[oe.modulationMultiplier]*50+A/128*100;this.setModulationDepth(n);break}case 16383:this.resetParameters();break}break}case Ve.NRPFine:{let e=this.midiControllers[S.nonRegisteredParameterMSB]>>7,t=this.midiControllers[S.nonRegisteredParameterLSB]>>7;if(e===ZA.SF2)return;switch(e){default:y(`%cUnrecognized NRPN LSB for %c${this.channelNumber}%c: %c(0x${t.toString(16).toUpperCase()} 0x${t.toString(16).toUpperCase()})%c data value: %c${A}`,h.warn,h.recognized,h.warn,h.unrecognized,h.warn,h.value);break;case ZA.awe32:Ao.call(this,t,A,this.midiControllers[S.dataEntryMSB]>>7);break}}}}function no(A,e,t=!0){if(A>127)throw new Error("Invalid MIDI Controller.");if(A>=S.modulationWheelLSB&&A<=S.effectControl2LSB&&A!==S.dataEntryLSB){let n=A-32;if(this.lockedControllers[n])return;this.midiControllers[n]=this.midiControllers[n]&16256|e&127,this.voices.forEach(s=>this.computeModulators(s,1,n))}if(!this.lockedControllers[A]){switch(this.midiControllers[A]=e<<7,A){case S.allNotesOff:this.stopAllNotes();break;case S.allSoundOff:this.stopAllNotes(!0);break;case S.bankSelect:this.setBankMSB(e),this.channelNumber%16===lA&&fe.isSystemXG(this.channelSystem)&&this.setBankMSB(127);break;case S.bankSelectLSB:this.setBankLSB(e);break;case S.registeredParameterLSB:this.dataEntryState=Ve.RPFine;break;case S.registeredParameterMSB:this.dataEntryState=Ve.RPCoarse;break;case S.nonRegisteredParameterMSB:this.customControllers[oe.sf2NPRNGeneratorLSB]=0,this.dataEntryState=Ve.NRPCoarse;break;case S.nonRegisteredParameterLSB:this.midiControllers[S.nonRegisteredParameterMSB]>>7===ZA.SF2&&(this.customControllers[oe.sf2NPRNGeneratorLSB]%100!==0&&(this.customControllers[oe.sf2NPRNGeneratorLSB]=0),e===100?this.customControllers[oe.sf2NPRNGeneratorLSB]+=100:e===101?this.customControllers[oe.sf2NPRNGeneratorLSB]+=1e3:e===102?this.customControllers[oe.sf2NPRNGeneratorLSB]+=1e4:e<100&&(this.customControllers[oe.sf2NPRNGeneratorLSB]+=e)),this.dataEntryState=Ve.NRPFine;break;case S.dataEntryMSB:this.dataEntryCoarse(e);break;case S.dataEntryLSB:this.dataEntryFine(e);break;case S.resetAllControllers:this.resetControllersRP15Compliant();break;case S.sustainPedal:e<64&&(this.sustainedVoices.forEach(n=>{n.release(this.synth.currentSynthTime)}),this.sustainedVoices=[]);break;default:this.voices.forEach(n=>this.computeModulators(n,1,A));break}t&&this.synthProps.callEvent("controllerChange",{channel:this.channelNumber,controllerNumber:A,controllerValue:e})}}var gt={0:0,1:.006,2:.023,4:.05,8:.11,16:.25,32:.5,64:2.06,80:4.2,96:8.4,112:19.5,116:26.7,120:40,124:80,127:480};function so(A){if(gt[A]!==void 0)return gt[A];let e=null,t=null;for(let n of Object.keys(gt)){let s=parseInt(n);s<A&&(e===null||s>e)&&(e=s),s>A&&(t===null||s<t)&&(t=s)}if(e!==null&&t!==null){let n=gt[e],s=gt[t];return n+(A-e)*(s-n)/(t-e)}return 0}function ao(A,e){return so(A)*(e/30)}function io(A,e){if(e<1){this.noteOff(A);return}if(e=Math.min(127,e),this.synthProps.masterParameters.blackMIDIMode&&this.synth.totalVoicesAmount>200&&e<40||this.synthProps.masterParameters.blackMIDIMode&&e<10||this._isMuted)return;if(!this.preset){ne(`No preset for channel ${this.channelNumber}!`);return}let t=A+this.channelTransposeKeyShift+this.customControllers[oe.channelKeyShift],n=t;if(t>127||t<0)return;let s=this.preset?.program,a=this.synthProps.tunings[s]?.[t]?.midiNote;a>=0&&(n=a),this.synthProps.masterParameters.monophonicRetriggerMode&&this.killNote(A,-7200);let o=this.synth.keyModifierManager.getVelocity(this.channelNumber,t);o>-1&&(e=o);let r=this.synth.keyModifierManager.getGain(this.channelNumber,t),i=-1,g=0,c=this.midiControllers[S.portamentoTime]>>7,Q=this.midiControllers[S.portamentoControl],B=Q>>7;if(!this.drumChannel&&B!==n&&this.midiControllers[S.portamentoOnOff]>=8192&&c>0){if(Q!==1){let m=Math.abs(n-B);g=ao(c,m),i=B}this.controllerChange(S.portamentoControl,n)}let l=this.synthProps.getVoices(this.channelNumber,n,e,t),d=0;this.randomPan&&(d=Math.round(Math.random()*1e3-500));let p=this.voices;l.forEach(m=>{m.portamentoFromKey=i,m.portamentoDuration=g,m.overridePan=d,m.gain=r,this.sysExModulators.modulatorList.forEach(Ae=>{let _=Ae.mod,V=m.modulators.findIndex(H=>he.isIdentical(H,_));V!==-1?m.modulators[V]=he.copyFrom(_):m.modulators.push(he.copyFrom(_))}),this.generatorOverridesEnabled&&this.generatorOverrides.forEach((Ae,_)=>{Ae!==Ws&&(m.generators[_]=Ae)});let F=m.exclusiveClass;F!==0&&p.forEach(Ae=>{Ae.exclusiveClass===F&&Ae.exclusiveRelease(this.synth.currentSynthTime)}),this.computeModulators(m);let k=m.modulatedGenerators[I.startAddrsOffset]+m.modulatedGenerators[I.startAddrsCoarseOffset]*32768,G=m.modulatedGenerators[I.endAddrOffset]+m.modulatedGenerators[I.endAddrsCoarseOffset]*32768,x=m.modulatedGenerators[I.startloopAddrsOffset]+m.modulatedGenerators[I.startloopAddrsCoarseOffset]*32768,J=m.modulatedGenerators[I.endloopAddrsOffset]+m.modulatedGenerators[I.endloopAddrsCoarseOffset]*32768,E=m.sample,ee=Ae=>Math.max(0,Math.min(E.sampleData.length-1,Ae));if(E.cursor=ee(E.cursor+k),E.end=ee(E.end+G),E.loopStart=ee(E.loopStart+x),E.loopEnd=ee(E.loopEnd+J),E.loopEnd<E.loopStart){let Ae=E.loopStart;E.loopStart=E.loopEnd,E.loopEnd=Ae}E.loopEnd-E.loopStart<1&&(E.loopingMode===1||E.loopingMode===3)&&(E.loopingMode=0,E.isLooping=!1),m.volumeEnvelope.attenuation=m.volumeEnvelope.attenuationTargetGain,m.currentPan=Math.max(-500,Math.min(500,m.modulatedGenerators[I.pan]))}),this.synth.totalVoicesAmount+=l.length,this.synth.totalVoicesAmount>this.synthProps.masterParameters.voiceCap&&this.synthProps.voiceKilling(l.length),p.push(...l),this.sendChannelProperty(),this.synthProps.callEvent("noteOn",{midiNote:A,channel:this.channelNumber,velocity:e})}function oo(A){if(A>127||A<0){ne("Received a noteOn for note",A,"Ignoring.");return}let e=A+this.channelTransposeKeyShift+this.customControllers[oe.channelKeyShift];if(this.synthProps.masterParameters.blackMIDIMode&&!this.drumChannel){this.killNote(e,-6950),this.synthProps.callEvent("noteOff",{midiNote:A,channel:this.channelNumber});return}this.voices.forEach(n=>{n.realKey!==e||n.isInRelease||(this.holdPedal?this.sustainedVoices.push(n):n.release(this.synth.currentSynthTime))}),this.synthProps.callEvent("noteOff",{midiNote:A,channel:this.channelNumber})}function ro(A){if(this.lockPreset)return;this.patch.program=A;let e=this.synth.soundBankManager.getPreset(this.patch,this.channelSystem);e||(ne("No presets! Using empty fallback."),e=new yA(this.synth.soundBankManager.soundBankList[0].soundBank),e.name="SPESSA EMPTY FALLBACK PRESET"),this.preset=e,e.isAnyDrums!==this.drumChannel&&this.setDrumFlag(e.isAnyDrums),this.synthProps.callEvent("programChange",{channel:this.channelNumber,bankLSB:this.preset.bankLSB,bankMSB:this.preset.bankMSB,program:this.preset.program,isGMGSDrum:this.preset.isGMGSDrum}),this.sendChannelProperty()}var Io=class{modulatorList=[];resetModulators(){this.modulatorList=[]}setModulator(A,e,t,n=!1,s=!1){let a=this.getModulatorID(A,e,n,s);t===0&&this.deleteModulator(a);let o=this.modulatorList.find(r=>r.id===a);if(o)o.mod.transformAmount=t;else{let r,i;A>=me?(r=A-me,i=!1):(r=A,i=!0);let g=new he(new Ze(r,Qe.linear,i,n),new Ze,e,t,0);this.modulatorList.push({mod:g,id:a})}}getModulatorID(A,e,t,n){return`${A}-${e}-${t}-${n}`}deleteModulator(A){this.modulatorList=this.modulatorList.filter(e=>e.id!==A)}},go=1e3/200;function bs(A,e,t){if(e.transformAmount===0)return e.currentValue=0,0;let n=e.primarySource.getValue(A,t),s=e.secondarySource.getValue(A,t),a=e.transformAmount;e.isEffectModulator&&a<=1e3&&(a*=go,a=Math.min(a,1e3));let o=n*s*a;return e.transformType===2&&(o=Math.abs(o)),e.isDefaultResonantModulator&&(t.resonanceOffset=Math.max(0,o/2)),e.currentValue=o,o}function ho(A,e=-1,t=0){let n=A.modulators,s=A.generators;if(this.generatorOffsetsEnabled){s=new Int16Array(s);for(let g=0;g<s.length;g++)s[g]+=this.generatorOffsets[g]}let a=A.modulatedGenerators;if(e===-1){a.set(s),n.forEach(g=>{a[g.destination]+=bs(this.midiControllers,g,A)});for(let g=0;g<a.length;g++){let c=T[g];c&&(a[g]=Math.min(c.max,Math.max(c.min,a[g])))}LA.recalculate(A),zA.recalculate(A);return}let o=new Set([I.initialAttenuation,I.delayVolEnv,I.attackVolEnv,I.holdVolEnv,I.decayVolEnv,I.sustainVolEnv,I.releaseVolEnv,I.keyNumToVolEnvHold,I.keyNumToVolEnvDecay]),r=new Set,i=!!e;n.forEach(g=>{if(g.primarySource.isCC===i&&g.primarySource.index===t||g.secondarySource.isCC===i&&g.secondarySource.index===t){let c=g.destination;if(!r.has(c)){a[c]=s[c],bs(this.midiControllers,g,A),n.forEach(B=>{B.destination===c&&(a[c]+=B.currentValue)});let Q=T[c];a[c]=Math.max(Q.min,Math.min(a[c],Q.max)),r.add(c)}}}),[...r].some(g=>o.has(g))&&LA.recalculate(A),zA.recalculate(A)}var co=class{midiControllers=new Int16Array(Rn);lockedControllers=Array(Rn).fill(!1);customControllers=new Float32Array($s);channelTransposeKeyShift=0;channelOctaveTuning=new Int8Array(128);sysExModulators=new Io;drumChannel=!1;randomPan=!1;dataEntryState=Ve.Idle;patch={bankMSB:0,bankLSB:0,program:0,isGMGSDrum:!1};preset;lockPreset=!1;lockedSystem="gs";lockGSNRPNParams=!1;channelVibrato={delay:0,depth:0,rate:0};voices=[];sustainedVoices=[];channelNumber;synth;synthProps;noteOn=io.bind(this);noteOff=oo.bind(this);programChange=ro.bind(this);controllerChange=no.bind(this);resetControllers=Qi.bind(this);resetPreset=ui.bind(this);resetControllersRP15Compliant=fi.bind(this);resetParameters=mi.bind(this);dataEntryFine=to.bind(this);dataEntryCoarse=$i.bind(this);channelTuningCents=0;generatorOffsets=new Int16Array(wn);generatorOffsetsEnabled=!1;generatorOverrides=new Int16Array(wn);generatorOverridesEnabled=!1;renderVoice=_i.bind(this);panAndMixVoice=xi.bind(this);computeModulators=ho.bind(this);constructor(A,e,t,n){this.synth=A,this.synthProps=e,this.preset=t,this.channelNumber=n,this.resetGeneratorOverrides(),this.resetGeneratorOffsets()}_isMuted=!1;get isMuted(){return this._isMuted}get holdPedal(){return this.midiControllers[S.sustainPedal]>=8192}get channelSystem(){return this.lockPreset?this.lockedSystem:this.synthProps.masterParameters.midiSystem}transposeChannel(A,e=!1){this.drumChannel||(A+=this.synthProps.masterParameters.transposition);let t=Math.trunc(A),n=this.channelTransposeKeyShift+this.customControllers[oe.channelTransposeFine]/100;this.drumChannel&&!e||A===n||(t!==this.channelTransposeKeyShift&&this.stopAllNotes(),this.channelTransposeKeyShift=t,this.setCustomController(oe.channelTransposeFine,(A-t)*100),this.sendChannelProperty())}setOctaveTuning(A){if(A.length!==12)throw new Error("Tuning is not the length of 12.");this.channelOctaveTuning=new Int8Array(128);for(let e=0;e<128;e++)this.channelOctaveTuning[e]=A[e%12]}setModulationDepth(A){A=Math.round(A),y(`%cChannel ${this.channelNumber} modulation depth. Cents: %c${A}`,h.info,h.value),this.setCustomController(oe.modulationMultiplier,A/50)}setTuning(A,e=!0){A=Math.round(A),this.setCustomController(oe.channelTuning,A),e&&y(`%cFine tuning for %c${this.channelNumber}%c is now set to %c${A}%c cents.`,h.info,h.recognized,h.info,h.value,h.info)}pitchWheel(A){this.lockedControllers[me+z.pitchWheel]||(this.synthProps.callEvent("pitchWheel",{channel:this.channelNumber,pitch:A}),this.midiControllers[me+z.pitchWheel]=A,this.voices.forEach(e=>this.computeModulators(e,0,z.pitchWheel)),this.sendChannelProperty())}channelPressure(A){this.midiControllers[me+z.channelPressure]=A<<7,this.updateChannelTuning(),this.voices.forEach(e=>this.computeModulators(e,0,z.channelPressure)),this.synthProps.callEvent("channelPressure",{channel:this.channelNumber,pressure:A})}polyPressure(A,e){this.voices.forEach(t=>{t.midiNote===A&&(t.pressure=e,this.computeModulators(t,0,z.polyPressure))}),this.synthProps.callEvent("polyPressure",{channel:this.channelNumber,midiNote:A,pressure:e})}setCustomController(A,e){this.customControllers[A]=e,this.updateChannelTuning()}updateChannelTuning(){this.channelTuningCents=this.customControllers[oe.channelTuning]+this.customControllers[oe.channelTransposeFine]+this.customControllers[oe.masterTuning]+this.customControllers[oe.channelTuningSemitones]*100}renderAudio(A,e,t,n,s,a,o,r){this.voices=this.voices.filter(i=>!this.renderVoice(i,this.synth.currentSynthTime,A,e,t,n,s,a,o,r))}setPresetLock(A){this.lockPreset!==A&&(this.lockPreset=A,A&&(this.lockedSystem=this.synthProps.masterParameters.midiSystem))}setDrums(A){if(fe.isSystemXG(this.channelSystem))if(A)this.setBankMSB(fe.getDrumBank(this.channelSystem)),this.setBankLSB(0);else{if(this.channelNumber%16===lA)throw new Error(`Cannot disable drums on channel ${this.channelNumber} for XG.`);this.setBankMSB(0),this.setBankLSB(0)}else this.setGSDrums(A);this.setDrumFlag(A),this.programChange(this.patch.program)}setPatch(A){this.setBankMSB(A.bankMSB),this.setBankLSB(A.bankLSB),this.setGSDrums(A.isGMGSDrum),this.programChange(A.program)}setGSDrums(A){A!==this.patch.isGMGSDrum&&(this.setBankLSB(0),this.setBankMSB(0),this.patch.isGMGSDrum=A)}setVibrato(A,e,t){this.lockGSNRPNParams||(this.channelVibrato.rate=e,this.channelVibrato.delay=t,this.channelVibrato.depth=A)}disableAndLockGSNRPN(){this.lockGSNRPNParams=!0,this.channelVibrato.rate=0,this.channelVibrato.delay=0,this.channelVibrato.depth=0}resetGeneratorOverrides(){this.generatorOverrides.fill(Ws),this.generatorOverridesEnabled=!1}setGeneratorOverride(A,e,t=!1){this.generatorOverrides[A]=e,this.generatorOverridesEnabled=!0,t&&this.voices.forEach(n=>{n.generators[A]=e,this.computeModulators(n)})}resetGeneratorOffsets(){this.generatorOffsets.fill(0),this.generatorOffsetsEnabled=!1}setGeneratorOffset(A,e){this.generatorOffsets[A]=e*T[A].nrpn,this.generatorOffsetsEnabled=!0,this.voices.forEach(t=>{this.computeModulators(t)})}killNote(A,e=-12e3){A+=this.customControllers[oe.channelKeyShift],this.voices.forEach(t=>{t.realKey===A&&(t.modulatedGenerators[I.releaseVolEnv]=e,t.release(this.synth.currentSynthTime))})}stopAllNotes(A=!1){A?(this.voices.length=0,this.sustainedVoices.length=0,this.sendChannelProperty()):(this.voices.forEach(e=>{e.isInRelease||e.release(this.synth.currentSynthTime)}),this.sustainedVoices.forEach(e=>{e.release(this.synth.currentSynthTime)})),this.synthProps.callEvent("stopAll",{channel:this.channelNumber,force:A})}muteChannel(A){A&&this.stopAllNotes(!0),this._isMuted=A,this.sendChannelProperty(),this.synthProps.callEvent("muteChannel",{channel:this.channelNumber,isMuted:A})}sendChannelProperty(){if(!this.synth.enableEventSystem)return;let A={voicesAmount:this.voices.length,pitchWheel:this.midiControllers[me+z.pitchWheel],pitchWheelRange:this.midiControllers[me+z.pitchWheelRange]/128,isMuted:this.isMuted,transposition:this.channelTransposeKeyShift+this.customControllers[oe.channelTransposeFine]/100,isDrum:this.drumChannel};this.synthProps.callEvent("channelPropertyChange",{channel:this.channelNumber,property:A})}setBankMSB(A){this.lockPreset||(this.patch.bankMSB=A)}setBankLSB(A){this.lockPreset||(this.patch.bankLSB=A)}setDrumFlag(A){this.lockPreset||!this.preset||this.drumChannel!==A&&(A?(this.channelTransposeKeyShift=0,this.drumChannel=!0):this.drumChannel=!1,this.synthProps.callEvent("drumChange",{channel:this.channelNumber,isDrumChannel:this.drumChannel}))}},fn=20;async function Eo(A,e,t,n,s,a,o){let r=0,i=0,g=[];for(let B of A.samples){n&&a&&await B.compressSample(a),s&&B.setAudioData(B.getAudioData(),B.sampleRate);let l=B.getRawData(!0);r++,await o?.(B.name,r,A.samples.length),y(`%cEncoded sample %c${r}. ${B.name}%c of %c${A.samples.length}%c. Compressed: %c${B.isCompressed}%c.`,h.info,h.recognized,h.info,h.recognized,h.info,B.isCompressed?h.recognized:h.unrecognized,h.info),i+=l.length+(B.isCompressed?0:92),g.push(l)}i%2!==0&&i++;let c=new Y(i+fn);ke(c,"LIST"),Bt(c,i+fn-8,4),ke(c,"sdta"),ke(c,"smpl"),Bt(c,i,4);let Q=0;return A.samples.forEach((B,l)=>{let d=g[l];c.set(d,Q+fn);let p,m;B.isCompressed?(p=Q,m=p+d.length):(p=Q/2,m=p+d.length/2,Q+=92),Q+=d.length,e.push(p),t.push(m)}),c}var lo=48e3,Xt=class{name;sampleRate;originalKey;pitchCorrection;linkedSample;sampleType;loopStart;loopEnd;linkedTo=[];dataOverridden=!0;compressedData;audioData;constructor(A,e,t,n,s,a,o){this.name=A,this.sampleRate=e,this.originalKey=t,this.pitchCorrection=n,this.loopStart=a,this.loopEnd=o,this.sampleType=s}get isCompressed(){return this.compressedData!==void 0}get isLinked(){return this.sampleType===we.rightSample||this.sampleType===we.leftSample||this.sampleType===we.linkedSample}get useCount(){return this.linkedTo.length}getRawData(A){return this.compressedData&&A&&!this.dataOverridden?this.compressedData:this.encodeS16LE()}resampleData(A){let e=this.getAudioData(),t=A/this.sampleRate,n=new Float32Array(Math.floor(e.length*t));for(let s=0;s<n.length;s++)n[s]=e[Math.floor(s*(1/t))];e=n,this.sampleRate=A,this.loopStart=Math.floor(this.loopStart*t),this.loopEnd=Math.floor(this.loopEnd*t),this.audioData=e}async compressSample(A){if(!this.isCompressed)try{let e=this.getAudioData();(this.sampleRate<8e3||this.sampleRate>96e3)&&(this.resampleData(lo),e=this.getAudioData());let t=await A(e,this.sampleRate);this.setCompressedData(t)}catch(e){ne(`Failed to compress ${this.name}. Leaving as uncompressed!`,e),this.compressedData=void 0}}setSampleType(A){if(this.sampleType=A,this.isLinked||(this.linkedSample&&(this.linkedSample.linkedSample=void 0,this.linkedSample.sampleType=A),this.linkedSample=void 0),(A&32768)>0)throw new Error("ROM samples are not supported.")}unlinkSample(){this.setSampleType(we.monoSample)}setLinkedSample(A,e){if(A.linkedSample)throw new Error(`${A.name} is linked tp ${A.linkedSample.name}. Unlink it first.`);if(this.linkedSample=A,A.linkedSample=this,e===we.leftSample)this.setSampleType(we.leftSample),A.setSampleType(we.rightSample);else if(e===we.rightSample)this.setSampleType(we.rightSample),A.setSampleType(we.leftSample);else if(e===we.linkedSample)this.setSampleType(we.linkedSample),A.setSampleType(we.linkedSample);else throw new Error("Invalid sample type: "+e)}linkTo(A){this.linkedTo.push(A)}unlinkFrom(A){let e=this.linkedTo.indexOf(A);if(e<0){ne(`Cannot unlink ${A.name} from ${this.name}: not linked.`);return}this.linkedTo.splice(e,1)}getAudioData(){if(this.audioData)return this.audioData;if(this.isCompressed)return this.audioData=this.decodeVorbis(),this.audioData;throw new Error("Sample data is undefined for a BasicSample instance.")}setAudioData(A,e){this.audioData=A,this.sampleRate=e,this.dataOverridden=!0,this.compressedData=void 0}setCompressedData(A){this.audioData=void 0,this.compressedData=A,this.dataOverridden=!1}encodeS16LE(){let A=this.getAudioData(),e=new Int16Array(A.length),t=A.length;for(let n=0;n<t;n++){let s=A[n]*32768;s>32767?s=32767:s<-32768&&(s=-32768),e[n]=s}return new Y(e.buffer)}decodeVorbis(){if(this.audioData)return this.audioData;if(!this.compressedData)throw new Error("Compressed data is missing.");try{let e=Pt.decode(this.compressedData).data[0];if(e===void 0)return ne(`Error decoding sample ${this.name}: Vorbis decode returned undefined.`),new Float32Array(0);for(let t=0;t<e.length;t++)e[t]=Math.max(-1,Math.min(e[t],.999969482421875));return e}catch(A){return ne(`Error decoding sample ${this.name}: ${A}`),new Float32Array(this.loopEnd+1)}}},Co=class extends Xt{constructor(){super("",44100,60,0,we.monoSample,0,0)}},qn=16,Bo=class extends Xt{linkedSampleIndex;s16leData;startByteOffset;endByteOffset;sampleID;constructor(A,e,t,n,s,a,o,r,i,g,c,Q){let B=(g&qn)>0;g&=~qn,super(A,a,o,r,g,n-e/2,s-e/2),this.dataOverridden=!1,this.name=A,this.startByteOffset=e,this.endByteOffset=t,this.sampleID=Q;let l=c instanceof Y?c.currentIndex:0;c instanceof Y?B?(this.loopStart+=this.startByteOffset/2,this.loopEnd+=this.startByteOffset/2,this.setCompressedData(c.slice(this.startByteOffset/2+l,this.endByteOffset/2+l))):this.s16leData=c.slice(l+this.startByteOffset,l+this.endByteOffset):this.setAudioData(c.slice(this.startByteOffset/2,this.endByteOffset/2),a),this.linkedSampleIndex=i}getLinkedSample(A){if(this.linkedSample||!this.isLinked)return;let e=A[this.linkedSampleIndex];e?e.linkedSample?(y(`%cInvalid linked sample for ${this.name}: ${e.name} is already linked to ${e.linkedSample.name}`,h.warn),this.unlinkSample()):this.setLinkedSample(e,this.sampleType):(y(`%cInvalid linked sample for ${this.name}. Setting to mono.`,h.warn),this.unlinkSample())}getAudioData(){if(this.audioData)return this.audioData;if(this.isCompressed)return super.getAudioData();if(!this.s16leData)throw console.error(this),new Error("Unexpected lack of audio data.");let A=this.endByteOffset-this.startByteOffset;if(A<1)return ne(`Invalid sample ${this.name}! Invalid length: ${A}`),new Float32Array(1);let e=new Float32Array(A/2),t=new Int16Array(this.s16leData.buffer);for(let n=0;n<t.length;n++)e[n]=t[n]/32768;return this.audioData=e,e}getRawData(A){return this.dataOverridden||this.compressedData?super.getRawData(A):this.s16leData??new Uint8Array(0)}};function Ls(A,e,t=!0){let n=[],s=0;for(;A.data.length>A.data.currentIndex;){let a=Qo(s,A.data,e);n.push(a),s++}return n.pop(),t&&n.forEach(a=>a.getLinkedSample(n)),n}function Qo(A,e,t){let n=Ce(e,20),s=L(e,4)*2,a=L(e,4)*2,o=L(e,4),r=L(e,4),i=L(e,4),g=e[e.currentIndex++];g>127&&(g=60);let c=Ka(e[e.currentIndex++]),Q=L(e,2),B=L(e,2);return new Bo(n,s,a,o,r,i,g,c,Q,B,t,A)}function uo(A,e,t){let s=46*(A.samples.length+1),a=new Y(s),o=new Y(s),r=0;A.samples.forEach((c,Q)=>{ke(a,c.name.substring(0,20),20),ke(o,c.name.substring(20),20);let B=e[Q];re(a,B),o.currentIndex+=4;let l=t[Q];re(a,l),o.currentIndex+=4;let d=c.loopStart+B,p=c.loopEnd+B;c.isCompressed&&(d-=B,p-=B),re(a,d),re(a,p),re(a,c.sampleRate),a[a.currentIndex++]=c.originalKey,a[a.currentIndex++]=c.pitchCorrection,o.currentIndex+=14;let m=c.linkedSample?A.samples.indexOf(c.linkedSample):0;q(a,Math.max(0,m)&65535),q(o,Math.max(0,m)>>16),r=Math.max(r,m);let F=c.sampleType;c.isCompressed&&(F|=qn),q(a,F),o.currentIndex+=2}),ke(a,"EOS",46),ke(o,"EOS",46);let i=Ie("shdr",a),g=Ie("shdr",o);return{pdta:i,xdta:g}}function vs(A,e=!1){let t=e?A.presets:A.instruments,n=e?"pgen":"igen",s=e?"pmod":"imod",a=e?"pbag":"ibag",o=e?"phdr":"inst",r=e?la:Ea,i=t.map(k=>(k instanceof yA,k.getSize())),g=i.reduce((k,G)=>k+G.gen,0)+Ct,c=new Y(g),Q=i.reduce((k,G)=>k+G.mod,0)+SA,B=new Y(Q),l=i.reduce((k,G)=>k+G.bag,0)+Yt,d={pdta:new Y(l),xdta:new Y(l)},p=i.reduce((k,G)=>G.hdr+k,0)+r,m={pdta:new Y(p),xdta:new Y(p)},F={gen:0,bag:0,mod:0,hdr:0};return t.forEach(k=>{k instanceof yA,k.write(c,B,d,m,F,A)}),e?(ke(m.pdta,"EOP",20),m.pdta.currentIndex+=4,q(m.pdta,F.hdr&65535),m.pdta.currentIndex+=12,ke(m.xdta,"",20),m.xdta.currentIndex+=4,q(m.xdta,F.hdr>>16),m.xdta.currentIndex+=12):(ke(m.pdta,"EOI",20),ke(m.xdta,"",20),q(m.pdta,F.hdr&65535),q(m.xdta,F.hdr>>16)),q(d.pdta,F.gen&65535),q(d.xdta,F.gen>>16),q(d.pdta,F.mod&65535),q(d.xdta,F.mod>>16),{writeXdta:Math.max(g/Ct,Q/SA,l/Yt,p/r)>65535,gen:{pdta:Ie(n,c),xdta:Ie(s,new Y(Ct))},mod:{pdta:Ie(s,B),xdta:Ie(s,new Y(SA))},bag:{pdta:Ie(a,d.pdta),xdta:Ie(a,d.xdta)},hdr:{pdta:Ie(o,m.pdta),xdta:Ie(o,m.xdta)}}}var On={compress:!1,compressionFunction:void 0,progressFunction:void 0,writeDefaultModulators:!0,writeExtendedLimits:!0,decompress:!1};async function fo(A,e=On){let t=jn(e,On);if(t?.compress){if(typeof t?.compressionFunction!="function")throw new Error("No compression function supplied but compression enabled.");if(t?.decompress)throw new Error("Decompressed and compressed at the same time.")}Ge("%cSaving soundbank...",h.info),y(`%cCompression: %c${t?.compress||"false"}%c`,h.info,h.recognized,h.info,h.recognized),He("%cWriting INFO...",h.info);let n=[];A.soundBankInfo.software="SpessaSynth",(t?.compress||A.samples.some(G=>G.isCompressed))&&(A.soundBankInfo.version.major=3,A.soundBankInfo.version.minor=0),t?.decompress&&(A.soundBankInfo.version.major=2,A.soundBankInfo.version.minor=4);let s=(G,x)=>{n.push(Ie(G,aA(x,!0,!0)))},a=new Y(4);if(q(a,A.soundBankInfo.version.major),q(a,A.soundBankInfo.version.minor),n.push(Ie("ifil",a)),A.soundBankInfo.romVersion){let G=new Y(4);q(G,A.soundBankInfo.romVersion.major),q(G,A.soundBankInfo.romVersion.minor),n.push(Ie("iver",G))}let o=(A.soundBankInfo?.comment??"")+(A.soundBankInfo.subject?`
${A.soundBankInfo.subject}`:"");for(let[G,x]of Object.entries(A.soundBankInfo)){let J=G,E=x;if(E)switch(J){case"name":s("INAM",E);break;case"comment":s("ICMT",o);break;case"copyright":s("ICOP",E);break;case"creationDate":s("ICRD",E.toISOString());break;case"engineer":s("IENG",E);break;case"product":s("IPRD",E);break;case"romInfo":s("irom",E);break;case"software":s("ISFT",E);break;case"soundEngine":s("isng",E);break;case"subject":break}}if(A.defaultModulators.some(G=>Ia.findIndex(x=>he.isIdentical(x,G,!0))===-1)&&t?.writeDefaultModulators){let G=A.defaultModulators;y(`%cWriting %c${G.length}%c default modulators...`,h.info,h.recognized,h.info);let x=SA+G.length*SA,J=new Y(x);for(let E of G)E.write(J);Bt(J,0,SA),n.push(Ie("DMOD",J))}Z(),y("%cWriting SDTA...",h.info);let i=[],g=[],c=await Eo(A,i,g,t.compress,t.decompress,t?.compressionFunction,t?.progressFunction);y("%cWriting PDTA...",h.info),y("%cWriting SHDR...",h.info);let Q=uo(A,i,g);He("%cWriting instruments...",h.info);let B=vs(A,!1);Z(),He("%cWriting presets...",h.info);let l=vs(A,!0);Z();let d=[l.hdr,l.bag,l.mod,l.gen,B.hdr,B.bag,B.mod,B.gen,Q],p=be("pdta",d.map(G=>G.pdta),!0);if(t.writeExtendedLimits&&(B.writeXdta||l.writeXdta||A.presets.some(G=>G.name.length>20)||A.instruments.some(G=>G.name.length>20)||A.samples.some(G=>G.name.length>20))){y("%cWriting the xdta chunk as writeExendedLimits is enabled and at least one condition was met.",h.info,h.value);let G=be("xdta",d.map(x=>x.xdta),!0);n.push(G)}let F=be("INFO",n,!0);y("%cWriting the output file...",h.info);let k=be("RIFF",[aA("sfbk"),F,c,p]);return y(`%cSaved succesfully! Final file size: %c${k.length}`,h.info,h.recognized),Z(),k.buffer}var _A=class{static verifyHeader(A,...e){for(let t of e)if(A.header.toLowerCase()===t.toLowerCase())return;this.parsingError(`Invalid DLS chunk header! Expected "${e.join(", or ")}" got "${A.header.toLowerCase()}"`)}static verifyText(A,...e){for(let t of e)if(A.toLowerCase()===t.toLowerCase())return;this.parsingError(`FourCC error: Expected "${e.join(", or ")}" got "${A.toLowerCase()}"`)}static parsingError(A){throw Z(),new Error(`DLS parse error: ${A} The file may be corrupted.`)}static verifyAndReadList(A,...e){this.verifyHeader(A,"LIST"),A.data.currentIndex=0,this.verifyText(Ce(A.data,4),...e);let t=[];for(;A.data.length>A.data.currentIndex;)t.push(ae(A.data));return t}},ht=20,mn=16,XA=class lt extends _A{gain=0;unityNote=60;fineTune=0;loops=new Array;fulOptions=2;static copyFrom(e){let t=new lt;return t.unityNote=e.unityNote,t.gain=e.gain,t.fineTune=e.fineTune,t.loops=e.loops.map(n=>({...n})),t.fulOptions=e.fulOptions,t}static read(e){this.verifyHeader(e,"wsmp");let t=new lt,n=L(e.data,4);if(n!==ht&&ne(`Wsmp cbSize mismatch: got ${n}, expected ${ht}.`),t.unityNote=L(e.data,2),t.fineTune=Xn(e.data[e.data.currentIndex++],e.data[e.data.currentIndex++]),t.gain=L(e.data,4)|0,t.fulOptions=L(e.data,4),L(e.data,4)!==0){let a=L(e.data,4);a!==mn&&ne(`CbSize for loop in wsmp mismatch. Expected ${ht}, got ${a}.`);let o=L(e.data,4),r=L(e.data,4),i=L(e.data,4);t.loops.push({loopStart:r,loopLength:i,loopType:o})}return t}static fromSFSample(e){let t=new lt;return t.unityNote=e.originalKey,t.fineTune=e.pitchCorrection,(e.loopEnd!==0||e.loopStart!==0)&&t.loops.push({loopStart:e.loopStart,loopLength:e.loopEnd-e.loopStart,loopType:Fs.forward}),t}static fromSFZone(e){let t=new lt;t.unityNote=e.getGenerator(I.overridingRootKey,e.sample.originalKey),e.getGenerator(I.scaleTuning,100)===0&&e.keyRange.max-e.keyRange.min===0&&(t.unityNote=e.keyRange.min),t.fineTune=e.fineTuning+e.sample.pitchCorrection;let n=e.getGenerator(I.initialAttenuation,0)*.4;t.gain=-n<<16;let s=e.getGenerator(I.sampleModes,0);if(s!==0){let a=e.sample.loopStart+e.getGenerator(I.startloopAddrsOffset,0)+e.getGenerator(I.startloopAddrsCoarseOffset,0)*32768,o=e.sample.loopEnd+e.getGenerator(I.endloopAddrsOffset,0)+e.getGenerator(I.endloopAddrsCoarseOffset,0)*32768,r;switch(s){case 1:default:r=0;break;case 3:r=1}t.loops.push({loopType:r,loopStart:a,loopLength:o-a})}return t}toSFZone(e,t){let n=0,s=this.loops[0];s&&(n=s.loopType===Fs.loopAndRelease?3:1),n!==0&&e.setGenerator(I.sampleModes,n);let r=-(this.gain>>16)/.4;if(r!==0&&e.setGenerator(I.initialAttenuation,r),e.fineTuning=this.fineTune-t.pitchCorrection,this.unityNote!==t.originalKey&&e.setGenerator(I.overridingRootKey,this.unityNote),s){let i=s.loopStart-t.loopStart,c=s.loopStart+s.loopLength-t.loopEnd;if(i!==0){let Q=i%32768;e.setGenerator(I.startloopAddrsOffset,Q);let B=Math.trunc(i/32768);B!==0&&e.setGenerator(I.startloopAddrsCoarseOffset,B)}if(c!==0){let Q=c%32768;e.setGenerator(I.endloopAddrsOffset,Q);let B=Math.trunc(c/32768);B!==0&&e.setGenerator(I.endloopAddrsCoarseOffset,B)}}}write(){let e=new Y(ht+this.loops.length*mn);return re(e,ht),q(e,this.unityNote),q(e,this.fineTune),re(e,this.gain),re(e,this.fulOptions),re(e,this.loops.length),this.loops.forEach(t=>{re(e,mn),re(e,t.loopType),re(e,t.loopStart),re(e,t.loopLength)}),Ie("wsmp",e)}},pn={PCM:1,ALAW:6};function mo(A,e){let t=Math.pow(2,e*8-1),n=Math.pow(2,e*8),s,a=!1;e===1?(s=255,a=!0):s=t;let o=A.length/e,r=new Float32Array(o);if(e===2){let i=new Int16Array(A.buffer);for(let g=0;g<i.length;g++)r[g]=i[g]/32768}else for(let i=0;i<r.length;i++){let g=L(A,e);a?r[i]=g/s-.5:(g>=t&&(g-=n),r[i]=g/s)}return r}function po(A,e){let t=A.length/e,n=new Float32Array(t);for(let s=0;s<n.length;s++){let a=L(A,e),o=a^85;o&=127;let r=o>>4,i=o&15;r>0&&(i+=16),i=(i<<4)+8,r>1&&(i=i<<r-1);let g=a>127?i:-i;n[s]=g/32678}return n}var So=class extends Xt{wFormatTag;bytesPerSample;rawData;constructor(A,e,t,n,s,a,o,r,i){super(A,e,t,n,we.monoSample,s,a),this.dataOverridden=!1,this.rawData=o.data,this.wFormatTag=r,this.bytesPerSample=i}getAudioData(){if(!this.rawData)return new Float32Array(0);if(!this.audioData){let A;switch(this.wFormatTag){default:ne(`Failed to decode sample. Unknown wFormatTag: ${this.wFormatTag}`),A=new Float32Array(this.rawData.length/this.bytesPerSample);break;case pn.PCM:A=mo(this.rawData,this.bytesPerSample);break;case pn.ALAW:A=po(this.rawData,this.bytesPerSample);break}this.setAudioData(A,this.sampleRate)}return this.audioData??new Float32Array(0)}getRawData(A){return this.dataOverridden||this.isCompressed?super.getRawData(A):this.wFormatTag===pn.PCM&&this.bytesPerSample===2?this.rawData:this.encodeS16LE()}},Us=class Pn extends _A{waveSample=new XA;wFormatTag;bytesPerSample;sampleRate;dataChunk;name="Unnamed sample";constructor(e,t,n,s){super(),this.wFormatTag=e,this.bytesPerSample=t,this.sampleRate=n,this.dataChunk=s}static read(e){let t=this.verifyAndReadList(e,"wave"),n=t.find(l=>l.header==="fmt ");if(!n)throw new Error("No fmt chunk in the wave file!");let s=L(n.data,2),a=L(n.data,2);if(a!==1)throw new Error(`Only mono samples are supported. Fmt reports ${a} channels.`);let o=L(n.data,4);L(n.data,4),L(n.data,2);let i=L(n.data,2)/8,g=t.find(l=>l.header==="data");if(!g)throw new Error("No data chunk in the WAVE chunk!");let c=new Pn(s,i,o,g),Q=pA(t,"INFO");if(Q){let l=ae(Q.data);for(;l.header!=="INAM"&&Q.data.currentIndex<Q.data.length;)l=ae(Q.data);l.header==="INAM"&&(c.name=Ce(l.data,l.size).trim())}let B=t.find(l=>l.header==="wsmp");return B&&(c.waveSample=XA.read(B)),c}static fromSFSample(e){let t=e.getRawData(!1),n=new Pn(1,2,e.sampleRate,new xs("data",t.length,new Y(t.buffer)));return n.name=e.name,n.waveSample=XA.fromSFSample(e),n}toSFSample(e){let t=this.waveSample.unityNote,n=this.waveSample.fineTune,s=Math.trunc(n/100);t+=s,n-=s*100;let a=0,o=0,r=this.waveSample.loops?.[0];r&&(a=r.loopStart,o=r.loopStart+r.loopLength);let i=new So(this.name,this.sampleRate,t,n,a,o,this.dataChunk,this.wFormatTag,this.bytesPerSample);e.addSamples(i)}write(){let e=this.writeFmt(),t=this.waveSample.write(),n=Ie("data",this.dataChunk.data),s=Ie("INAM",aA(this.name,!0)),a=Ie("INFO",s,!1,!0);return y(`%cSaved %c${this.name}%c successfully!`,h.recognized,h.value,h.recognized),be("wave",[e,t,n,a],!0)}writeFmt(){let e=new Y(18);return q(e,this.wFormatTag),q(e,1),re(e,this.sampleRate),re(e,this.sampleRate*2),q(e,2),q(e,this.bytesPerSample*8),Ie("fmt ",e)}},pa=new ye(219,0,I.reverbEffectsSend,1e3,0),Sa=new ye(221,0,I.chorusEffectsSend,1e3,0),yo=new ye(129,0,I.vibLfoToPitch,0,0),ko=new ye(13,0,I.vibLfoToPitch,0,0),We=class Hn{source;transform;bipolar;invert;constructor(e=U.none,t=Qe.linear,n=!1,s=!1){this.source=e,this.transform=t,this.bipolar=n,this.invert=s}get sourceName(){return Object.keys(U).find(e=>U[e]===this.source)??this.source.toString()}get transformName(){return Object.keys(Qe).find(e=>Qe[e]===this.transform)??this.transform.toString()}static copyFrom(e){return new Hn(e.source,e.transform,e.bipolar,e.invert)}static fromSFSource(e){let t;if(e.isCC)switch(e.index){case S.modulationWheel:t=U.modulationWheel;break;case S.mainVolume:t=U.volume;break;case S.pan:t=U.pan;break;case S.expressionController:t=U.expression;break;case S.chorusDepth:t=U.chorus;break;case S.reverbDepth:t=U.reverb;break}else switch(e.index){case z.noController:t=U.none;break;case z.noteOnKeyNum:t=U.keyNum;break;case z.noteOnVelocity:t=U.velocity;break;case z.pitchWheel:t=U.pitchWheel;break;case z.pitchWheelRange:t=U.pitchWheelRange;break;case z.polyPressure:t=U.polyPressure;break;case z.channelPressure:t=U.channelPressure}if(t!==void 0)return new Hn(t,e.curveType,e.isBipolar,e.isNegative)}toString(){return`${this.sourceName} ${this.transformName} ${this.bipolar?"bipolar":"unipolar"} ${this.invert?"inverted":"positive"}`}toTransformFlag(){return this.transform|(this.bipolar?1:0)<<4|(this.invert?1:0)<<5}toSFSource(){let e,t=!1;switch(this.source){default:case U.modLfo:case U.vibratoLfo:case U.coarseTune:case U.fineTune:case U.modEnv:return;case U.keyNum:e=z.noteOnKeyNum;break;case U.none:e=z.noController;break;case U.modulationWheel:e=S.modulationWheel,t=!0;break;case U.pan:e=S.pan,t=!0;break;case U.reverb:e=S.reverbDepth,t=!0;break;case U.chorus:e=S.chorusDepth,t=!0;break;case U.expression:e=S.expressionController,t=!0;break;case U.volume:e=S.mainVolume,t=!0;break;case U.velocity:e=z.noteOnVelocity;break;case U.polyPressure:e=z.polyPressure;break;case U.channelPressure:e=z.channelPressure;break;case U.pitchWheel:e=z.pitchWheel;break;case U.pitchWheelRange:e=z.pitchWheelRange;break}if(e!==void 0)return new Ze(e,this.transform,t,this.bipolar,this.invert)}},Fo=new Set([I.sampleModes,I.initialAttenuation,I.keyRange,I.velRange,I.sampleID,I.fineTune,I.coarseTune,I.startAddrsOffset,I.startAddrsCoarseOffset,I.endAddrOffset,I.endAddrsCoarseOffset,I.startloopAddrsOffset,I.startloopAddrsCoarseOffset,I.endloopAddrsOffset,I.endloopAddrsCoarseOffset,I.overridingRootKey,I.exclusiveClass]),ct=class GA{source;control;destination;scale;transform;constructor(e=new We,t=new We,n,s,a){this.source=e,this.control=t,this.destination=n,this.transform=s,this.scale=a}get isStaticParameter(){return this.source.source===U.none&&this.control.source===U.none}get shortScale(){return this.scale>>16}get transformName(){return Object.keys(Qe).find(e=>Qe[e]===this.transform)??this.transform.toString()}get destinationName(){return Object.keys(M).find(e=>M[e]===this.destination)??this.destination.toString()}static read(e){let t=L(e,2),n=L(e,2),s=L(e,2),a=L(e,2),o=L(e,4)|0,r=a&15,i=a>>4&15,g=bA(a,8),c=bA(a,9),Q=new We(n,i,g,c),B=a>>10&15,l=bA(a,14),d=bA(a,15),p=new We(t,B,l,d);return new GA(p,Q,s,r,o)}static fromSFModulator(e,t){let n=c=>{ne(`Failed converting SF modulator into DLS:
 ${e.toString()} 
(${c})`)};if(e.transformType!==0){n("Absolute transform type is not supported");return}if(he.isIdentical(e,Sa,!0)||he.isIdentical(e,pa,!0))return;let s=We.fromSFSource(e.primarySource);if(!s){n("Invalid primary source");return}let a=We.fromSFSource(e.secondarySource);if(!a){n("Invalid secondary source");return}let o=GA.fromSFDestination(e.destination,e.transformAmount);if(o===void 0){n("Invalid destination");return}let r=e.transformAmount,i;if(typeof o=="number")i=o;else if(i=o.destination,r=o.amount,o.source!==U.none){if(a.source!==U.none&&s.source!==U.none){n("Articulation generators with secondary source are not supported");return}s.source!==U.none&&(a=s),s=new We(o.source,Qe.linear,o.isBipolar)}let g=new GA(s,a,i,0,r<<16);t.connectionBlocks.push(g)}static copyFrom(e){return new GA(We.copyFrom(e.source),We.copyFrom(e.control),e.destination,e.transform,e.scale)}static fromSFGenerator(e,t){if(Fo.has(e.generatorType))return;let n=i=>{ne(`Failed converting SF2 generator into DLS:
 ${e.toString()} 
(${i})`)},s=GA.fromSFDestination(e.generatorType,e.generatorValue);if(s===void 0){n("Invalid type");return}let a=new We,o,r=e.generatorValue;typeof s=="number"?o=s:(o=s.destination,r=s.amount,a.source=s.source,a.bipolar=s.isBipolar),t.connectionBlocks.push(new GA(a,new We,o,0,r<<16))}static fromSFDestination(e,t){switch(e){default:return;case I.initialAttenuation:return{destination:M.gain,amount:-t,isBipolar:!1,source:U.none};case I.fineTune:return M.pitch;case I.pan:return M.pan;case I.keyNum:return M.keyNum;case I.reverbEffectsSend:return M.reverbSend;case I.chorusEffectsSend:return M.chorusSend;case I.freqModLFO:return M.modLfoFreq;case I.delayModLFO:return M.modLfoDelay;case I.delayVibLFO:return M.vibLfoDelay;case I.freqVibLFO:return M.vibLfoFreq;case I.delayVolEnv:return M.volEnvDelay;case I.attackVolEnv:return M.volEnvAttack;case I.holdVolEnv:return M.volEnvHold;case I.decayVolEnv:return M.volEnvDecay;case I.sustainVolEnv:return{destination:M.volEnvSustain,amount:1e3-t,isBipolar:!1,source:U.none};case I.releaseVolEnv:return M.volEnvRelease;case I.delayModEnv:return M.modEnvDelay;case I.attackModEnv:return M.modEnvAttack;case I.holdModEnv:return M.modEnvHold;case I.decayModEnv:return M.modEnvDecay;case I.sustainModEnv:return{destination:M.modEnvSustain,amount:1e3-t,isBipolar:!1,source:U.none};case I.releaseModEnv:return M.modEnvRelease;case I.initialFilterFc:return M.filterCutoff;case I.initialFilterQ:return M.filterQ;case I.modEnvToFilterFc:return{source:U.modEnv,destination:M.filterCutoff,amount:t,isBipolar:!1};case I.modEnvToPitch:return{source:U.modEnv,destination:M.pitch,amount:t,isBipolar:!1};case I.modLfoToFilterFc:return{source:U.modLfo,destination:M.filterCutoff,amount:t,isBipolar:!0};case I.modLfoToVolume:return{source:U.modLfo,destination:M.gain,amount:t,isBipolar:!0};case I.modLfoToPitch:return{source:U.modLfo,destination:M.pitch,amount:t,isBipolar:!0};case I.vibLfoToPitch:return{source:U.vibratoLfo,destination:M.pitch,amount:t,isBipolar:!0};case I.keyNumToVolEnvHold:return{source:U.keyNum,destination:M.volEnvHold,amount:t,isBipolar:!0};case I.keyNumToVolEnvDecay:return{source:U.keyNum,destination:M.volEnvDecay,amount:t,isBipolar:!0};case I.keyNumToModEnvHold:return{source:U.keyNum,destination:M.modEnvHold,amount:t,isBipolar:!0};case I.keyNumToModEnvDecay:return{source:U.keyNum,destination:M.modEnvDecay,amount:t,isBipolar:!0};case I.scaleTuning:return{source:U.keyNum,destination:M.pitch,amount:t*128,isBipolar:!1}}}toString(){return`Source: ${this.source.toString()},
Control: ${this.control.toString()},
Scale: ${this.scale} >> 16 = ${this.shortScale},
Output transform: ${this.transformName}
Destination: ${this.destinationName}`}write(){let e=new Y(12);q(e,this.source.source),q(e,this.control.source),q(e,this.destination);let t=this.transform|this.control.toTransformFlag()<<4|this.source.toTransformFlag()<<10;return q(e,t),re(e,this.scale),e}toSFGenerator(e){let t=this.destination,n=this.shortScale;switch(t){default:y(`%cFailed converting DLS articulator into SF generator: %c${this.toString()}%c
(invalid destination)`,h.warn,h.value,h.unrecognized);return;case M.pan:e.setGenerator(I.pan,n);break;case M.gain:e.addToGenerator(I.initialAttenuation,-n/.4);break;case M.filterCutoff:e.setGenerator(I.initialFilterFc,n);break;case M.filterQ:e.setGenerator(I.initialFilterQ,n);break;case M.modLfoFreq:e.setGenerator(I.freqModLFO,n);break;case M.modLfoDelay:e.setGenerator(I.delayModLFO,n);break;case M.vibLfoFreq:e.setGenerator(I.freqVibLFO,n);break;case M.vibLfoDelay:e.setGenerator(I.delayVibLFO,n);break;case M.volEnvDelay:e.setGenerator(I.delayVolEnv,n);break;case M.volEnvAttack:e.setGenerator(I.attackVolEnv,n);break;case M.volEnvHold:e.setGenerator(I.holdVolEnv,n);break;case M.volEnvDecay:e.setGenerator(I.decayVolEnv,n);break;case M.volEnvRelease:e.setGenerator(I.releaseVolEnv,n);break;case M.volEnvSustain:e.setGenerator(I.sustainVolEnv,1e3-n);break;case M.modEnvDelay:e.setGenerator(I.delayModEnv,n);break;case M.modEnvAttack:e.setGenerator(I.attackModEnv,n);break;case M.modEnvHold:e.setGenerator(I.holdModEnv,n);break;case M.modEnvDecay:e.setGenerator(I.decayModEnv,n);break;case M.modEnvRelease:e.setGenerator(I.releaseModEnv,n);break;case M.modEnvSustain:e.setGenerator(I.sustainModEnv,1e3-n);break;case M.reverbSend:e.setGenerator(I.reverbEffectsSend,n);break;case M.chorusSend:e.setGenerator(I.chorusEffectsSend,n);break;case M.pitch:e.fineTuning+=n;break}}toSFModulator(e){let t=this.shortScale,n,s,a=new Ze,o=g=>{y(`%cFailed converting DLS articulator into SF2:
 %c${this.toString()}%c
(${g})`,h.warn,h.value,h.unrecognized)},r=this.toCombinedSFDestination();if(r){n=r;let g=this.control.toSFSource();if(!g){o("Invalid control");return}s=g}else{let g=this.toSFDestination();if(!g){o("Invalid destination");return}typeof g=="object"?(t=g.newAmount,n=g.gen):n=g;let c=this.source.toSFSource();if(!c){o("Invalid source");return}s=c;let Q=this.control.toSFSource();if(!Q){o("Invalid control");return}a=Q}this.transform!==Qe.linear&&s.curveType===Qe.linear&&(s.curveType=this.transform),n===I.initialAttenuation&&((this.source.source===U.velocity||this.source.source===U.volume||this.source.source===U.expression)&&(s.isNegative=!0),t=Math.min(960,Math.max(0,t)));let i=new he(s,a,n,t,0);e.addModulators(i)}toCombinedSFDestination(){let e=this.source.source,t=this.destination;return e===U.vibratoLfo&&t===M.pitch?I.vibLfoToPitch:e===U.modLfo&&t===M.pitch?I.modLfoToPitch:e===U.modLfo&&t===M.filterCutoff?I.modLfoToFilterFc:e===U.modLfo&&t===M.gain?I.modLfoToVolume:e===U.modEnv&&t===M.filterCutoff?I.modEnvToFilterFc:e===U.modEnv&&t===M.pitch?I.modEnvToPitch:void 0}toSFDestination(){let e=this.shortScale;switch(this.destination){default:case M.none:return;case M.pan:return I.pan;case M.gain:return{gen:I.initialAttenuation,newAmount:-e};case M.pitch:return I.fineTune;case M.keyNum:return I.overridingRootKey;case M.volEnvDelay:return I.delayVolEnv;case M.volEnvAttack:return I.attackVolEnv;case M.volEnvHold:return I.holdVolEnv;case M.volEnvDecay:return I.decayVolEnv;case M.volEnvSustain:return{gen:I.sustainVolEnv,newAmount:1e3-e};case M.volEnvRelease:return I.releaseVolEnv;case M.modEnvDelay:return I.delayModEnv;case M.modEnvAttack:return I.attackModEnv;case M.modEnvHold:return I.holdModEnv;case M.modEnvDecay:return I.decayModEnv;case M.modEnvSustain:return{gen:I.sustainModEnv,newAmount:1e3-e};case M.modEnvRelease:return I.releaseModEnv;case M.filterCutoff:return I.initialFilterFc;case M.filterQ:return I.initialFilterQ;case M.chorusSend:return I.chorusEffectsSend;case M.reverbSend:return I.reverbEffectsSend;case M.modLfoFreq:return I.freqModLFO;case M.modLfoDelay:return I.delayModLFO;case M.vibLfoFreq:return I.freqVibLFO;case M.vibLfoDelay:return I.delayVibLFO}}},ya=class Wn extends _A{connectionBlocks=new Array;mode="dls2";get length(){return this.connectionBlocks.length}copyFrom(e){this.mode=e.mode,e.connectionBlocks.forEach(t=>{this.connectionBlocks.push(ct.copyFrom(t))})}fromSFZone(e){this.mode="dls2";let t=new Ht;t.copyFrom(e);for(let n of t.generators){let s;switch(n.generatorType){default:continue;case I.keyNumToVolEnvDecay:s=I.decayVolEnv;break;case I.keyNumToVolEnvHold:s=I.holdVolEnv;break;case I.keyNumToModEnvDecay:s=I.decayModEnv;break;case I.keyNumToModEnvHold:s=I.holdModEnv}let a=t.getGenerator(s,void 0),o=n.generatorValue*-128;if(a===void 0)continue;let r=60/128*o,i=a-r;t.setGenerator(n.generatorType,o,!1),t.setGenerator(s,i,!1)}for(let n of t.generators)ct.fromSFGenerator(n,this);for(let n of t.modulators)ct.fromSFModulator(n,this)}read(e){let t=pA(e,"lart"),n=pA(e,"lar2");if(t)for(this.mode="dls1";t.data.currentIndex<t.data.length;){let s=ae(t.data);Wn.verifyHeader(s,"art1","art2");let a=s.data,o=L(a,4);o!==8&&ne(`CbSize in articulation mismatch. Expected 8, got ${o}`);let r=L(a,4);for(let i=0;i<r;i++)this.connectionBlocks.push(ct.read(a))}else if(n)for(this.mode="dls2";n.data.currentIndex<n.data.length;){let s=ae(n.data);Wn.verifyHeader(s,"art2","art1");let a=s.data,o=L(a,4);o!==8&&ne(`CbSize in articulation mismatch. Expected 8, got ${o}`);let r=L(a,4);for(let i=0;i<r;i++)this.connectionBlocks.push(ct.read(a))}}write(){let e=new Y(8);re(e,8),re(e,this.connectionBlocks.length);let t=this.connectionBlocks.map(s=>s.write()),n=be(this.mode==="dls2"?"art2":"art1",[e,...t]);return Ie(this.mode==="dls2"?"lar2":"lart",n,!1,!0)}toSFZone(e){let t=(n,s,a,o)=>{let r=n/-128;if(e.setGenerator(s,r),r<=120){let i=Math.round(.46875*n),g=this.connectionBlocks.find(c=>c.isStaticParameter&&c.destination===o);g&&e.setGenerator(a,i+g.shortScale)}};for(let n of this.connectionBlocks){let s=n.shortScale,a=n.source.source,o=n.control.source,r=n.destination;if(n.isStaticParameter){n.toSFGenerator(e);continue}if(o===U.none)if(a===U.keyNum){if(r===M.pitch){e.setGenerator(I.scaleTuning,s/128);continue}if(r===M.modEnvHold||r===M.modEnvDecay||r===M.volEnvHold||r==M.volEnvDecay)continue}else{let i=n.toCombinedSFDestination();if(i){e.setGenerator(i,s);continue}}n.toSFModulator(e)}this.mode==="dls1"&&e.addModulators(he.copyFrom(yo),he.copyFrom(ko));for(let n of this.connectionBlocks){if(n.source.source!==U.keyNum)continue;let s=n.shortScale;switch(n.destination){default:continue;case M.volEnvHold:t(s,I.keyNumToVolEnvHold,I.holdVolEnv,M.volEnvHold);break;case M.volEnvDecay:t(s,I.keyNumToVolEnvDecay,I.decayVolEnv,M.volEnvDecay);break;case M.modEnvHold:t(s,I.keyNumToModEnvHold,I.holdModEnv,M.modEnvHold);break;case M.modEnvDecay:t(s,I.keyNumToModEnvDecay,I.decayModEnv,M.modEnvDecay);break}}}},Sn=class Tt{channel=1;tableIndex;fusOptions=0;phaseGroup=0;constructor(e){this.tableIndex=e}static copyFrom(e){let t=new Tt(e.tableIndex);return t.channel=e.channel,t.phaseGroup=e.phaseGroup,t.fusOptions=e.fusOptions,t}static read(e){let t=L(e.data,2),n=L(e.data,2),s=L(e.data,4),a=L(e.data,4),o=new Tt(a);return o.channel=s,o.fusOptions=t,o.phaseGroup=n,o}static fromSFZone(e,t){let n=e.indexOf(t.sample);if(n<0)throw new Error(`Wave link error: Sample ${t.sample.name} does not exist in the sample list.`);let s=new Tt(n);switch(t.sample.sampleType){default:case we.leftSample:case we.monoSample:s.channel=1;break;case we.rightSample:s.channel=2}return s}write(){let e=new Y(12);return q(e,this.fusOptions),q(e,this.phaseGroup),re(e,this.channel),re(e,this.tableIndex),Ie("wlnk",e)}},Nt=class HA extends _A{articulation=new ya;keyRange={min:0,max:127};velRange={min:0,max:127};keyGroup=0;fusOptions=0;usLayer=0;waveSample;waveLink;constructor(e,t){super(),this.waveSample=t,this.waveLink=e}static copyFrom(e){let t=new HA(Sn.copyFrom(e.waveLink),XA.copyFrom(e.waveSample));return t.keyGroup=e.keyGroup,t.keyRange={...e.keyRange},t.velRange={...e.velRange},t.usLayer=e.usLayer,t.fusOptions=e.fusOptions,t.articulation.copyFrom(e.articulation),t}static read(e,t){let n=this.verifyAndReadList(t,"rgn ","rgn2"),s=n.find(p=>p.header==="wsmp"),a=s?XA.read(s):void 0,o=n.find(p=>p.header==="wlnk");if(!o){ne("Invalid DLS region: missing 'wlnk' chunk! Discarding...");return}let r=Sn.read(o),i=n.find(p=>p.header==="rgnh");if(!i){ne("Invalid DLS region: missing 'rgnh' chunk! Discarding...");return}let g=e[r.tableIndex];g||HA.parsingError(`Invalid sample index: ${r.tableIndex}. Samples available: ${e.length}`),a??=g.waveSample;let c=new HA(r,a),Q=L(i.data,2),B=L(i.data,2),l=L(i.data,2),d=L(i.data,2);return l===0&&d===0&&(d=127,l=0),c.keyRange.max=B,c.keyRange.min=Q,c.velRange.max=d,c.velRange.min=l,c.fusOptions=L(i.data,2),c.keyGroup=L(i.data,2),i.data.length-i.data.currentIndex>=2&&(c.usLayer=L(i.data,2)),c.articulation.read(n),c}static fromSFZone(e,t){let n=XA.fromSFZone(e),s=Sn.fromSFZone(t,e),a=new HA(s,n);return a.keyRange.min=Math.max(e.keyRange.min,0),a.keyRange.max=e.keyRange.max,a.velRange.min=Math.max(e.velRange.min,0),a.velRange.max=e.velRange.max,a.keyGroup=e.getGenerator(I.exclusiveClass,0),a.articulation.fromSFZone(e),a}write(){let e=[this.writeHeader(),this.waveSample.write(),this.waveLink.write(),this.articulation.write()];return be("rgn2",e,!0)}toSFZone(e,t){let n=t[this.waveLink.tableIndex];n||HA.parsingError(`Invalid sample index: ${this.waveLink.tableIndex}`);let s=e.createZone(n);return s.keyRange=this.keyRange,s.velRange=this.velRange,this.keyRange.max===127&&this.keyRange.min===0&&(s.keyRange.min=-1),this.velRange.max===127&&this.velRange.min===0&&(s.velRange.min=-1),this.keyGroup!==0&&s.setGenerator(I.exclusiveClass,this.keyGroup),this.waveSample.toSFZone(s,n),this.articulation.toSFZone(s),s.generators=s.generators.filter(a=>a.generatorValue!==T[a.generatorType].def),s}writeHeader(){let e=new Y(12);return q(e,Math.max(this.keyRange.min,0)),q(e,this.keyRange.max),q(e,Math.max(this.velRange.min,0)),q(e,this.velRange.max),q(e,this.fusOptions),q(e,this.keyGroup),q(e,this.usLayer),Ie("rgnh",e)}},yn=class Jt extends _A{articulation=new ya;regions=new Array;name="Unnamed";bankLSB=0;bankMSB=0;isGMGSDrum=!1;program=0;static copyFrom(e){let t=new Jt;return t.name=e.name,t.isGMGSDrum=e.isGMGSDrum,t.bankMSB=e.bankMSB,t.bankLSB=e.bankLSB,t.program=e.program,t.articulation.copyFrom(e.articulation),e.regions.forEach(n=>{t.regions.push(Nt.copyFrom(n))}),t}static read(e,t){let n=this.verifyAndReadList(t,"ins "),s=n.find(B=>B.header==="insh");if(!s)throw Z(),new Error("No instrument header!");let a="",o=pA(n,"INFO");if(o){let B=ae(o.data);for(;B.header!=="INAM";)B=ae(o.data);a=Ce(B.data,B.data.length).trim()}a.length<1&&(a="Unnamed Instrument");let r=new Jt;r.name=a;let i=L(s.data,4),g=L(s.data,4),c=L(s.data,4);r.program=c&127,r.bankMSB=g>>>8&127,r.bankLSB=g&127,r.isGMGSDrum=g>>>31>0,Ge(`%cParsing %c"${a}"%c...`,h.info,h.recognized,h.info);let Q=pA(n,"lrgn");if(!Q)throw Z(),new Error("No region list!");r.articulation.read(n);for(let B=0;B<i;B++){let l=ae(Q.data);this.verifyHeader(l,"LIST");let d=Ce(l.data,4);d!=="rgn "&&d!=="rgn2"&&(Z(),this.parsingError(`Invalid DLS region! Expected "rgn " or "rgn2" got "${d}"`));let p=Nt.read(e,l);p&&r.regions.push(p)}return Z(),r}static fromSFPreset(e,t){let n=new Jt;return n.name=e.name,n.bankLSB=e.bankLSB,n.bankMSB=e.bankMSB,n.program=e.program,n.isGMGSDrum=e.isGMGSDrum,He(`%cConverting %c${e.toString()}%c to DLS...`,h.info,h.value,h.info),e.toFlattenedInstrument().zones.forEach(a=>{n.regions.push(Nt.fromSFZone(a,t))}),Z(),n}write(){Ge(`%cWriting %c${this.name}%c...`,h.info,h.recognized,h.info);let e=[this.writeHeader()],t=this.regions.map(s=>s.write());e.push(be("lrgn",t,!0)),this.articulation.length>0&&e.push(this.articulation.write());let n=Ie("INAM",aA(this.name,!0));return e.push(Ie("INFO",n,!1,!0)),Z(),be("ins ",e,!0)}toSFPreset(e){let t=new yA(e);t.name=this.name,t.bankMSB=this.bankMSB,t.bankLSB=this.bankLSB,t.isGMGSDrum=this.isGMGSDrum,t.program=this.program;let n=new Qt;n.name=this.name,t.createZone(n),this.articulation.toSFZone(n.globalZone),this.regions.forEach(s=>s.toSFZone(n,e.samples)),n.globalize(),n.globalZone.modulators.find(s=>s.destination===I.reverbEffectsSend)===void 0&&n.globalZone.addModulators(he.copyFrom(pa)),n.globalZone.modulators.find(s=>s.destination===I.chorusEffectsSend)===void 0&&n.globalZone.addModulators(he.copyFrom(Sa)),n.globalZone.generators=n.globalZone.generators.filter(s=>s.generatorValue!==T[s.generatorType].def),e.addPresets(t),e.addInstruments(n)}writeHeader(){let e=new Y(12);re(e,this.regions.length);let t=(this.bankMSB&127)<<8|this.bankLSB&127;return this.isGMGSDrum&&(t|=1<<31),re(e,t),re(e,this.program&127),Ie("insh",e)}},ka={progressFunction:void 0},Fa=class Zn extends _A{samples=new Array;instruments=new Array;soundBankInfo={name:"Unnamed",creationDate:new Date,software:"SpessaSynth",soundEngine:"DLS Level 2.2",version:{major:2,minor:4}};static read(e){if(!e)throw new Error("No data provided!");let t=new Y(e);He("%cParsing DLS file...",h.info);let n=ae(t,!1);this.verifyHeader(n,"RIFF"),this.verifyText(Ce(t,4).toLowerCase(),"dls ");let s=[];for(;t.currentIndex<t.length;)s.push(ae(t));let a=new Zn;a.soundBankInfo.name="Unnamed DLS",a.soundBankInfo.product="SpessaSynth DLS",a.soundBankInfo.comment="(no description)";let o=pA(s,"INFO");if(o)for(;o.data.currentIndex<o.data.length;){let d=ae(o.data),p=d.header,m=Ce(d.data,d.size);switch(p){case"INAM":a.soundBankInfo.name=m;break;case"ICRD":a.soundBankInfo.creationDate=ts(m);break;case"ICMT":a.soundBankInfo.comment=m;break;case"ISBJ":a.soundBankInfo.subject=m;break;case"ICOP":a.soundBankInfo.copyright=m;break;case"IENG":a.soundBankInfo.engineer=m;break;case"IPRD":a.soundBankInfo.product=m;break;case"ISFT":a.soundBankInfo.software=m}}this.printInfo(a);let r=s.find(d=>d.header==="colh");if(!r)return this.parsingError("No colh chunk!"),5;let i=L(r.data,4);y(`%cInstruments amount: %c${i}`,h.info,h.recognized);let g=pA(s,"wvpl");if(!g)return this.parsingError("No wvpl chunk!"),5;this.verifyAndReadList(g,"wvpl").forEach(d=>{a.samples.push(Us.read(d))});let Q=pA(s,"lins");if(!Q)return this.parsingError("No lins chunk!"),5;let B=this.verifyAndReadList(Q,"lins");Ge("%cLoading instruments...",h.info),B.length!==i&&ne(`Colh reported invalid amount of instruments. Detected ${B.length}, expected ${i}`),B.forEach(d=>{a.instruments.push(yn.read(a.samples,d))}),Z();let l=s.find(d=>d.header==="pgal");if(l){y("%cFound the instrument aliasing chunk!",h.recognized);let d=l.data;d[0]===2&&d[1]+d[2]+d[3]===0&&(d.currentIndex+=4);let p=a.instruments.find(F=>fe.isXGDrums(F.bankMSB)||F.isGMGSDrum);if(!p)return ne("MobileBAE aliasing chunk without a drum preset. Aborting!"),a;let m=d.slice(d.currentIndex,d.currentIndex+128);d.currentIndex+=128;for(let F=0;F<128;F++){let k=m[F];if(k===F)continue;let G=p.regions.find(J=>J.keyRange.max===k&&J.keyRange.min===k);if(!G){ne(`Invalid drum alias ${F} to ${k}: region does not exist.`);continue}let x=Nt.copyFrom(G);x.keyRange.max=F,x.keyRange.min=F,p.regions.push(x)}for(d.currentIndex+=4;d.currentIndex<d.length;){let F=L(d,2),k=F&127,G=F>>7&127,x=d[d.currentIndex++],J=d[d.currentIndex++];J!==0&&ne(`Invalid alias byte. Expected 0, got ${J}`);let E=L(d,2),ee=E&127,Ae=E>>7&127,_=d[d.currentIndex++];J=d[d.currentIndex++],J!==0&&ne(`Invalid alias header. Expected 0, got ${J}`);let V=a.instruments.find(K=>K.bankLSB===ee&&K.bankMSB===Ae&&K.program===_&&!K.isGMGSDrum);if(!V){ne(`Invalid alias. Missing instrument: ${ee}:${Ae}:${_}`);continue}let H=yn.copyFrom(V);H.bankMSB=G,H.bankLSB=k,H.program=x,a.instruments.push(H)}}return y(`%cParsing finished! %c"${a.soundBankInfo.name||"UNNAMED"}"%c has %c${a.instruments.length}%c instruments and %c${a.samples.length}%c samples.`,h.info,h.recognized,h.info,h.recognized,h.info,h.recognized,h.info),Z(),a}static fromSF(e){Ge("%cSaving SF2 to DLS level 2...",h.info);let t=new Zn;return t.soundBankInfo={...e.soundBankInfo},t.soundBankInfo.comment=(t.soundBankInfo.comment??"(No description)")+`
Converted from SF2 to DLS with SpessaSynth`,e.samples.forEach(n=>{t.samples.push(Us.fromSFSample(n))}),e.presets.forEach(n=>{t.instruments.push(yn.fromSFPreset(n,e.samples))}),y("%cConversion complete!",h.recognized),Z(),t}static printInfo(e){for(let[t,n]of Object.entries(e.soundBankInfo)){if(typeof n=="object"&&"major"in n){let s=n;y(`%c${t}: %c"${s.major}.${s.minor}"`,h.info,h.recognized)}y(`%c${t}: %c${n.toLocaleString()}`,h.info,h.recognized)}}async write(e=ka){Ge("%cSaving DLS...",h.info);let t=new Y(4);re(t,this.instruments.length);let n=Ie("colh",t);Ge("%cWriting instruments...",h.info);let s=be("lins",this.instruments.map(m=>m.write()),!0);y("%cSuccess!",h.recognized),Z(),Ge("%cWriting WAVE samples...",h.info);let a=0,o=[],r=[],i=0;for(let m of this.samples){let F=m.write();await e?.progressFunction?.(m.name,i,this.samples.length),o.push(a),a+=F.length,r.push(F),i++}let g=be("wvpl",r,!0);y("%cSucceeded!",h.recognized);let c=new Y(8+4*o.length);re(c,8),re(c,o.length);for(let m of o)re(c,m);let Q=Ie("ptbl",c);this.soundBankInfo.software="SpessaSynth";let B=[],l=(m,F)=>{B.push(Ie(m,aA(F,!0)))};for(let[m,F]of Object.entries(this.soundBankInfo)){let k=m,G=F;if(G)switch(k){case"name":l("INAM",G);break;case"comment":l("ICMT",G);break;case"copyright":l("ICOP",G);break;case"creationDate":l("ICRD",G.toISOString());break;case"engineer":l("IENG",G);break;case"product":l("IPRD",G);break;case"romVersion":case"version":case"soundEngine":case"romInfo":break;case"software":l("ISFT",G);break;case"subject":l("ISBJ",G)}}let d=be("INFO",B,!0);y("%cCombining everything...");let p=be("RIFF",[aA("DLS "),n,s,Q,g,d]);return y("%cSaved successfully!",h.recognized),Z(),p.buffer}toSF(){He("%cConverting DLS to SF2...",h.info);let e=new rs;return e.soundBankInfo.version.minor=4,e.soundBankInfo.version.major=2,e.soundBankInfo={...this.soundBankInfo},e.soundBankInfo.comment=(e.soundBankInfo.comment??"(No description)")+`
Converted from DLS to SF2 with SpessaSynth`,this.samples.forEach(t=>{t.toSFSample(e)}),this.instruments.forEach(t=>{t.toSFPreset(e)}),e.flush(),y("%cConversion complete!",h.recognized),Z(),e}},rs=class Kt{static isSF3DecoderReady=Pt.isInitialized;soundBankInfo={name:"Unnamed",creationDate:new Date,software:"SpessaSynth",soundEngine:"E-mu 10K2",version:{major:2,minor:4}};presets=[];samples=[];instruments=[];defaultModulators=Ia.map(he.copyFrom.bind(he));customDefaultModulators=!1;_isXGBank=!1;get isXGBank(){return this._isXGBank}static mergeSoundBanks(...e){let t=e.shift();if(!t)throw new Error("No sound banks provided!");let n=t.presets;for(;e.length;){let a=e?.shift()?.presets;a&&a.forEach(o=>{n.find(r=>o.matches(r))===void 0&&n.push(o)})}let s=new Kt;return s.addCompletePresets(n),s.soundBankInfo={...t.soundBankInfo},s}static async getSampleSoundBankFile(){let e=new Kt,t=new Float32Array(128);for(let r=0;r<128;r++)t[r]=r/128*2-1;let n=new Co;n.name="Saw",n.originalKey=65,n.pitchCorrection=20,n.loopEnd=127,n.setAudioData(t,44100),e.addSamples(n);let s=new Qt;s.name="Saw Wave",s.globalZone.addGenerators(new Re(I.initialAttenuation,375),new Re(I.releaseVolEnv,-1e3),new Re(I.sampleModes,1)),s.createZone(n),s.createZone(n).addGenerators(new Re(I.fineTune,-9)),e.addInstruments(s);let o=new yA(e);return o.name="Saw Wave",o.createZone(s),e.addPresets(o),e.soundBankInfo.name="Dummy",e.flush(),await e.writeSF2()}static copyFrom(e){let t=new Kt;return e.presets.forEach(n=>t.clonePreset(n)),t.soundBankInfo={...e.soundBankInfo},t}addCompletePresets(e){this.addPresets(...e);let t=[];for(let s of e)for(let a of s.zones)a.instrument&&!t.includes(a.instrument)&&t.push(a.instrument);this.addInstruments(...t);let n=[];for(let s of t)for(let a of s.zones)a.sample&&!n.includes(a.sample)&&n.push(a.sample);this.addSamples(...n)}async writeDLS(e=ka){return Fa.fromSF(this).write(e)}async writeSF2(e=On){return fo(this,e)}addPresets(...e){this.presets.push(...e)}addInstruments(...e){this.instruments.push(...e)}addSamples(...e){this.samples.push(...e)}cloneSample(e){let t=this.samples.find(s=>s.name===e.name);if(t)return t;let n=new Xt(e.name,e.sampleRate,e.originalKey,e.pitchCorrection,e.sampleType,e.loopStart,e.loopEnd);if(e.isCompressed?n.setCompressedData(e.getRawData(!0)):n.setAudioData(e.getAudioData(),e.sampleRate),this.addSamples(n),e.linkedSample){let s=this.cloneSample(e.linkedSample);s.linkedSample||n.setLinkedSample(s,n.sampleType)}return n}cloneInstrument(e){let t=this.instruments.find(s=>s.name===e.name);if(t)return t;let n=new Qt;n.name=e.name,n.globalZone.copyFrom(e.globalZone);for(let s of e.zones)n.createZone(this.cloneSample(s.sample)).copyFrom(s);return this.addInstruments(n),n}clonePreset(e){let t=this.presets.find(s=>s.name===e.name);if(t)return t;let n=new yA(this);n.name=e.name,n.bankMSB=e.bankMSB,n.bankLSB=e.bankLSB,n.isGMGSDrum=e.isGMGSDrum,n.program=e.program,n.library=e.library,n.genre=e.genre,n.morphology=e.morphology,n.globalZone.copyFrom(e.globalZone);for(let s of e.zones)n.createZone(this.cloneInstrument(s.instrument)).copyFrom(s);return this.addPresets(n),n}flush(){this.presets.sort(sA.sorter.bind(sA)),this.parseInternal()}trimSoundBank(e){let t=(s,a)=>{let o=0;for(let r=0;r<s.zones.length;r++){let i=s.zones[r],g=i.keyRange,c=i.velRange,Q=!1;for(let B of a)if(B.key>=g.min&&B.key<=g.max&&B.velocity>=c.min&&B.velocity<=c.max){Q=!0;break}!Q&&i.sample&&(y(`%c${i.sample.name}%c removed from %c${s.name}%c.`,h.recognized,h.info,h.recognized,h.info),s.deleteZone(r)&&(o++,r--,y(`%c${i.sample.name}%c deleted`,h.recognized,h.info)),i.sample.useCount<1&&this.deleteSample(i.sample))}return o};He("%cTrimming sound bank...",h.info);let n=e.getUsedProgramsAndKeys(this);Ge("%cModifying sound bank...",h.info),y("Detected keys for midi:",n);for(let s=0;s<this.presets.length;s++){let a=this.presets[s],o=n.get(a);if(o===void 0)y(`%cDeleting preset %c${a.name}%c and its zones`,h.info,h.recognized,h.info),this.deletePreset(a),s--;else{let r=[...o].map(g=>{let c=g.split("-");return{key:parseInt(c[0]),velocity:parseInt(c[1])}});Ge(`%cTrimming %c${a.name}`,h.info,h.recognized),y(`Keys for ${a.name}:`,r);let i=0;for(let g=0;g<a.zones.length;g++){let c=a.zones[g],Q=c.keyRange,B=c.velRange,l=!1;for(let d of r)if(d.key>=Q.min&&d.key<=Q.max&&d.velocity>=B.min&&d.velocity<=B.max&&c.instrument){l=!0;let p=t(c.instrument,r);y(`%cTrimmed off %c${p}%c zones from %c${c.instrument.name}`,h.info,h.recognized,h.info,h.recognized);break}!l&&c.instrument&&(i++,a.deleteZone(g),c.instrument.useCount<1&&this.deleteInstrument(c.instrument),g--)}y(`%cTrimmed off %c${i}%c zones from %c${a.name}`,h.info,h.recognized,h.info,h.recognized),Z()}}this.removeUnusedElements(),y("%cSound bank modified!",h.recognized),Z(),Z()}removeUnusedElements(){this.instruments=this.instruments.filter(e=>{e.deleteUnusedZones();let t=e.useCount<1;return t&&e.delete(),!t}),this.samples=this.samples.filter(e=>{let t=e.useCount<1;return t&&e.unlinkSample(),!t})}deleteInstrument(e){e.delete(),this.instruments.splice(this.instruments.indexOf(e),1)}deletePreset(e){e.delete(),this.presets.splice(this.presets.indexOf(e),1)}deleteSample(e){e.unlinkSample(),this.samples.splice(this.samples.indexOf(e),1)}getPreset(e,t){return Ca(this.presets,e,t)}destroySoundBank(){this.presets.length=0,this.instruments.length=0,this.samples.length=0}parsingError(e){throw new Error(`SF parsing error: ${e} The file may be corrupted.`)}parseInternal(){this._isXGBank=!1;let e=new Set([0,1,2,3,4,5,6,7,8,9,16,17,24,25,26,27,28,29,30,31,32,33,40,41,48,56,57,58,64,65,66,126,127]);for(let t of this.presets)if(fe.isXGDrums(t.bankMSB)&&(this._isXGBank=!0,!e.has(t.program))){this._isXGBank=!1,y(`%cThis bank is not valid XG. Preset %c${t.toString()}%c is not a valid XG drum. XG mode will use presets on bank 128.`,h.info,h.value,h.info);break}}printInfo(){for(let[e,t]of Object.entries(this.soundBankInfo)){if(typeof t=="object"&&"major"in t){let n=t;y(`%c${e}: %c"${n.major}.${n.minor}"`,h.info,h.recognized)}y(`%c${e}: %c${t.toLocaleString()}`,h.info,h.recognized)}}},wo=class extends Re{constructor(A){let e=A.currentIndex,t=A[e+1]<<8|A[e],n=Xn(A[e+2],A[e+3]);A.currentIndex+=4,super(t,n,!1)}};function Ts(A){let e=[];for(;A.data.length>A.data.currentIndex;)e.push(new wo(A.data));return e.pop(),e}var Ro=class extends ha{constructor(A,e,t,n){let s=t.find(o=>o.generatorType===I.instrument),a;if(s)a=n[s.generatorValue];else throw new Error("No instrument ID found in preset zone.");if(!a)throw new Error(`Invalid instrument ID: ${s.generatorValue}, available instruments: ${n.length}`);super(A,a),this.addGenerators(...t),this.addModulators(...e)}};function Do(A,e,t,n,s){let a=A.gen,o=A.mod,r=0,i=0;for(let g of s)for(let c=0;c<g.zonesCount;c++){let Q=a[i++],B=a[i],l=e.slice(Q,B),d=o[r++],p=o[r],m=t.slice(d,p);l.find(F=>F.generatorType===I.instrument)!==void 0?g.createSoundFontZone(m,l,n):(g.globalZone.addGenerators(...l),g.globalZone.addModulators(...m))}}var Mo=class extends yA{zoneStartIndex;zonesCount=0;constructor(A,e){super(e),this.name=Ce(A.data,20).replace(/\d{3}:\d{3}/,""),this.program=L(A.data,2);let t=L(A.data,2);this.bankMSB=t&127,this.isGMGSDrum=(t&128)>0,this.bankLSB=t>>8,this.zoneStartIndex=L(A.data,2),this.library=L(A.data,4),this.genre=L(A.data,4),this.morphology=L(A.data,4)}createSoundFontZone(A,e,t){let n=new Ro(this,A,e,t);return this.zones.push(n),n}};function Ns(A,e){let t=[];for(;A.data.length>A.data.currentIndex;){let n=new Mo(A,e);if(t.length>0){let s=t[t.length-1];s.zonesCount=n.zoneStartIndex-s.zoneStartIndex}t.push(n)}return t.pop(),t}var Go=class extends ca{constructor(A,e,t,n){let s=t.find(o=>o.generatorType===I.sampleID),a;if(s)a=n[s.generatorValue];else throw new Error("No sample ID found in instrument zone.");if(!a)throw new Error(`Invalid sample ID: ${s.generatorValue}, available samples: ${n.length}`);super(A,a),this.addGenerators(...t),this.addModulators(...e)}};function bo(A,e,t,n,s){let a=A.gen,o=A.mod,r=0,i=0;for(let g of s)for(let c=0;c<g.zonesCount;c++){let Q=a[i++],B=a[i],l=e.slice(Q,B),d=o[r++],p=o[r],m=t.slice(d,p);l.find(F=>F.generatorType===I.sampleID)?g.createSoundFontZone(m,l,n):(g.globalZone.addGenerators(...l),g.globalZone.addModulators(...m))}}var Lo=class extends Qt{zoneStartIndex;zonesCount=0;constructor(A){super(),this.name=Ce(A.data,20),this.zoneStartIndex=L(A.data,2)}createSoundFontZone(A,e,t){let n=new Go(this,A,e,t);return this.zones.push(n),n}};function Js(A){let e=[];for(;A.data.length>A.data.currentIndex;){let t=new Lo(A);if(e.length>0){let n=e[e.length-1];n.zonesCount=t.zoneStartIndex-n.zoneStartIndex}e.push(t)}return e.pop(),e}function kn(A){let e=[];for(;A.data.length>A.data.currentIndex;){let t=A.data,n=L(t,2),s=L(t,2),a=Xn(t[t.currentIndex++],t[t.currentIndex++]),o=L(t,2),r=L(t,2);e.push(new ye(n,o,s,a,r))}return e.pop(),e}function bt(A){let e=[],t=[];for(;A.data.length>A.data.currentIndex;)t.push(L(A.data,2)),e.push(L(A.data,2));return{mod:e,gen:t}}var vo=class extends rs{sampleDataStartIndex=0;constructor(A,e=!0){if(super(),e)throw new Error("Using the constructor directly is deprecated. Use SoundBankLoader.fromArrayBuffer() instead.");let t=new Y(A);He("%cParsing a SoundFont2 file...",h.info),t||(Z(),this.parsingError("No data provided!"));let n=ae(t,!1);this.verifyHeader(n,"riff");let s=Ce(t,4).toLowerCase();if(s!=="sfbk"&&s!=="sfpk")throw Z(),new SyntaxError(`Invalid soundFont! Expected "sfbk" or "sfpk" got "${s}"`);let a=s==="sfpk",o=ae(t);this.verifyHeader(o,"list");let r=Ce(o.data,4);if(r!=="INFO")throw Z(),new SyntaxError(`Invalid soundFont! Expected "INFO" or "${r}"`);let i;for(;o.data.length>o.data.currentIndex;){let O=ae(o.data),D=nA(O.data,O.data.length),b=O.header;switch(b){case"ifil":case"iver":let P=L(O.data,2),te=L(O.data,2);b==="ifil"?this.soundBankInfo.version={major:P,minor:te}:this.soundBankInfo.romVersion={major:P,minor:te};break;case"DMOD":{this.defaultModulators=kn(O),this.customDefaultModulators=!0;break}case"LIST":{Ce(O.data,4)==="xdta"&&(y("%cExtended SF2 found!",h.recognized),i=O);break}case"ICRD":this.soundBankInfo.creationDate=ts(Ce(O.data,O.data.length));break;case"ISFT":this.soundBankInfo.software=D;break;case"IPRD":this.soundBankInfo.product=D;break;case"IENG":this.soundBankInfo.engineer=D;break;case"ICOP":this.soundBankInfo.copyright=D;break;case"INAM":this.soundBankInfo.name=D;break;case"ICMT":this.soundBankInfo.comment=D;break;case"irom":this.soundBankInfo.romInfo=D;break;case"isng":this.soundBankInfo.soundEngine=D}}this.printInfo();let g={};i!==void 0&&(g.phdr=ae(i.data),g.pbag=ae(i.data),g.pmod=ae(i.data),g.pgen=ae(i.data),g.inst=ae(i.data),g.ibag=ae(i.data),g.imod=ae(i.data),g.igen=ae(i.data),g.shdr=ae(i.data));let c=ae(t,!1);this.verifyHeader(c,"list"),this.verifyText(Ce(t,4),"sdta"),y("%cVerifying smpl chunk...",h.warn);let Q=ae(t,!1);this.verifyHeader(Q,"smpl");let B;if(a){y("%cSF2Pack detected, attempting to decode the smpl chunk...",h.info);try{B=Pt.decode(t.buffer.slice(t.currentIndex,t.currentIndex+c.size-12)).data[0]}catch(O){throw Z(),new Error(`SF2Pack Ogg Vorbis decode error: ${O}`)}y(`%cDecoded the smpl chunk! Length: %c${B.length}`,h.info,h.value)}else B=t,this.sampleDataStartIndex=t.currentIndex;y(`%cSkipping sample chunk, length: %c${c.size-12}`,h.info,h.value),t.currentIndex+=c.size-12,y("%cLoading preset data chunk...",h.warn);let l=ae(t);this.verifyHeader(l,"list"),Ce(l.data,4);let d=ae(l.data);this.verifyHeader(d,"phdr");let p=ae(l.data);this.verifyHeader(p,"pbag");let m=ae(l.data);this.verifyHeader(m,"pmod");let F=ae(l.data);this.verifyHeader(F,"pgen");let k=ae(l.data);this.verifyHeader(k,"inst");let G=ae(l.data);this.verifyHeader(G,"ibag");let x=ae(l.data);this.verifyHeader(x,"imod");let J=ae(l.data);this.verifyHeader(J,"igen");let E=ae(l.data);this.verifyHeader(E,"shdr"),y("%cParsing samples...",h.info),t.currentIndex=this.sampleDataStartIndex;let ee=Ls(E,B,i===void 0);if(i&&g.shdr){let O=Ls(g.shdr,new Float32Array(1),!1);O.length===ee.length&&ee.forEach((D,b)=>{D.name+=O[b].name,D.linkedSampleIndex|=O[b].linkedSampleIndex<<16})}ee.forEach(O=>O.name=O.name.trim()),this.samples.push(...ee);let Ae=Ts(J),_=kn(x),V=Js(k);if(i&&g.inst){let O=Js(g.inst);O.length===V.length&&(V.forEach((D,b)=>{D.name+=O[b].name,D.zoneStartIndex|=O[b].zoneStartIndex}),V.forEach((D,b)=>{b<V.length-1&&(D.zonesCount=V[b+1].zoneStartIndex-D.zoneStartIndex)}))}V.forEach(O=>O.name=O.name.trim()),this.instruments.push(...V);let H=bt(G);if(i&&g.ibag){let O=bt(g.ibag);for(let D=0;D<H.mod.length;D++)H.mod[D]|=O.mod[D]<<16;for(let D=0;D<H.gen.length;D++)H.gen[D]|=O.gen[D]<<16}bo(H,Ae,_,this.samples,V);let K=Ts(F),W=kn(m),le=Ns(d,this);if(i&&g.phdr){let O=Ns(g.phdr,this);O.length===le.length&&(le.forEach((D,b)=>{D.name+=O[b].name,D.zoneStartIndex|=O[b].zoneStartIndex}),le.forEach((D,b)=>{b<le.length-1&&(D.zonesCount=le[b+1].zoneStartIndex-D.zoneStartIndex)}))}le.forEach(O=>O.name===O.name.trim()),this.addPresets(...le);let ge=bt(p);if(i&&g.pbag){let O=bt(g.pbag);for(let D=0;D<ge.mod.length;D++)ge.mod[D]|=O.mod[D]<<16;for(let D=0;D<ge.gen.length;D++)ge.gen[D]|=O.gen[D]<<16}Do(ge,K,W,this.instruments,le),this.flush(),y(`%cParsing finished! %c"${this.soundBankInfo.name}"%c has %c${this.presets.length}%c presets,
        %c${this.instruments.length}%c instruments and %c${this.samples.length}%c samples.`,h.info,h.recognized,h.info,h.recognized,h.info,h.recognized,h.info,h.recognized,h.info),Z()}verifyHeader(A,e){A.header.toLowerCase()!==e.toLowerCase()&&(Z(),this.parsingError(`Invalid chunk header! Expected "${e.toLowerCase()}" got "${A.header.toLowerCase()}"`))}verifyText(A,e){A.toLowerCase()!==e.toLowerCase()&&(Z(),this.parsingError(`Invalid FourCC: Expected "${e.toLowerCase()}" got "${A.toLowerCase()}"\``))}},$A=class{static fromArrayBuffer(A){let e=A.slice(8,12),t=new Y(e);return Ce(t,4).toLowerCase()==="dls "?this.loadDLS(A):new vo(A,!1)}static loadDLS(A){return Fa.read(A).toSF()}},Is=class{soundBankManager=new Ti(this.updatePresetList.bind(this));midiChannels=[];keyModifierManager=new Xi;totalVoicesAmount=0;processorInitialized=Pt.isInitialized;currentSynthTime=0;sampleRate;enableEffects=!0;enableEventSystem;onEventCall;systemExclusive=Zi.bind(this);resetAllControllers=di.bind(this);setMasterParameter=Ri.bind(this);getMasterParameter=Di.bind(this);getAllMasterParameters=Mi.bind(this);getVoicesForPreset=Hi.bind(this);killVoices=qi.bind(this);getVoices=Wi.bind(this);privateProps;savedSnapshot;eventQueue=[];sampleTime;constructor(A,e=Ms){let t=jn(e,Ms);if(this.enableEffects=t.enableEffects,this.enableEventSystem=t.enableEventSystem,this.currentSynthTime=t.initialTime,this.sampleRate=A,this.sampleTime=1/A,isNaN(t.initialTime)||isNaN(A))throw new Error("Initial time or sample rate is NaN!");this.privateProps=new ji(this.callEvent.bind(this),this.getVoices.bind(this),this.killVoices.bind(this),Fi*(44100/A),Ni*(44100/A),Vi*(44100/A));for(let n=0;n<Fn;n++)this.createMIDIChannelInternal(!1);this.processorInitialized.then(()=>{y("%cSpessaSynth is ready!",h.recognized)})}applySynthesizerSnapshot(A){this.savedSnapshot=A,A.apply(this),y("%cFinished applying snapshot!",h.info),this.resetAllControllers()}getSnapshot(){return Zt.create(this)}setEmbeddedSoundBank(A,e){let t=$A.fromArrayBuffer(A);this.soundBankManager.addSoundBank(t,Mt,e);let n=this.soundBankManager.priorityOrder;n.pop(),n.unshift(Mt),this.soundBankManager.priorityOrder=n,this.savedSnapshot!==void 0&&this.applySynthesizerSnapshot(this.savedSnapshot),y(`%cEmbedded sound bank set at offset %c${e}`,h.recognized,h.value)}clearEmbeddedBank(){this.soundBankManager.soundBankList.some(A=>A.id===Mt)&&this.soundBankManager.deleteSoundBank(Mt)}createMIDIChannel(){this.createMIDIChannelInternal(!0)}stopAllChannels(A=!1){y("%cStop all received!",h.info);for(let e of this.midiChannels)e.stopAllNotes(A)}renderAudio(A,e,t,n=0,s=0){this.renderAudioSplit(e,t,Array(16).fill(A),n,s)}renderAudioSplit(A,e,t,n=0,s=0){let a=this.currentSynthTime;for(;this.eventQueue[0]?.time<=a;)this.eventQueue.shift()?.callback();let o=A[0],r=A[1],i=e[0],g=e[1];n=Math.max(n,0);let c=s||t[0][0].length-n;this.totalVoicesAmount=0,this.midiChannels.forEach((Q,B)=>{if(Q.voices.length<1||Q.isMuted)return;let l=Q.voices.length,d=B%16;Q.renderAudio(t[d][0],t[d][1],o,r,i,g,n,c),this.totalVoicesAmount+=Q.voices.length,Q.voices.length!==l&&Q.sendChannelProperty()}),this.currentSynthTime+=c*this.sampleTime}destroySynthProcessor(){this.midiChannels.forEach(A=>{A.voices.length=0,A.sustainedVoices.length=0,A.lockedControllers=[],A.preset=void 0}),this.clearCache(),this.midiChannels.length=0,this.soundBankManager.destroy()}controllerChange(A,e,t){this.midiChannels[A].controllerChange(e,t)}noteOn(A,e,t){this.midiChannels[A].noteOn(e,t)}noteOff(A,e){this.midiChannels[A].noteOff(e)}polyPressure(A,e,t){this.midiChannels[A].polyPressure(e,t)}channelPressure(A,e){this.midiChannels[A].channelPressure(e)}pitchWheel(A,e){this.midiChannels[A].pitchWheel(e)}programChange(A,e){this.midiChannels[A].programChange(e)}processMessage(A,e=0,t=!1,n=Oa){let s=()=>{let o=zn(A[0]),r=o.channel+e;switch(o.status){case R.noteOn:{let i=A[2];i>0?this.noteOn(r,A[1],i):this.noteOff(r,A[1]);break}case R.noteOff:t?this.midiChannels[r].killNote(A[1]):this.noteOff(r,A[1]);break;case R.pitchWheel:this.pitchWheel(r,A[2]<<7|A[1]);break;case R.controllerChange:this.controllerChange(r,A[1],A[2]);break;case R.programChange:this.programChange(r,A[1]);break;case R.polyPressure:this.polyPressure(r,A[0],A[1]);break;case R.channelPressure:this.channelPressure(r,A[1]);break;case R.systemExclusive:this.systemExclusive(new Y(A.slice(1)),e);break;case R.reset:this.stopAllChannels(!0),this.resetAllControllers();break;default:break}},a=n.time;a>this.currentSynthTime?(this.eventQueue.push({callback:s.bind(this),time:a}),this.eventQueue.sort((o,r)=>o.time-r.time)):s()}clearCache(){this.privateProps.cachedVoices=[]}setMIDIVolume(A){this.privateProps.midiVolume=Math.pow(A,Math.E)}setMasterTuning(A){A=Math.round(A);for(let e of this.midiChannels)e.setCustomController(oe.masterTuning,A)}callEvent(A,e){this.onEventCall?.({type:A,data:e})}getCachedVoice(A,e,t){let n=A.bankMSB,s=A.bankLSB,{isGMGSDrum:a,program:o}=A;return a&&(n=128,s=0),this.privateProps.cachedVoices?.[n]?.[s]?.[o]?.[e]?.[t]}setCachedVoice(A,e,t,n){let s=A.bankMSB,a=A.bankLSB,{isGMGSDrum:o,program:r}=A;o&&(s=128,a=0),this.privateProps.cachedVoices[s]||(this.privateProps.cachedVoices[s]=[]),this.privateProps.cachedVoices[s][a]||(this.privateProps.cachedVoices[s][a]=[]),this.privateProps.cachedVoices[s][a][r]||(this.privateProps.cachedVoices[s][a][r]=[]),this.privateProps.cachedVoices[s][a][r][e]||(this.privateProps.cachedVoices[s][a][r][e]=[]),this.privateProps.cachedVoices[s][a][r][e][t]=n}createMIDIChannelInternal(A){let e=new co(this,this.privateProps,this.privateProps.defaultPreset,this.midiChannels.length);this.midiChannels.push(e),A&&(this.callEvent("newChannel",void 0),e.sendChannelProperty(),this.midiChannels[this.midiChannels.length-1].setDrums(!0))}updatePresetList(){let A=this.soundBankManager.presetList;this.clearCache(),this.privateProps.callEvent("presetListChange",A),this.getDefaultPresets(),this.midiChannels.forEach(e=>{e.setPresetLock(!1)}),this.resetAllControllers(!1)}getDefaultPresets(){this.privateProps.defaultPreset=this.soundBankManager.getPreset({bankLSB:0,bankMSB:0,program:0,isGMGSDrum:!1},"xg"),this.privateProps.drumPreset=this.soundBankManager.getPreset({bankLSB:0,bankMSB:0,program:0,isGMGSDrum:!0},"gs")}};function Uo(A,e){return{...e,...A??{}}}var wa=Ue.consoleColors;var To="spessasynth-worklet-processor";var hs={trim:!0,bankID:"",writeEmbeddedSoundBank:!0},No={...hs,writeDefaultModulators:!0,writeExtendedLimits:!0,compress:!1,compressionQuality:1,decompress:!1},Zr={...hs,bankOffset:0,correctBankOffset:!0,metadata:{},format:"sf2",...No},Xr={...hs};var Jo={skipToFirstNoteOn:!0,initialPlaybackRate:1},Ko=class extends Ot{events=[];constructor(A){super(),super.copyFrom(A),this.events=[]}},xo=class Ra extends CA{tracks;embeddedSoundBank=void 0;embeddedSoundBankSize;constructor(e){super(),super.copyMetadataFrom(e),this.tracks=e.tracks.map(t=>new Ko(t)),e instanceof Ra?this.embeddedSoundBankSize=e.embeddedSoundBankSize:this.embeddedSoundBankSize=e?.embeddedSoundBank?.byteLength}},gs={shuffleOn:1,shuffleOff:2,index:3},Vo=class{synthesizer;sequencer;post;alive=!1;constructor(A,e,t){this.synthesizer=new Is(A,e),this.sequencer=new ss(this.synthesizer),this.post=t,this.synthesizer.onEventCall=n=>{this.post({type:"eventCall",data:n,currentTime:this.synthesizer.currentSynthTime})},this.sequencer.onEventCall=n=>{if(n.type==="songListChange"){let a=n.data.newSongList.map(o=>new xo(o));this.post({type:"sequencerReturn",data:{type:n.type,data:{newSongList:a}},currentTime:this.synthesizer.currentSynthTime});return}this.post({type:"sequencerReturn",data:n,currentTime:this.synthesizer.currentSynthTime})}}postReady(A,e,t=[]){this.post({type:"isFullyInitialized",data:{type:A,data:e},currentTime:this.synthesizer.currentSynthTime},t)}postProgress(A,e){this.post({type:"renderingProgress",data:{type:A,data:e},currentTime:this.synthesizer.currentSynthTime})}destroy(){this.synthesizer.destroySynthProcessor(),delete this.synthesizer,delete this.sequencer}handleMessage(A){let e=A.channelNumber,t;if(e>=0&&(t=this.synthesizer.midiChannels[e],t===void 0)){Ue.SpessaSynthWarn(`Trying to access channel ${e} which does not exist... ignoring!`);return}switch(A.type){case"midiMessage":this.synthesizer.processMessage(A.data.messageData,A.data.channelOffset,A.data.force,A.data.options);break;case"customCcChange":t?.setCustomController(A.data.ccNumber,A.data.ccValue);break;case"ccReset":e===je?this.synthesizer.resetAllControllers():t?.resetControllers();break;case"setChannelVibrato":if(e===je)for(let n of this.synthesizer.midiChannels)A.data.rate===je?n.disableAndLockGSNRPN():n.setVibrato(A.data.depth,A.data.rate,A.data.delay);else A.data.rate===je?t?.disableAndLockGSNRPN():t?.setVibrato(A.data.depth,A.data.rate,A.data.delay);break;case"stopAll":e===je?this.synthesizer.stopAllChannels(A.data===1):t?.stopAllNotes(A.data===1);break;case"killNotes":this.synthesizer.killVoices(A.data);break;case"muteChannel":t?.muteChannel(A.data);break;case"addNewChannel":this.synthesizer.createMIDIChannel();break;case"setMasterParameter":this.synthesizer.setMasterParameter(A.data.type,A.data.data);break;case"setDrums":t?.setDrums(A.data);break;case"transposeChannel":t?.transposeChannel(A.data.semitones,A.data.force);break;case"lockController":if(A.data.controllerNumber===je)t?.setPresetLock(A.data.isLocked);else{if(!t)return;t.lockedControllers[A.data.controllerNumber]=A.data.isLocked}break;case"sequencerSpecific":{if(!this.sequencer)return;let n=this.sequencer,s=A.data;switch(s.type){default:break;case"loadNewSongList":try{let o=s.data.map(r=>"duration"in r?CA.copyFrom(r):CA.fromArrayBuffer(r.binary,r.fileName));n.loadNewSongList(o)}catch(a){console.error(a),this.post({type:"sequencerReturn",data:{type:"midiError",data:a},currentTime:this.synthesizer.currentSynthTime})}break;case"pause":n.pause();break;case"play":n.play();break;case"setTime":n.currentTime=s.data;break;case"changeMIDIMessageSending":n.externalMIDIPlayback=s.data;break;case"setPlaybackRate":n.playbackRate=s.data;break;case"setLoopCount":n.loopCount=s.data;break;case"changeSong":switch(s.data.changeType){case gs.shuffleOff:n.shuffleMode=!1;break;case gs.shuffleOn:n.shuffleMode=!0;break;case gs.index:s.data.data!==void 0&&(n.songIndex=s.data.data);break}break;case"getMIDI":if(!n.midiData)throw new Error("No MIDI is loaded!");this.post({type:"sequencerReturn",data:{type:"getMIDI",data:n.midiData},currentTime:this.synthesizer.currentSynthTime});break;case"setSkipToFirstNote":n.skipToFirstNoteOn=s.data;break}break}case"soundBankManager":try{let n=this.synthesizer.soundBankManager,s=A.data,a;switch(s.type){case"addSoundBank":a=$A.fromArrayBuffer(s.data.soundBankBuffer),n.addSoundBank(a,s.data.id,s.data.bankOffset),this.postReady("soundBankManager",null);break;case"deleteSoundBank":n.deleteSoundBank(s.data),this.postReady("soundBankManager",null);break;case"rearrangeSoundBanks":n.priorityOrder=s.data,this.postReady("soundBankManager",null)}}catch(n){this.post({type:"soundBankError",data:n,currentTime:this.synthesizer.currentSynthTime})}break;case"keyModifierManager":{let n=A.data,s=this.synthesizer.keyModifierManager;switch(n.type){default:return;case"addMapping":s.addMapping(n.data.channel,n.data.midiNote,n.data.mapping);break;case"clearMappings":s.clearMappings();break;case"deleteMapping":s.deleteMapping(n.data.channel,n.data.midiNote)}break}case"requestSynthesizerSnapshot":{let n=Zt.create(this.synthesizer);this.postReady("synthesizerSnapshot",n);break}case"setLogLevel":Ps(A.data.enableInfo,A.data.enableWarning,A.data.enableGroup);break;case"destroyWorklet":this.alive=!1,this.synthesizer.destroySynthProcessor(),this.destroy();break;default:Ue.SpessaSynthWarn("Unrecognized event!",A);break}}},Yo=class extends Vo{alive=!0;oneOutputMode;port;constructor(A,e,t,n){super(A,{enableEffects:!n.oneOutput,enableEventSystem:n?.enableEventSystem,initialTime:e},(s,a)=>{t.postMessage(s,a)}),this.port=t,this.oneOutputMode=n.oneOutput,this.synthesizer.processorInitialized.then(()=>{this.port.onmessage=s=>this.handleMessage(s.data),this.postReady("sf3Decoder",null)})}process(A,e){if(!this.alive)return!1;if(this.sequencer.processTick(),this.oneOutputMode){let t=e[0],n=[];for(let s=0;s<32;s+=2)n.push([t[s],t[s+1]]);this.synthesizer.renderAudioSplit([],[],n)}else this.synthesizer.renderAudioSplit(e[0],e[1],e.slice(2));return!0}handleMessage(A){if(A.type==="startOfflineRender"){this.startOfflineRender(A.data);return}super.handleMessage(A)}startOfflineRender(A){if(!this.sequencer)return;A.soundBankList.forEach((t,n)=>{try{this.synthesizer.soundBankManager.addSoundBank($A.fromArrayBuffer(t.soundBankBuffer),`bank-${n}`,t.bankOffset)}catch(s){this.post({type:"soundBankError",data:s,currentTime:this.synthesizer.currentSynthTime})}}),A.snapshot!==void 0&&this.synthesizer.applySynthesizerSnapshot(A.snapshot),Ue.SpessaSynthInfo("%cRendering enabled! Starting render.",wa.info),this.sequencer.loopCount=A.loopCount,this.synthesizer.setMasterParameter("voiceCap",1/0);let e=Uo(A.sequencerOptions,Jo);this.sequencer.skipToFirstNoteOn=e.skipToFirstNoteOn,this.sequencer.playbackRate=e.initialPlaybackRate;try{this.sequencer.loadNewSongList([CA.copyFrom(A.midiSequence)]),this.sequencer.play()}catch(t){console.error(t),this.post({type:"sequencerReturn",data:{type:"midiError",data:t},currentTime:this.synthesizer.currentSynthTime})}this.postReady("startOfflineRender",null)}},Da=()=>{class A extends AudioWorkletProcessor{process;core;constructor(t){super(),this.core=new Yo(sampleRate,currentTime,this.port,t.processorOptions),this.process=this.core.process.bind(this.core)}}registerProcessor(To,A),Ue.SpessaSynthInfo("%cProcessor successfully registered!",wa.recognized)};Da();
//# sourceMappingURL=spessasynth_processor.js.map
